(()=>{var e={};e.id=929,e.ids=[929],e.modules={571:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/components/CollaborativeRoom.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/components/CollaborativeRoom.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6584:(e,t)=>{"use strict";function r(){let e=Object.create(null);return{on(t,r){(e[t]||(e[t]=[])).push(r)},off(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(e[t]||[]).slice().map(e=>{e(...n)})}}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11364:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{function e(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",l=r+1;l<e.length;){var s=e.charCodeAt(l);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){i+=e[l++];continue}break}if(!i)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:i}),r=l;continue}if("("===n){var o=1,a="",l=r+1;if("?"===e[l])throw TypeError('Pattern cannot start with "?" at '+l);for(;l<e.length;){if("\\"===e[l]){a+=e[l++]+e[l++];continue}if(")"===e[l]){if(0==--o){l++;break}}else if("("===e[l]&&(o++,"?"!==e[l+1]))throw TypeError("Capturing groups are not allowed at "+l);a+=e[l++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!a)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:a}),r=l;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,l=void 0===n?"./":n,s="[^"+i(t.delimiter||"/#?")+"]+?",o=[],a=0,u=0,c="",d=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},h=function(e){var t=d(e);if(void 0!==t)return t;var n=r[u];throw TypeError("Unexpected "+n.type+" at "+n.index+", expected "+e)},f=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=d("CHAR"),g=d("NAME"),m=d("PATTERN");if(g||m){var _=p||"";-1===l.indexOf(_)&&(c+=_,_=""),c&&(o.push(c),c=""),o.push({name:g||a++,prefix:_,suffix:"",pattern:m||s,modifier:d("MODIFIER")||""});continue}var y=p||d("ESCAPED_CHAR");if(y){c+=y;continue}if(c&&(o.push(c),c=""),d("OPEN")){var _=f(),b=d("NAME")||"",x=d("PATTERN")||"",v=f();h("CLOSE"),o.push({name:b||(x?a++:""),pattern:b&&!x?s:x,prefix:_,suffix:v,modifier:d("MODIFIER")||""});continue}h("END")}return o}function r(e,t){void 0===t&&(t={});var r=l(t),n=t.encode,i=void 0===n?function(e){return e}:n,s=t.validate,o=void 0===s||s,a=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",n=0;n<e.length;n++){var l=e[n];if("string"==typeof l){r+=l;continue}var s=t?t[l.name]:void 0,u="?"===l.modifier||"*"===l.modifier,c="*"===l.modifier||"+"===l.modifier;if(Array.isArray(s)){if(!c)throw TypeError('Expected "'+l.name+'" to not repeat, but got an array');if(0===s.length){if(u)continue;throw TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<s.length;d++){var h=i(s[d],l);if(o&&!a[n].test(h))throw TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but got "'+h+'"');r+=l.prefix+h+l.suffix}continue}if("string"==typeof s||"number"==typeof s){var h=i(String(s),l);if(o&&!a[n].test(h))throw TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+h+'"');r+=l.prefix+h+l.suffix;continue}if(!u){var f=c?"an array":"a string";throw TypeError('Expected "'+l.name+'" to be '+f)}}return r}}function n(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var l=n[0],s=n.index,o=Object.create(null),a=1;a<n.length;a++)!function(e){if(void 0!==n[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return i(e,r)}):o[r.name]=i(n[e],r)}}(a);return{path:l,index:s,params:o}}}function i(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function l(e){return e&&e.sensitive?"":"i"}function s(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,o=r.start,a=r.end,u=r.encode,c=void 0===u?function(e){return e}:u,d="["+i(r.endsWith||"")+"]|$",h="["+i(r.delimiter||"/#?")+"]",f=void 0===o||o?"^":"",p=0;p<e.length;p++){var g=e[p];if("string"==typeof g)f+=i(c(g));else{var m=i(c(g.prefix)),_=i(c(g.suffix));if(g.pattern)if(t&&t.push(g),m||_)if("+"===g.modifier||"*"===g.modifier){var y="*"===g.modifier?"?":"";f+="(?:"+m+"((?:"+g.pattern+")(?:"+_+m+"(?:"+g.pattern+"))*)"+_+")"+y}else f+="(?:"+m+"("+g.pattern+")"+_+")"+g.modifier;else f+="("+g.pattern+")"+g.modifier;else f+="(?:"+m+_+")"+g.modifier}}if(void 0===a||a)s||(f+=h+"?"),f+=r.endsWith?"(?="+d+")":"$";else{var b=e[e.length-1],x="string"==typeof b?h.indexOf(b[b.length-1])>-1:void 0===b;s||(f+="(?:"+h+"(?="+d+"))?"),x||(f+="(?="+h+"|"+d+")")}return new RegExp(f,l(r))}function o(t,r,n){if(t instanceof RegExp){if(!r)return t;var i=t.source.match(/\((?!\?)/g);if(i)for(var a=0;a<i.length;a++)r.push({name:a,prefix:"",suffix:"",modifier:"",pattern:""});return t}return Array.isArray(t)?RegExp("(?:"+t.map(function(e){return o(e,r,n).source}).join("|")+")",l(n)):s(e(t,n),r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=e,t.compile=function(t,n){return r(e(t,n),n)},t.tokensToFunction=r,t.match=function(e,t){var r=[];return n(o(e,r,t),r,t)},t.regexpToFunction=n,t.tokensToRegexp=s,t.pathToRegexp=o})(),e.exports=t})()},11997:e=>{"use strict";e.exports=require("punycode")},12352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(79289);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let l=e=>{try{return decodeURIComponent(e)}catch(e){throw Object.defineProperty(new n.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},s={};for(let[e,t]of Object.entries(r)){let r=i[t.pos];void 0!==r&&(t.repeat?s[e]=r.split("/").map(e=>l(e)):s[e]=l(r))}return s}}},13985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_SUFFIX:function(){return d},APP_DIR_ALIAS:function(){return O},CACHE_ONE_YEAR:function(){return S},DOT_NEXT_ALIAS:function(){return N},ESLINT_DEFAULT_DIRS:function(){return G},GSP_NO_RETURNED_VALUE:function(){return K},GSSP_COMPONENT_MEMBER_ERROR:function(){return X},GSSP_NO_RETURNED_VALUE:function(){return V},INFINITE_CACHE:function(){return E},INSTRUMENTATION_HOOK_FILENAME:function(){return T},MATCHED_PATH_HEADER:function(){return i},MIDDLEWARE_FILENAME:function(){return C},MIDDLEWARE_LOCATION_REGEXP:function(){return k},NEXT_BODY_SUFFIX:function(){return p},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return w},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return m},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return _},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return v},NEXT_CACHE_TAGS_HEADER:function(){return g},NEXT_CACHE_TAG_MAX_ITEMS:function(){return b},NEXT_CACHE_TAG_MAX_LENGTH:function(){return x},NEXT_DATA_SUFFIX:function(){return h},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return n},NEXT_META_SUFFIX:function(){return f},NEXT_QUERY_PARAM_PREFIX:function(){return r},NEXT_RESUME_HEADER:function(){return y},NON_STANDARD_NODE_ENV:function(){return q},PAGES_DIR_ALIAS:function(){return P},PRERENDER_REVALIDATE_HEADER:function(){return l},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return s},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return F},ROOT_DIR_ALIAS:function(){return R},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return L},RSC_ACTION_ENCRYPTION_ALIAS:function(){return M},RSC_ACTION_PROXY_ALIAS:function(){return j},RSC_ACTION_VALIDATE_ALIAS:function(){return A},RSC_CACHE_WRAPPER_ALIAS:function(){return I},RSC_MOD_REF_PROXY_ALIAS:function(){return D},RSC_PREFETCH_SUFFIX:function(){return o},RSC_SEGMENTS_DIR_SUFFIX:function(){return a},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return c},SERVER_PROPS_EXPORT_ERROR:function(){return H},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return U},SERVER_PROPS_SSG_CONFLICT:function(){return z},SERVER_RUNTIME:function(){return Y},SSG_FALLBACK_EXPORT_ERROR:function(){return J},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return B},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return W},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return $},WEBPACK_LAYERS:function(){return Z},WEBPACK_RESOURCE_QUERIES:function(){return ee}});let r="nxtP",n="nxtI",i="x-matched-path",l="x-prerender-revalidate",s="x-prerender-revalidate-if-generated",o=".prefetch.rsc",a=".segments",u=".segment.rsc",c=".rsc",d=".action",h=".json",f=".meta",p=".body",g="x-next-cache-tags",m="x-next-revalidated-tags",_="x-next-revalidate-tag-token",y="next-resume",b=128,x=256,v=1024,w="_N_T_",S=31536e3,E=0xfffffffe,C="middleware",k=`(?:src/)?${C}`,T="instrumentation",P="private-next-pages",N="private-dot-next",R="private-next-root-dir",O="private-next-app-dir",D="private-next-rsc-mod-ref-proxy",A="private-next-rsc-action-validate",j="private-next-rsc-server-reference",I="private-next-rsc-cache-wrapper",M="private-next-rsc-action-encryption",L="private-next-rsc-action-client-wrapper",F="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",B="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",U="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",z="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",W="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",H="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",K="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",V="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",$="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",X="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",q='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',J="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",G=["app","pages","components","lib","src"],Y={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},Q={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},Z={...Q,GROUP:{builtinReact:[Q.reactServerComponents,Q.actionBrowser],serverOnly:[Q.reactServerComponents,Q.actionBrowser,Q.instrument,Q.middleware],neutralTarget:[Q.apiNode,Q.apiEdge],clientOnly:[Q.serverSideRendering,Q.appPagesBrowser],bundled:[Q.reactServerComponents,Q.actionBrowser,Q.serverSideRendering,Q.appPagesBrowser,Q.shared,Q.instrument,Q.middleware],appPages:[Q.reactServerComponents,Q.serverSideRendering,Q.appPagesBrowser,Q.actionBrowser]}},ee={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},14104:(e,t)=>{"use strict";function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},16493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return n}});let r=new WeakMap;function n(e,t){let n;if(!t)return{pathname:e};let i=r.get(t);i||(i=t.map(e=>e.toLowerCase()),r.set(t,i));let l=e.split("/",2);if(!l[1])return{pathname:e};let s=l[1].toLowerCase(),o=i.indexOf(s);return o<0?{pathname:e}:(n=t[o],{pathname:e=e.slice(n.length+1)||"/",detectedLocale:n})}},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(86475),i=r(47860),l=r(84949),s=r(16493),o=r(25942),a=r(65430);function u(e,t,r,u,c,d){let h,f=!1,p=!1,g=(0,a.parseRelativeUrl)(e),m=(0,l.removeTrailingSlash)((0,s.normalizeLocalePath)((0,o.removeBasePath)(g.pathname),d).pathname),_=r=>{let a=(0,n.getPathMatch)(r.source+"",{removeUnnamedParams:!0,strict:!0})(g.pathname);if((r.has||r.missing)&&a){let e=(0,i.matchHas)({headers:{host:document.location.hostname,"user-agent":navigator.userAgent},cookies:document.cookie.split("; ").reduce((e,t)=>{let[r,...n]=t.split("=");return e[r]=n.join("="),e},{})},g.query,r.has,r.missing);e?Object.assign(a,e):a=!1}if(a){if(!r.destination)return p=!0,!0;let n=(0,i.prepareDestination)({appendParamsToQuery:!0,destination:r.destination,params:a,query:u});if(g=n.parsedDestination,e=n.newUrl,Object.assign(u,n.parsedDestination.query),m=(0,l.removeTrailingSlash)((0,s.normalizeLocalePath)((0,o.removeBasePath)(e),d).pathname),t.includes(m))return f=!0,h=m,!0;if((h=c(m))!==e&&t.includes(h))return f=!0,!0}},y=!1;for(let e=0;e<r.beforeFiles.length;e++)_(r.beforeFiles[e]);if(!(f=t.includes(m))){if(!y){for(let e=0;e<r.afterFiles.length;e++)if(_(r.afterFiles[e])){y=!0;break}}if(y||(h=c(m),y=f=t.includes(h)),!y){for(let e=0;e<r.fallback.length;e++)if(_(r.fallback[e])){y=!0;break}}}return{asPath:e,parsedAs:g,matchedPage:f,resolvedHref:h,externalDest:p}}},19307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=r(19169);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:l}=(0,n.parsePath)(e);return""+r+t+i+l}},23640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return n}}),r(54674);let n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},24946:(e,t,r)=>{Promise.resolve().then(r.bind(r,78231))},25117:(e,t)=>{"use strict";function r(e,t){let r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return r}})},25779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return r}});let r=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},27618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BloomFilter",{enumerable:!0,get:function(){return n}});class n{static from(e,t){void 0===t&&(t=1e-4);let r=new n(e.length,t);for(let t of e)r.add(t);return r}export(){let e={numItems:this.numItems,errorRate:this.errorRate,numBits:this.numBits,numHashes:this.numHashes,bitArray:this.bitArray};if(this.errorRate<1e-4){let t=JSON.stringify(e);r(76267).sync(t)}return e}import(e){this.numItems=e.numItems,this.errorRate=e.errorRate,this.numBits=e.numBits,this.numHashes=e.numHashes,this.bitArray=e.bitArray}add(e){this.getHashValues(e).forEach(e=>{this.bitArray[e]=1})}contains(e){return this.getHashValues(e).every(e=>this.bitArray[e])}getHashValues(e){let t=[];for(let r=1;r<=this.numHashes;r++){let n=function(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(t^e.charCodeAt(r),0x5bd1e995),t^=t>>>13,t=Math.imul(t,0x5bd1e995);return t>>>0}(""+e+r)%this.numBits;t.push(n)}return t}constructor(e,t=1e-4){this.numItems=e,this.errorRate=t,this.numBits=Math.ceil(-(e*Math.log(t))/(Math.log(2)*Math.log(2))),this.numHashes=Math.ceil(this.numBits/e*Math.log(2)),this.bitArray=Array(this.numBits).fill(0)}}},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNextPathnameInfo",{enumerable:!0,get:function(){return s}});let n=r(16493),i=r(50075),l=r(2255);function s(e,t){var r,s;let{basePath:o,i18n:a,trailingSlash:u}=null!=(r=t.nextConfig)?r:{},c={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):u};o&&(0,l.pathHasPrefix)(c.pathname,o)&&(c.pathname=(0,i.removePathPrefix)(c.pathname,o),c.basePath=o);let d=c.pathname;if(c.pathname.startsWith("/_next/data/")&&c.pathname.endsWith(".json")){let e=c.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");c.buildId=e[0],d="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(c.pathname=d)}if(a){let e=t.i18nProvider?t.i18nProvider.analyze(c.pathname):(0,n.normalizeLocalePath)(c.pathname,a.locales);c.locale=e.detectedLocale,c.pathname=null!=(s=e.pathname)?s:c.pathname,!e.detectedLocale&&c.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(d):(0,n.normalizeLocalePath)(d,a.locales)).detectedLocale&&(c.locale=e.detectedLocale)}return c}},33645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return g},getNamedRouteRegex:function(){return p},getRouteRegex:function(){return d},parseParameter:function(){return a}});let n=r(13985),i=r(72859),l=r(70519),s=r(84949),o=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function a(e){let t=e.match(o);return t?u(t[2]):u(e)}function u(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function c(e,t,r){let n={},a=1,c=[];for(let d of(0,s.removeTrailingSlash)(e).slice(1).split("/")){let e=i.INTERCEPTION_ROUTE_MARKERS.find(e=>d.startsWith(e)),s=d.match(o);if(e&&s&&s[2]){let{key:t,optional:r,repeat:i}=u(s[2]);n[t]={pos:a++,repeat:i,optional:r},c.push("/"+(0,l.escapeStringRegexp)(e)+"([^/]+?)")}else if(s&&s[2]){let{key:e,repeat:t,optional:i}=u(s[2]);n[e]={pos:a++,repeat:t,optional:i},r&&s[1]&&c.push("/"+(0,l.escapeStringRegexp)(s[1]));let o=t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";r&&s[1]&&(o=o.substring(1)),c.push(o)}else c.push("/"+(0,l.escapeStringRegexp)(d));t&&s&&s[3]&&c.push((0,l.escapeStringRegexp)(s[3]))}return{parameterizedRoute:c.join(""),groups:n}}function d(e,t){let{includeSuffix:r=!1,includePrefix:n=!1,excludeOptionalTrailingSlash:i=!1}=void 0===t?{}:t,{parameterizedRoute:l,groups:s}=c(e,r,n),o=l;return i||(o+="(?:/)?"),{re:RegExp("^"+o+"$"),groups:s}}function h(e){let t,{interceptionMarker:r,getSafeRouteKey:n,segment:i,routeKeys:s,keyPrefix:o,backreferenceDuplicateKeys:a}=e,{key:c,optional:d,repeat:h}=u(i),f=c.replace(/\W/g,"");o&&(f=""+o+f);let p=!1;(0===f.length||f.length>30)&&(p=!0),isNaN(parseInt(f.slice(0,1)))||(p=!0),p&&(f=n());let g=f in s;o?s[f]=""+o+c:s[f]=c;let m=r?(0,l.escapeStringRegexp)(r):"";return t=g&&a?"\\k<"+f+">":h?"(?<"+f+">.+?)":"(?<"+f+">[^/]+?)",d?"(?:/"+m+t+")?":"/"+m+t}function f(e,t,r,a,u){let c,d=(c=0,()=>{let e="",t=++c;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),f={},p=[];for(let c of(0,s.removeTrailingSlash)(e).slice(1).split("/")){let e=i.INTERCEPTION_ROUTE_MARKERS.some(e=>c.startsWith(e)),s=c.match(o);if(e&&s&&s[2])p.push(h({getSafeRouteKey:d,interceptionMarker:s[1],segment:s[2],routeKeys:f,keyPrefix:t?n.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:u}));else if(s&&s[2]){a&&s[1]&&p.push("/"+(0,l.escapeStringRegexp)(s[1]));let e=h({getSafeRouteKey:d,segment:s[2],routeKeys:f,keyPrefix:t?n.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:u});a&&s[1]&&(e=e.substring(1)),p.push(e)}else p.push("/"+(0,l.escapeStringRegexp)(c));r&&s&&s[3]&&p.push((0,l.escapeStringRegexp)(s[3]))}return{namedParameterizedRoute:p.join(""),routeKeys:f}}function p(e,t){var r,n,i;let l=f(e,t.prefixRouteKeys,null!=(r=t.includeSuffix)&&r,null!=(n=t.includePrefix)&&n,null!=(i=t.backreferenceDuplicateKeys)&&i),s=l.namedParameterizedRoute;return t.excludeOptionalTrailingSlash||(s+="(?:/)?"),{...d(e,t),namedRegex:"^"+s+"$",routeKeys:l.routeKeys}}function g(e,t){let{parameterizedRoute:r}=c(e,!1,!1),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=f(e,!1,!1,!1,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},33873:e=>{"use strict";e.exports=require("path")},38848:(e,t)=>{"use strict";function r(e,t){let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=r.length;n--;){let i=r[n];if("query"===i){let r=Object.keys(e.query);if(r.length!==Object.keys(t.query).length)return!1;for(let n=r.length;n--;){let i=r[n];if(!t.query.hasOwnProperty(i)||e.query[i]!==t.query[i])return!1}}else if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"compareRouterStates",{enumerable:!0,get:function(){return r}})},39286:(e,t,r)=>{"use strict";function n(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:n}=r(72485);return n(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return n}})},41292:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"denormalizePagePath",{enumerable:!0,get:function(){return l}});let n=r(52674),i=r(14104);function l(e){let t=(0,i.normalizePathSep)(e);return t.startsWith("/index/")&&!(0,n.isDynamicRoute)(t)?t.slice(6):"/index"!==t?t:"/"}},44670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(37413),i=r(571),l=r(18398),s=r(96478),o=r(40847),a=r(39916);let u=async e=>{let{id:t}=await e.params,r=await (0,o.N)();r||(0,a.redirect)("/sign-in");let u=await (0,l.YE)({roomId:t,userId:r.emailAddresses[0].emailAddress});u||(0,a.redirect)("/");let c=Object.keys(u.usersAccesses),d=await (0,s.A)({userIds:c}),h=d?.map(e=>({...e,userType:u.usersAccesses[e.email]?.includes("room:write")?"editor":"viewer"})),f=u.usersAccesses[r.emailAddresses[0].emailAddress]?.includes("room:write")?"editor":"viewer";return(0,n.jsx)("main",{className:"flex w-full flex-col items-center",children:(0,n.jsx)(i.default,{roomId:t,roomMetadata:u.metadata,users:h,currentUserType:f})})}},45044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(72859),i=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,l=/\/\[[^/]+\](?=\/|$)/;function s(e,t){return(void 0===t&&(t=!0),(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),t)?l.test(e):i.test(e)}},45346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return d}});let n=r(76715),i=r(30195),l=r(25117),s=r(79289),o=r(54674),a=r(61794),u=r(52674),c=r(84530);function d(e,t,r){let d,h="string"==typeof t?t:(0,i.formatWithValidation)(t),f=h.match(/^[a-zA-Z]{1,}:\/\//),p=f?h.slice(f[0].length):h;if((p.split("?",1)[0]||"").match(/(\/\/|\\)/)){let e=(0,s.normalizeRepeatedSlashes)(p);h=(f?f[0]:"")+e}if(!(0,a.isLocalURL)(h))return r?[h]:h;try{d=new URL(h.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){d=new URL("/","http://n")}try{let e=new URL(h,d);e.pathname=(0,o.normalizePathTrailingSlash)(e.pathname);let t="";if((0,u.isDynamicRoute)(e.pathname)&&e.searchParams&&r){let r=(0,n.searchParamsToUrlQuery)(e.searchParams),{result:s,params:o}=(0,c.interpolateAs)(e.pathname,e.pathname,r);s&&(t=(0,i.formatWithValidation)({pathname:s,hash:e.hash,query:(0,l.omit)(r,o)}))}let s=e.origin===d.origin?e.href.slice(e.origin.length):e.href;return r?[s,t||s]:s}catch(e){return r?[h]:h}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{compileNonPath:function(){return c},matchHas:function(){return u},parseDestination:function(){return d},prepareDestination:function(){return h}});let n=r(11364),i=r(70519),l=r(94089),s=r(72859),o=r(39286);function a(e){return e.replace(/__ESC_COLON_/gi,":")}function u(e,t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);let i={},l=r=>{let n,l=r.key;switch(r.type){case"header":l=l.toLowerCase(),n=e.headers[l];break;case"cookie":n="cookies"in e?e.cookies[r.key]:(0,o.getCookieParser)(e.headers)()[r.key];break;case"query":n=t[l];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};n=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&n)return i[function(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}(l)]=n,!0;if(n){let e=RegExp("^"+r.value+"$"),t=Array.isArray(n)?n.slice(-1)[0].match(e):n.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{i[e]=t.groups[e]}):"host"===r.type&&t[0]&&(i.host=t[0])),!0}return!1};return!(!r.every(e=>l(e))||n.some(e=>l(e)))&&i}function c(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,n.compile)("/"+e,{validate:!1})(t).slice(1)}function d(e){let t=e.destination;for(let r of Object.keys({...e.params,...e.query}))r&&(t=t.replace(RegExp(":"+(0,i.escapeStringRegexp)(r),"g"),"__ESC_COLON_"+r));let r=(0,l.parseUrl)(t),n=r.pathname;n&&(n=a(n));let s=r.href;s&&(s=a(s));let o=r.hostname;o&&(o=a(o));let u=r.hash;return u&&(u=a(u)),{...r,pathname:n,hostname:o,href:s,hash:u}}function h(e){let t,r,i=Object.assign({},e.query),l=d(e),{hostname:o,query:u}=l,h=l.pathname;l.hash&&(h=""+h+l.hash);let f=[],p=[];for(let e of((0,n.pathToRegexp)(h,p),p))f.push(e.name);if(o){let e=[];for(let t of((0,n.pathToRegexp)(o,e),e))f.push(t.name)}let g=(0,n.compile)(h,{validate:!1});for(let[r,i]of(o&&(t=(0,n.compile)(o,{validate:!1})),Object.entries(u)))Array.isArray(i)?u[r]=i.map(t=>c(a(t),e.params)):"string"==typeof i&&(u[r]=c(a(i),e.params));let m=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!m.some(e=>f.includes(e)))for(let t of m)t in u||(u[t]=e.params[t]);if((0,s.isInterceptionRouteAppPath)(h))for(let t of h.split("/")){let r=s.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){"(..)(..)"===r?(e.params["0"]="(..)",e.params["1"]="(..)"):e.params["0"]=r;break}}try{let[n,i]=(r=g(e.params)).split("#",2);t&&(l.hostname=t(e.params)),l.pathname=n,l.hash=(i?"#":"")+(i||""),delete l.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Object.defineProperty(Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"),"__NEXT_ERROR_CODE",{value:"E329",enumerable:!1,configurable:!0});throw e}return l.query={...i,...l.query},{newUrl:r,destQuery:u,parsedDestination:l}}},48250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"7f264293cb5004db82e11d533e42b69681ec442500":()=>n.y});var n=r(38301)},50075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=r(2255);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},52668:(e,t)=>{"use strict";function r(e,t){return void 0===t&&(t=""),("/"===e?"/index":/^\/index(\/|$)/.test(e)?"/index"+e:e)+t}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}})},52674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n.getSortedRouteObjects},getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return i.isDynamicRoute}});let n=r(7e4),i=r(45044)},53403:(e,t)=>{"use strict";function r(e){return"/api"===e||!!(null==e?void 0:e.startsWith("/api/"))}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isAPIRoute",{enumerable:!0,get:function(){return r}})},55591:e=>{"use strict";e.exports=require("https")},56380:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"7f0192c259abb3eb449cf4c1aec0699e8cb167715e":()=>n.ot,"7f154f2f9d537a74661ac1aa4bfa2f4df16a871ee1":()=>i.dv,"7f26295de556bdc84a46140871380e2da8b27cd5ca":()=>l.W,"7f358d36e8747368e23554eea8f5a3a1a777022624":()=>i.YE,"7f8a223d93f0a8b6822911a8cf71287b123a2dfa2d":()=>i.lU,"7f9d304d15482ac489083ba521afe1484a770b9301":()=>l.A,"7fc2de60768b96403e85b52a20f800b8879bdb82aa":()=>n.ai,"7fc9ccb32bd1e175b9630a99aa2f8bd9058dedb582":()=>i.ui,"7fd5390e7c7f3da9fe7c87fb2c3a25ff154136ff8a":()=>i.Nn,"7fd88899f64beb358d6d0bdd7aea355091f06302c6":()=>i.HK,"7fe6650757c6640eec35a4afd9b406f5658a53bd46":()=>i.zj,"7feeef9b09070451effa6411eb9134c7b2c633c1c7":()=>n.at});var n=r(98749),i=r(18398),l=r(96478)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return i}}),r(79289);let n=r(76715);function i(e,t,r){void 0===r&&(r=!0);let i=new URL("http://n"),l=t?new URL(t,i):e.startsWith(".")?new URL("http://n"):i,{pathname:s,searchParams:o,search:a,hash:u,href:c,origin:d}=new URL(e,l);if(d!==i.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+e),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:s,query:r?(0,n.searchParamsToUrlQuery)(o):void 0,search:a,hash:u,href:c.slice(d.length)}}},7e4:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return i},getSortedRoutes:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let i=e[0];if(i.startsWith("[")&&i.endsWith("]")){let r=i.slice(1,-1),s=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),s=!0),r.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(r.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function l(e,r){if(null!==e&&e!==r)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});t.forEach(e=>{if(e===r)throw Object.defineProperty(Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(e.replace(/\W/g,"")===i.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),t.push(r)}if(n)if(s){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});l(this.optionalRestSlugName,r),this.optionalRestSlugName=r,i="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});l(this.restSlugName,r),this.restSlugName=r,i="[...]"}else{if(s)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});l(this.slugName,r),this.slugName=r,i="[]"}}this.children.has(i)||this.children.set(i,new r),this.children.get(i)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function i(e,t){let r={},i=[];for(let n=0;n<e.length;n++){let l=t(e[n]);r[l]=n,i[n]=l}return n(i).map(t=>e[r[t]])}},70519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},71025:(e,t)=>{"use strict";let r;function n(e){return(null==r?void 0:r.createScriptURL(e))||e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"__unsafeCreateTrustedScriptURL",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72485:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},l=t.split(n),s=(r||{}).decode||e,o=0;o<l.length;o++){var a=l[o],u=a.indexOf("=");if(!(u<0)){var c=a.substr(0,u).trim(),d=a.substr(++u,a.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[c]&&(i[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,s))}}return i},t.serialize=function(e,t,n){var l=n||{},s=l.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!i.test(o))throw TypeError("argument val is invalid");var a=e+"="+o;if(null!=l.maxAge){var u=l.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(u)}if(l.domain){if(!i.test(l.domain))throw TypeError("option domain is invalid");a+="; Domain="+l.domain}if(l.path){if(!i.test(l.path))throw TypeError("option path is invalid");a+="; Path="+l.path}if(l.expires){if("function"!=typeof l.expires.toUTCString)throw TypeError("option expires is invalid");a+="; Expires="+l.expires.toUTCString()}if(l.httpOnly&&(a+="; HttpOnly"),l.secure&&(a+="; Secure"),l.sameSite)switch("string"==typeof l.sameSite?l.sameSite.toLowerCase():l.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return a};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},76209:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.default,__next_app__:()=>c,pages:()=>u,routeModule:()=>d,tree:()=>a});var n=r(65239),i=r(48088),l=r(46076),s=r(30893),o={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let a={children:["",{children:["(root)",{children:["documents",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44670)),"/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/app/(root)/documents/[id]/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(r.bind(r,46076)),"/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/Users/bhaskarg/Documents/Projects/LiveDocs/google-sheets-clone/app/(root)/documents/[id]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},d=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(root)/documents/[id]/page",pathname:"/documents/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},76267:(e,t,r)=>{(()=>{var t={154:(e,t,r)=>{var n=r(781),i=["write","end","destroy"],l=["resume","pause"],s=["data","close"],o=Array.prototype.slice;function a(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r)}e.exports=function(e,t){var r=new n,u=!1;return a(i,function(t){r[t]=function(){return e[t].apply(e,arguments)}}),a(l,function(e){r[e]=function(){r.emit(e);var n=t[e];if(n)return n.apply(t,arguments);t.emit(e)}}),a(s,function(e){t.on(e,function(){var t=o.call(arguments);t.unshift(e),r.emit.apply(r,t)})}),t.on("end",function(){if(!u){u=!0;var e=o.call(arguments);e.unshift("end"),r.emit.apply(r,e)}}),e.on("drain",function(){r.emit("drain")}),e.on("error",c),t.on("error",c),r.writable=e.writable,r.readable=t.readable,r;function c(e){r.emit("error",e)}}},349:(e,t,r)=>{"use strict";let n=r(147),i=r(781),l=r(796),s=r(154),o=r(530),a=e=>Object.assign({level:9},e);e.exports=(e,t)=>e?o(l.gzip)(e,a(t)).then(e=>e.length).catch(e=>0):Promise.resolve(0),e.exports.sync=(e,t)=>l.gzipSync(e,a(t)).length,e.exports.stream=e=>{let t=new i.PassThrough,r=new i.PassThrough,n=s(t,r),o=0,u=l.createGzip(a(e)).on("data",e=>{o+=e.length}).on("error",()=>{n.gzipSize=0}).on("end",()=>{n.gzipSize=o,n.emit("gzip-size",o),r.end()});return t.pipe(u),t.pipe(r,{end:!1}),n},e.exports.file=(t,r)=>new Promise((i,l)=>{let s=n.createReadStream(t);s.on("error",l);let o=s.pipe(e.exports.stream(r));o.on("error",l),o.on("gzip-size",i)}),e.exports.fileSync=(t,r)=>e.exports.sync(n.readFileSync(t),r)},530:e=>{"use strict";let t=(e,t)=>function(...r){return new t.promiseModule((n,i)=>{t.multiArgs?r.push((...e)=>{t.errorFirst?e[0]?i(e):(e.shift(),n(e)):n(e)}):t.errorFirst?r.push((e,t)=>{e?i(e):n(t)}):r.push(n),e.apply(this,r)})};e.exports=(e,r)=>{let n;r=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},r);let i=typeof e;if(null===e||"object"!==i&&"function"!==i)throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":i}\``);let l=e=>{let t=t=>"string"==typeof t?e===t:t.test(e);return r.include?r.include.some(t):!r.exclude.some(t)};for(let s in n="function"===i?function(...n){return r.excludeMain?e(...n):t(e,r).apply(this,n)}:Object.create(Object.getPrototypeOf(e)),e){let i=e[s];n[s]="function"==typeof i&&l(s)?t(i,r):i}return n}},147:e=>{"use strict";e.exports=r(29021)},781:e=>{"use strict";e.exports=r(27910)},796:e=>{"use strict";e.exports=r(74075)}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}},s=!0;try{t[e](l,l.exports,i),s=!1}finally{s&&delete n[e]}return l.exports}i.ab=__dirname+"/",e.exports=i(349)})()},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78231:(e,t,r)=>{"use strict";let n;r.d(t,{default:()=>pW});var i=r(60687),l=r(49269),s=r(64871);let o={code:"editor-code",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},image:"editor-image",link:"editor-link",list:{listitem:"editor-listitem",nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul"},ltr:"ltr",paragraph:"editor-paragraph",placeholder:"editor-placeholder",quote:"editor-quote",rtl:"rtl",text:{bold:"editor-text-bold",code:"editor-text-code",hashtag:"editor-text-hashtag",italic:"editor-text-italic",overflowed:"editor-text-overflowed",strikethrough:"editor-text-strikethrough",underline:"editor-text-underline",underlineStrikethrough:"editor-text-underlineStrikethrough"}};var a=r(43210),u=r.n(a),c=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});let d=(0,a.createContext)(null);function h(){let e=(0,a.useContext)(d);return null==e&&c(8),e}let f={},p={},g={},m={},_={},y={},b={},x={},v={},w={},S={},E={},C={},k={},T={},P={},N={},R={},O={},D={},A={},j={},I={},M={},L={},F={},B={},U={},z={},W={},H={},K={},V={},$={},X={},q={},J={},G={},Y={},Q={},Z={},ee={},et={},er="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,en=er&&"documentMode"in document?document.documentMode:null,ei=er&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),el=er&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),es=!(!er||!("InputEvent"in window)||en)&&"getTargetRanges"in new window.InputEvent("input"),eo=er&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ea=er&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,eu=er&&/Android/.test(navigator.userAgent),ec=er&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ed=er&&eu&&ec,eh=er&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ec,ef=eo||ea||eh?"\xa0":"​",ep=el?"\xa0":ef,eg="֑-߿יִ-﷽ﹰ-ﻼ",em="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",e_=RegExp("^[^"+em+"]*["+eg+"]"),ey=RegExp("^[^"+eg+"]*["+em+"]"),eb={bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},ex={directionless:1,unmergeable:2},ev={center:2,end:6,justify:4,left:1,right:3,start:5},ew={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},eS={normal:0,segmented:2,token:1},eE={0:"normal",2:"segmented",1:"token"};var eC=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function ek(...e){let t=[];for(let r of e)if(r&&"string"==typeof r)for(let[e]of r.matchAll(/\S+/g))t.push(e);return t}let eT=!1,eP=0;function eN(e){eP=e.timeStamp}function eR(e,t,r){let n="BR"===e.nodeName,i=t.__lexicalLineBreak;return i&&(e===i||n&&e.previousSibling===i)||n&&void 0!==e2(e,r)}function eO(e,t,r){eT=!0;let n=performance.now()-eP>100;try{nK(e,()=>{let i=ng()||e.getEditorState().read(()=>{let e=ng();return null!==e?e.clone():null}),l=new Map,s=e.getRootElement(),o=e._editorState,a=e._blockCursorElement,u=!1,c="";for(let r=0;r<t.length;r++){let d=t[r],h=d.type,f=d.target,p=function(e,t,r,n){var i;for(let l=e;l&&(i=l,!0!==i.__lexicalUnmanaged);l=tb(l)){let e=e2(l,t);if(void 0!==e){let t=e0(e,r);if(t)return nY(t)||!tR(l)?void 0:[l,t]}else if(l===n)return[n,e6(r)]}}(f,e,o,s);if(!p)continue;let[g,m]=p;if("characterData"===h)n&&r2(m)&&eX(f)&&function(e,t,r){if(nt(e)){let t=e.anchor.getNode();if(t.is(r)&&e.format!==t.getFormat())return!1}return eX(t)&&r.isAttached()}(i,f,m)&&function(e,t,r){let n=tN(tS(r)),i=null,l=null;null!==n&&n.anchorNode===e&&(i=n.anchorOffset,l=n.focusOffset);let s=e.nodeValue;null!==s&&ts(t,s,i,l,!1)}(f,m,e);else if("childList"===h){u=!0;let t=d.addedNodes;for(let r=0;r<t.length;r++){let n=t[r],i=e1(n),l=n.parentNode;if(null!=l&&n!==a&&null===i&&!eR(n,l,e)){if(el){let e=(tR(n)?n.innerText:null)||n.nodeValue;e&&(c+=e)}l.removeChild(n)}}let r=d.removedNodes,n=r.length;if(n>0){let t=0;for(let i=0;i<n;i++){let n=r[i];(eR(n,f,e)||a===n)&&(f.appendChild(n),t++)}n!==t&&l.set(g,m)}}}if(l.size>0)for(let[t,r]of l)r.reconcileObservedMutation(t,e);let d=r.takeRecords();if(d.length>0){for(let t=0;t<d.length;t++){let r=d[t],n=r.addedNodes,i=r.target;for(let t=0;t<n.length;t++){let r=n[t],l=r.parentNode;null==l||"BR"!==r.nodeName||eR(r,i,e)||l.removeChild(r)}}r.takeRecords()}null!==i&&(u&&e9(i),el&&tm(e)&&i.insertRawText(c))})}finally{eT=!1}}function eD(e){let t=e._observer;null!==t&&eO(e,t.takeRecords(),t)}function eA(e){0===eP&&tS(e).addEventListener("textInput",eN,!0),e._observer=new MutationObserver((t,r)=>{eO(e,t,r)})}function ej(e,t){let r=e.__mode,n=e.__format,i=e.__style,l=t.__mode,s=t.__format,o=t.__style;return(null===r||r===l)&&(null===n||n===s)&&(null===i||i===o)}function eI(e,t){let r=e.mergeWithSibling(t),n=nD()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function eM(e){let t,r,n=e;if(""!==n.__text||!n.isSimpleText()||n.isUnmergeable()){for(;null!==(t=n.getPreviousSibling())&&r2(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){ej(t,n)&&(n=eI(t,n));break}t.remove()}for(;null!==(r=n.getNextSibling())&&r2(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(""!==r.__text){ej(n,r)&&(n=eI(n,r));break}r.remove()}}else n.remove()}function eL(e){return eF(e.anchor),eF(e.focus),e}function eF(e){for(;"element"===e.type;){let t,r,n=e.getNode(),i=e.offset;if(i===n.getChildrenSize()?(t=n.getChildAtIndex(i-1),r=!0):(t=n.getChildAtIndex(i),r=!1),r2(t)){e.set(t.__key,r?t.getTextContentSize():0,"text",!0);break}if(!nq(t))break;e.set(t.__key,r?t.getChildrenSize():0,"element",!0)}}let eB=1,eU="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function ez(e){let t=document.activeElement;if(!tR(t))return!1;let r=t.nodeName;return nY(e4(e))&&("INPUT"===r||"TEXTAREA"===r||"true"===t.contentEditable&&null==eV(t))}function eW(e,t,r){let n=e.getRootElement();try{return null!==n&&n.contains(t)&&n.contains(r)&&null!==t&&!ez(t)&&eK(t)===e}catch(e){return!1}}function eH(e){return e instanceof n7}function eK(e){let t=e;for(;null!=t;){let e=eV(t);if(eH(e))return e;t=tb(t)}return null}function eV(e){return e?e.__lexicalEditor:null}function e$(e){return e.isToken()||e.isSegmented()}function eX(e){return tO(e)&&3===e.nodeType}function eq(e){let t=e;for(;null!=t;){if(eX(t))return t;t=t.firstChild}return null}function eJ(e,t,r){let n=eb[t];if(null!==r&&(e&n)==(r&n))return e;let i=e^n;return"subscript"===t?i&=~eb.superscript:"superscript"===t?i&=~eb.subscript:"lowercase"===t?(i&=~eb.uppercase,i&=~eb.capitalize):"uppercase"===t?(i&=~eb.lowercase,i&=~eb.capitalize):"capitalize"===t&&(i&=~eb.lowercase,i&=~eb.uppercase),i}function eG(e){let t=e.getParent();if(null!==t){let r=e.getWritable(),n=t.getWritable(),i=e.getPreviousSibling(),l=e.getNextSibling();if(null===i)if(null!==l){let e=l.getWritable();n.__first=l.__key,e.__prev=null}else n.__first=null;else{let e=i.getWritable();if(null!==l){let t=l.getWritable();t.__prev=e.__key,e.__next=t.__key}else e.__next=null;r.__prev=null}if(null===l)if(null!==i){let e=i.getWritable();n.__last=i.__key,e.__next=null}else n.__last=null;else{let e=l.getWritable();if(null!==i){let t=i.getWritable();t.__next=e.__key,e.__prev=t.__key}else e.__prev=null;r.__next=null}n.__size--,r.__parent=null}}function eY(e){nR();let t=e.getLatest(),r=t.__parent,n=nO(),i=nD(),l=n._nodeMap,s=i._dirtyElements;null!==r&&function(e,t,r){let n=e;for(;null!==n;){if(r.has(n))return;let e=t.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}}(r,l,s);let o=t.__key;i._dirtyType=1,nq(e)?s.set(o,!0):i._dirtyLeaves.add(o)}function eQ(e){nN();let t=nD(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,null!==r){let e=e0(r);null!==e&&e.getWritable()}if(null!==e){let t=e0(e);null!==t&&t.getWritable()}}}function eZ(){return nP()?null:nD()._compositionKey}function e0(e,t){let r=(t||nO())._nodeMap.get(e);return void 0===r?null:r}function e1(e,t){let r=e2(e,nD());return void 0!==r?e0(r,t):null}function e2(e,t){return e[`__lexicalKey_${t._key}`]}function e4(e,t){let r=e;for(;null!=r;){let e=e1(r,t);if(null!==e)return e;r=tb(r)}return null}function e8(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function e3(e){return e.read(()=>e5().getTextContent())}function e5(){return e6(nO())}function e6(e){return e._nodeMap.get("root")}function e9(e){nN();let t=nO();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function e7(e){let t=nD(),r=function(e,t){let r=e;for(;null!=r;){let e=e2(r,t);if(void 0!==e)return e;r=tb(r)}return null}(e,t);return null===r?e===t.getRootElement()?e0("root"):null:e0(r)}function te(e,t){return t?e.getTextContentSize():0}function tt(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function tr(e){let t=[],r=e;for(;null!==r;)t.push(r),r=r._parentEditor;return t}function tn(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function ti(e){return eX(e)?e.nodeValue:null}function tl(e,t,r){let n=tN(tS(t));if(null===n)return;let i=n.anchorNode,{anchorOffset:l,focusOffset:s}=n;if(null!==i){let t=ti(i),n=e4(i);if(null!==t&&r2(n)){if(t===ef&&r){let e=r.length;t=r,l=e,s=e}null!==t&&ts(n,t,l,s,e)}}}function ts(e,t,r,n,i){let l=e;if(l.isAttached()&&(i||!l.isDirty())){let s=l.isComposing(),o=t;(s||i)&&t[t.length-1]===ef&&(o=t.slice(0,-1));let a=l.getTextContent();if(i||o!==a){if(""===o){if(eQ(null),eo||ea||eh)l.remove();else{let e=nD();setTimeout(()=>{e.update(()=>{l.isAttached()&&l.remove()})},20)}return}let t=l.getParent(),i=nm(),a=l.getTextContentSize(),u=eZ(),c=l.getKey();if(l.isToken()||null!==u&&c===u&&!s||nt(i)&&(null!==t&&!t.canInsertTextBefore()&&0===i.anchor.offset||i.anchor.key===e.__key&&0===i.anchor.offset&&!l.canInsertTextBefore()&&!s||i.focus.key===e.__key&&i.focus.offset===a&&!l.canInsertTextAfter()&&!s))return void l.markDirty();let d=ng();if(!nt(d)||null===r||null===n)return void l.setTextContent(o);if(d.setTextNodeRange(l,r,l,n),l.isSegmented()){let e=r1(l.getTextContent());l.replace(e),l=e}l.setTextContent(o)}}}function to(e){return"ArrowLeft"===e}function ta(e){return"ArrowRight"===e}function tu(e){return"Backspace"===e}function tc(e){return"Delete"===e}function td(e,t,r){return"a"===e.toLowerCase()&&(ei?t:r)}function th(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let r=e.__lexicalClassNameCache,n=r[t];if(void 0!==n)return n;let i=e[t];if("string"==typeof i){let e=ek(i);return r[t]=e,e}return i}function tf(e,t,r,n,i){if(0===r.size)return;let l=n.__type,s=n.__key,o=t.get(l);void 0===o&&eC(33,l);let a=o.klass,u=e.get(a);void 0===u&&(u=new Map,e.set(a,u));let c=u.get(s),d="destroyed"===c&&"created"===i;(void 0===c||d)&&u.set(s,d?"updated":i)}function tp(e,t,r){let n=e.getParent(),i=r,l=e;return null!==n&&(t&&0===r?(i=l.getIndexWithinParent(),l=n):t||r!==l.getChildrenSize()||(i=l.getIndexWithinParent()+1,l=n)),l.getChildAtIndex(t?i-1:i)}function tg(e,t){let r=e.offset;if("element"===e.type)return tp(e.getNode(),t,r);{let n=e.getNode();if(t&&0===r||!t&&r===n.getTextContentSize()){let e=t?n.getPreviousSibling():n.getNextSibling();return null===e?tp(n.getParentOrThrow(),t,n.getIndexWithinParent()+ +!t):e}}return null}function tm(e){let t=tS(e).event,r=t&&t.inputType;return"insertFromPaste"===r||"insertFromPasteAsQuotation"===r}function t_(e){return!nZ(e)&&!e.isLastChild()&&!e.isInline()}function ty(e,t){let r=e._keyToDOMMap.get(t);return void 0===r&&eC(75,t),r}function tb(e){let t=e.assignedSlot||e.parentElement;return tD(t)?t.host:t}function tx(e){return tO(e)&&9===e.nodeType?e:tR(e)?e.ownerDocument:null}function tv(e,t){let r=e.getParent();for(;null!==r;){if(r.is(t))return!0;r=r.getParent()}return!1}function tw(e){let t=tx(e);return t?t.defaultView:null}function tS(e){let t=e._window;return null===t&&eC(78),t}function tE(e){return nZ(e)||nq(e)&&e.isShadowRoot()}function tC(e){let t=nD(),r=e.constructor.getType(),n=t._nodes.get(r);void 0===n&&eC(200,e.constructor.name,r);let{replace:i,replaceWithKlass:l}=n;if(null!==i){let t=i(e),n=t.constructor;return null!==l?t instanceof l||eC(201,l.name,l.getType(),n.name,n.getType(),e.constructor.name,r):t instanceof e.constructor&&n!==e.constructor||eC(202,n.name,n.getType(),e.constructor.name,r),t.__key===e.__key&&eC(203,e.constructor.name,r,n.name,n.getType()),t}return e}function tk(e,t){!nZ(e.getParent())||nq(t)||nY(t)||eC(99)}function tT(e){return(nY(e)||nq(e)&&!e.canBeEmpty())&&!e.isInline()}function tP(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;let n=e.parentElement;null!==n&&n.removeChild(e)}function tN(e){return er?(e||window).getSelection():null}function tR(e){return tO(e)&&1===e.nodeType}function tO(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function tD(e){return tO(e)&&11===e.nodeType}function tA(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function tj(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function tI(e){if(nY(e)&&!e.isInline())return!0;if(!nq(e)||tE(e))return!1;let t=e.getFirstChild(),r=null===t||rB(t)||r2(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&r}function tM(e,t){let r=e;for(;null!==r&&null!==r.getParent()&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}let tL=new WeakMap,tF=new Map;function tB(e){if(!e._readOnly&&e.isEmpty())return tF;e._readOnly||eC(192);let t=tL.get(e);return t||(t=function(e){let t=new Map;for(let[r,n]of e._nodeMap){let e=n.__type,i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(r,n)}return t}(e),tL.set(e,t)),t}function tU(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function tz(e,t){let r=(parseInt(e.style.paddingInlineStart,10)||0)/40;t.setIndent(r)}let tW,tH,tK,tV,t$,tX,tq,tJ,tG,tY,tQ="",tZ="",t0=null,t1="",t2="",t4=!1,t8=!1,t3=null;function t5(e,t){let r=tq.get(e);if(null!==t){let r=ru(e);r.parentNode===t&&t.removeChild(r)}if(tJ.has(e)||tH._keyToDOMMap.delete(e),nq(r)){let e=rs(r,tq);t6(e,0,e.length-1,null)}void 0!==r&&tf(tY,tK,tV,r,"destroyed")}function t6(e,t,r,n){let i=t;for(;i<=r;++i){let t=e[i];void 0!==t&&t5(t,n)}}function t9(e,t){e.setProperty("text-align",t)}function t7(e,t){let r=tW.theme.indent;if("string"==typeof r){let n=e.classList.contains(r);t>0&&!n?e.classList.add(r):t<1&&n&&e.classList.remove(r)}let n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${n})`)}function re(e,t){let r=e.style;0===t?t9(r,""):1===t?t9(r,"left"):2===t?t9(r,"center"):3===t?t9(r,"right"):4===t?t9(r,"justify"):5===t?t9(r,"start"):6===t&&t9(r,"end")}function rt(e,t){let r=tJ.get(e);void 0===r&&eC(60);let n=r.createDOM(tW,tH);if(function(e,t,r){let n=r._keyToDOMMap;t[`__lexicalKey_${r._key}`]=e,n.set(e,t)}(e,n,tH),r2(r)?n.setAttribute("data-lexical-text","true"):nY(r)&&n.setAttribute("data-lexical-decorator","true"),nq(r)){let e=r.__indent,t=r.__size;0!==e&&t7(n,e),0!==t&&function(e,t,r,n){let i=tZ;tZ="",rr(e,r,0,t,r.getDOMSlot(n)),rl(r,n),tZ=i}(rs(r,tJ),t-1,r,n);let i=r.__format;0!==i&&re(n,i),r.isInline()||ri(null,r,n),t_(r)&&(tQ+="\n\n",t2+="\n\n")}else{let t=r.getTextContent();if(nY(r)){let t=r.decorate(tH,tW);null!==t&&ro(e,t),n.contentEditable="false"}else r2(r)&&(r.isDirectionless()||(tZ+=t));tQ+=t,t2+=t}return null!==t&&t.insertChild(n),tf(tY,tK,tV,r,"created"),n}function rr(e,t,r,n,i){let l=tQ;tQ="";let s=r;for(;s<=n;++s){rt(e[s],i);let t=tJ.get(e[s]);null!==t&&r2(t)&&(null===t0&&(t0=t.getFormat()),""===t1&&(t1=t.getStyle()))}t_(t)&&(tQ+="\n\n"),i.element.__lexicalTextContent=tQ,tQ=l+tQ}function rn(e,t){if(e){let r=e.__last;if(r){let e=t.get(r);if(e)return rB(e)?"line-break":nY(e)&&e.isInline()?"decorator":null}return"empty"}return null}function ri(e,t,r){let n=rn(e,tq),i=rn(t,tJ);n!==i&&t.getDOMSlot(r).setManagedLineBreak(i)}function rl(e,t){var r;let n=t.__lexicalDirTextContent||"",i=t.__lexicalDir||"";if(n!==tZ||i!==t3){let n=""===tZ,l=n?t3:(r=tZ,e_.test(r)?"rtl":ey.test(r)?"ltr":null);if(l!==i){let r=t.classList,s=tW.theme,o=null!==i?s[i]:void 0,a=null!==l?s[l]:void 0;if(void 0!==o){if("string"==typeof o){let e=ek(o);o=s[i]=e}r.remove(...o)}if(null===l||n&&"ltr"===l)t.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){let e=ek(a);a=s[l]=e}void 0!==a&&r.add(...a)}t.dir=l}t8||(e.getWritable().__dir=l)}t3=l,t.__lexicalDirTextContent=tZ,t.__lexicalDir=l}}function rs(e,t){let r=[],n=e.__first;for(;null!==n;){let e=t.get(n);void 0===e&&eC(101),r.push(n),n=e.__next}return r}function ro(e,t){let r=tH._pendingDecorators,n=tH._decorators;if(null===r){if(n[e]===t)return;r=e8(tH)}r[e]=t}function ra(e){let t=e.nextSibling;return null!==t&&t===tH._blockCursorElement&&(t=t.nextSibling),t}function ru(e){let t=tG.get(e);return void 0===t&&eC(75,e),t}let rc=Object.freeze({}),rd=[["keydown",function(e,t){if(rh=e.timeStamp,rf=e.key,t.isComposing())return;let{key:r,shiftKey:n,ctrlKey:i,metaKey:l,altKey:s}=e;if(!nz(t,T,e)&&null!=r){if(rv&&tu(rf))return nK(t,()=>{rP(t,rw)}),rv=!1,void(rw="");if(!ta(r)||i||l||s)if(ta(r)&&!s&&!n&&(i||l))nz(t,N,e);else if(!to(r)||i||l||s)if(to(r)&&!s&&!n&&(i||l))nz(t,O,e);else if("ArrowUp"!==r||i||l)if("ArrowDown"!==r||i||l)if("Enter"===r&&n)rb=!0,nz(t,j,e);else if(" "===r)nz(t,I,e);else if(ei&&i&&"o"===r.toLowerCase())e.preventDefault(),rb=!0,nz(t,_,!0);else if("Enter"!==r||n)if(ei?!s&&!l&&(tu(r)||"h"===r.toLowerCase()&&i):!(i||s||l)&&tu(r))tu(r)?nz(t,M,e):(e.preventDefault(),nz(t,m,!0));else if("Escape"===r)nz(t,L,e);else if(ei?!(n||s||l)&&(tc(r)||"d"===r.toLowerCase()&&i):!(i||s||l)&&tc(r))tc(r)?nz(t,F,e):(e.preventDefault(),nz(t,m,!1));else if(tu(r)&&(ei?s:i))e.preventDefault(),nz(t,w,!0);else if(tc(r)&&(ei?s:i))e.preventDefault(),nz(t,w,!1);else if(ei&&l&&tu(r))e.preventDefault(),nz(t,S,!0);else if(ei&&l&&tc(r))e.preventDefault(),nz(t,S,!1);else if("b"===r.toLowerCase()&&!s&&(ei?l:i))e.preventDefault(),nz(t,E,"bold");else if("u"===r.toLowerCase()&&!s&&(ei?l:i))e.preventDefault(),nz(t,E,"underline");else if("i"===r.toLowerCase()&&!s&&(ei?l:i))e.preventDefault(),nz(t,E,"italic");else if("Tab"!==r||s||i||l)if("z"===r.toLowerCase()&&!n&&(ei?l:i))e.preventDefault(),nz(t,C,void 0);else if(ei?"z"===r.toLowerCase()&&l&&n:"y"===r.toLowerCase()&&i||"z"===r.toLowerCase()&&i&&n)e.preventDefault(),nz(t,k,void 0);else{let s=t._editorState._selection;null===s||nt(s)?!el&&td(r,l,i)&&(e.preventDefault(),nz(t,G,e)):!n&&"c"===r.toLowerCase()&&(ei?l:i)?(e.preventDefault(),nz(t,q,e)):!n&&"x"===r.toLowerCase()&&(ei?l:i)?(e.preventDefault(),nz(t,J,e)):td(r,l,i)&&(e.preventDefault(),nz(t,G,e))}else nz(t,B,e);else rb=!1,nz(t,j,e);else nz(t,A,e);else nz(t,D,e);else nz(t,R,e);else nz(t,P,e);(i||n||s||l)&&nz(t,et,e)}}],["pointerdown",function(e,t){let r=e.target,n=e.pointerType;tO(r)&&"touch"!==n&&0===e.button&&nK(t,()=>{nY(e4(r))||(ry=!0)})}],["compositionstart",function(e,t){nK(t,()=>{let r=ng();if(nt(r)&&!t.isComposing()){let n=r.anchor,i=r.anchor.getNode();eQ(n.key),(e.timeStamp<rh+30||"element"===n.type||!r.isCollapsed()||i.getFormat()!==r.format||r2(i)&&i.getStyle()!==r.style)&&nz(t,b,ep)}})}],["compositionend",function(e,t){el?rx=!0:!ea&&(eo||eh)?(rv=!0,rw=e.data):nK(t,()=>{rP(t,e.data)})}],["input",function(e,t){e.stopPropagation(),nK(t,()=>{let r=ng(),n=e.data,i=rT(e);if(null!=n&&nt(r)&&rE(r,i,n,e.timeStamp,!1)){rx&&(rP(t,n),rx=!1);let i=r.anchor.getNode(),l=tN(tS(t));if(null===l)return;let s=r.isBackward(),o=s?r.anchor.offset:r.focus.offset,a=s?r.focus.offset:r.anchor.offset;es&&!r.isCollapsed()&&r2(i)&&null!==l.anchorNode&&i.getTextContent().slice(0,o)+n+i.getTextContent().slice(o+a)===ti(l.anchorNode)||nz(t,b,n);let u=n.length;el&&u>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(r.anchor.offset-=u),eo||ea||eh||!t.isComposing()||(rh=0,eQ(null))}else tl(!1,t,null!==n?n:void 0),rx&&(rP(t,n||void 0),rx=!1);nN(),eD(nD())},{event:e}),rg=null}],["click",function(e,t){nK(t,()=>{let r=ng(),n=tN(tS(t)),i=nm();if(n){if(nt(r)){let t=r.anchor,l=t.getNode();if("element"===t.type&&0===t.offset&&r.isCollapsed()&&!nZ(l)&&1===e5().getChildrenSize()&&l.getTopLevelElementOrThrow().isEmpty()&&null!==i&&r.is(i))n.removeAllRanges(),r.dirty=!0;else if(3===e.detail&&!r.isCollapsed()&&l!==r.focus.getNode()){let e=function(e,t){let r=e;for(;r!==e5()&&null!=r;){if(t(r))return r;r=r.getParent()}return null}(l,e=>nq(e)&&!e.isInline());nq(e)&&e.select(0)}}else if("touch"===e.pointerType){let r=n.anchorNode;(tR(r)||eX(r))&&e9(np(i,n,t,e))}}nz(t,g,e)})}],["cut",rc],["copy",rc],["dragstart",rc],["dragover",rc],["dragend",rc],["paste",rc],["focus",rc],["blur",rc],["drop",rc]];es&&rd.push(["beforeinput",(e,t)=>(function(e,t){let r=e.inputType,n=rT(e);"deleteCompositionText"===r||el&&tm(t)||"insertCompositionText"!==r&&nK(t,()=>{var i;let l=ng();if("deleteContentBackward"===r){if(null===l){let e=nm();if(!nt(e))return;e9(e.clone())}if(nt(l)){let r=l.anchor.key===l.focus.key;if(i=e.timeStamp,"MediaLast"===rf&&i<rh+30&&t.isComposing()&&r){if(eQ(null),rh=0,setTimeout(()=>{nK(t,()=>{eQ(null)})},30),nt(l)){let e=l.anchor.getNode();e.markDirty(),l.format=e.getFormat(),r2(e)||eC(142),l.style=e.getStyle()}}else{eQ(null),e.preventDefault();let n=l.anchor.getNode(),i=n.getTextContent(),s=n.canInsertTextAfter(),o=0===l.anchor.offset&&l.focus.offset===i.length,a=ed&&r&&!o&&s;a&&l.isCollapsed()&&(a=!nY(tg(l.anchor,!0))),a||nz(t,m,!0)}return}}if(!nt(l))return;let s=e.data;null!==rg&&tl(!1,t,rg),l.dirty&&null===rg||!l.isCollapsed()||nZ(l.anchor.getNode())||null===n||l.applyDOMRange(n),rg=null;let o=l.anchor,a=l.focus,u=o.getNode(),c=a.getNode();if("insertText"!==r&&"insertTranspose"!==r)switch(e.preventDefault(),r){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":nz(t,b,e);break;case"insertFromComposition":eQ(null),nz(t,b,e);break;case"insertLineBreak":eQ(null),nz(t,_,!1);break;case"insertParagraph":eQ(null),rb&&!ea?(rb=!1,nz(t,_,!1)):nz(t,y,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":nz(t,x,e);break;case"deleteByComposition":(u!==c||nq(u)||nq(c)||!u.isToken()||!c.isToken())&&nz(t,v,e);break;case"deleteByDrag":case"deleteByCut":nz(t,v,e);break;case"deleteContent":nz(t,m,!1);break;case"deleteWordBackward":nz(t,w,!0);break;case"deleteWordForward":nz(t,w,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":nz(t,S,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":nz(t,S,!1);break;case"formatStrikeThrough":nz(t,E,"strikethrough");break;case"formatBold":nz(t,E,"bold");break;case"formatItalic":nz(t,E,"italic");break;case"formatUnderline":nz(t,E,"underline");break;case"historyUndo":nz(t,C,void 0);break;case"historyRedo":nz(t,k,void 0)}else{if("\n"===s)e.preventDefault(),nz(t,_,!1);else if("\n\n"===s)e.preventDefault(),nz(t,y,void 0);else if(null==s&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),l.insertRawText(t)}else null!=s&&rE(l,n,s,e.timeStamp,!0)?(e.preventDefault(),nz(t,b,s)):rg=s;rp=e.timeStamp}})})(e,t)]);let rh=0,rf=null,rp=0,rg=null,rm=new WeakMap,r_=!1,ry=!1,rb=!1,rx=!1,rv=!1,rw="",rS=[0,"",0,"root",0];function rE(e,t,r,n,i){let l=e.anchor,s=e.focus,o=l.getNode(),a=nD(),u=tN(tS(a)),c=null!==u?u.anchorNode:null,d=l.key,h=a.getElementByKey(d),f=r.length;return d!==s.key||!r2(o)||(!i&&(!es||rp<n+50)||o.isDirty()&&f<2||tt(r))&&l.offset!==s.offset&&!o.isComposing()||e$(o)||o.isDirty()&&f>1||(i||!es)&&null!==h&&!o.isComposing()&&c!==eq(h)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let r=e.anchor.offset,n=t.getParentOrThrow(),i=t.isToken();return 0===r?!t.canInsertTextBefore()||!n.canInsertTextBefore()&&!t.isComposing()||i||function(e){let t=e.getPreviousSibling();return(r2(t)||nq(t)&&t.isInline())&&!t.canInsertTextAfter()}(t):r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()&&!t.isComposing()||i)}(e,o)}function rC(e,t){return eX(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function rk(e,t,r){let{anchorNode:n,anchorOffset:i,focusNode:l,focusOffset:s}=e;r_&&(r_=!1,rC(n,i)&&rC(l,s))||nK(t,()=>{if(!r)return void e9(null);if(!eW(t,n,l))return;let o=ng();if(nt(o)){let r=o.anchor,n=r.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);let i=tS(t).event,l=i?i.timeStamp:performance.now(),[s,a,u,c,d]=rS,h=e5(),f=!1===t.isComposing()&&""===h.getTextContent();if(l<d+200&&r.offset===u&&r.key===c)o.format=s,o.style=a;else if("text"===r.type)r2(n)||eC(141),o.format=n.getFormat(),o.style=n.getStyle();else if("element"===r.type&&!f){nq(n)||eC(259);let e=r.getNode();o.style="",e.isEmpty()?(o.format=e.getTextFormat(),o.style=e.getTextStyle()):o.format=0}}else{let e=r.key,t=o.focus.key,n=o.getNodes(),l=n.length,a=o.isBackward(),u=a?s:i,c=a?i:s,d=a?t:e,h=a?e:t,f=2047,p=!1;for(let e=0;e<l;e++){let t=n[e],r=t.getTextContentSize();if(r2(t)&&0!==r&&(0!==e||t.__key!==d||u!==r)&&(e!==l-1||t.__key!==h||0!==c)&&(p=!0,0==(f&=t.getFormat())))break}o.format=p?f:0}}nz(t,f,void 0)})}function rT(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function rP(e,t){let r=e._compositionKey;if(eQ(null),null!==r&&null!=t){if(""===t){let t=e0(r),n=eq(e.getElementByKey(r));return void(null!==n&&null!==n.nodeValue&&r2(t)&&ts(t,n.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=ng();if(nt(t)){let r=t.focus;return t.anchor.set(r.key,r.offset,r.type),void nz(e,j,null)}}}tl(!0,e,t)}function rN(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let rR=new Map;function rO(e){let t=function(e){let t=tw(e);return t?t.getSelection():null}(e.target);if(null===t)return;let r=eK(t.anchorNode);if(null===r)return;ry&&(ry=!1,nK(r,()=>{let n=nm(),i=t.anchorNode;(tR(i)||eX(i))&&e9(np(n,t,r,e))}));let n=tr(r),i=n[n.length-1],l=i._key,s=rR.get(l),o=s||i;o!==r&&rk(t,o,!1),rk(t,r,!0),r!==i?rR.set(l,r):s&&rR.delete(l)}function rD(e){e._lexicalHandled=!0}function rA(e){return!0===e._lexicalHandled}function rj(e,t,r){nN();let n=e.__key,i=e.getParent();if(null===i)return;let l=function(e){let t=ng();if(!nt(t)||!nq(e))return t;let{anchor:r,focus:n}=t,i=r.getNode(),l=n.getNode();return tv(i,e)&&r.set(e.__key,0,"element"),tv(l,e)&&n.set(e.__key,0,"element"),t}(e),s=!1;if(nt(l)&&t){let t=l.anchor,r=l.focus;t.key===n&&(nb(t,e,i,e.getPreviousSibling(),e.getNextSibling()),s=!0),r.key===n&&(nb(r,e,i,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else nn(l)&&t&&e.isSelected()&&e.selectPrevious();if(nt(l)&&t&&!s){let t=e.getIndexWithinParent();eG(e),n_(l,i,t,-1)}else eG(e);r||tE(i)||i.canBeEmpty()||!i.isEmpty()||rj(i,t),t&&nZ(i)&&i.isEmpty()&&i.selectEnd()}class rI{static getType(){eC(64,this.name)}static clone(e){eC(65,this.name)}afterCloneFrom(e){this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,function(e,t){if(null!=t)return e.__key=t;nN(),nR();let r=nD(),n=nO(),i=""+eB++;n._nodeMap.set(i,e),nq(e)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,e.__key=i}(this,e)}getType(){return this.__type}isInline(){eC(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=e0(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||ng();if(null==t)return!1;let r=t.getNodes().some(e=>e.__key===this.__key);if(r2(this))return r;if(nt(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(nY(this)&&this.isInline()&&e){let r=t.isBackward()?t.focus:t.anchor,n=r.getNode();if(r.offset===n.getChildrenSize()&&n.is(e)&&n.getLastChildOrThrow().is(this))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),r=0;for(;null!==t;){if(this.is(t))return r;r++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:e0(e)}getParentOrThrow(){let e=this.getParent();return null===e&&eC(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(tE(t))return nq(e)||e===this&&nY(e)||eC(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&eC(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:e0(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let r=t.getFirstChild();for(;null!==r&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:e0(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents(),r=e.getParents();nq(this)&&t.unshift(this),nq(e)&&r.unshift(e);let n=t.length,i=r.length;if(0===n||0===i||t[n-1]!==r[i-1])return null;let l=new Set(r);for(let e=0;e<n;e++){let r=t[e];if(l.has(r))return r}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;let t=this.getCommonAncestor(e),r=0,n=0,i=this;for(;;){let e=i.getParentOrThrow();if(e===t){r=i.getIndexWithinParent();break}i=e}for(i=e;;){let e=i.getParentOrThrow();if(e===t){n=i.getIndexWithinParent();break}i=e}return r<n}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;let r=e;for(;null!==r;){if(r.__key===t)return!0;r=r.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),r=[],n=new Set,i=this;for(;null!==i;){let l=i.__key;if(n.has(l)||(n.add(l),r.push(i)),i===e)break;let s=nq(i)?t?i.getFirstChild():i.getLastChild():null;if(null!==s){i=s;continue}let o=t?i.getNextSibling():i.getPreviousSibling();if(null!==o){i=o;continue}let a=i.getParentOrThrow();if(n.has(a.__key)||r.push(a),a===e)break;let u=null,c=a;do{if(null===c&&eC(68),u=t?c.getNextSibling():c.getPreviousSibling(),null===(c=c.getParent()))break;null!==u||n.has(c.__key)||r.push(c)}while(null===u);i=u}return t||r.reverse(),r}isDirty(){let e=nD()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=e0(this.__key);return null===e&&eC(113),e}getWritable(){nN();let e=nO(),t=nD(),r=e._nodeMap,n=this.__key,i=this.getLatest(),l=t._cloneNotNeeded,s=ng();if(null!==s&&s.setCachedNodes(null),l.has(n))return eY(i),i;let o=tU(i);return l.add(n),eY(o),r.set(n,o),o}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){eC(70)}updateDOM(e,t,r){eC(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){return{type:this.__type,version:1}}static importJSON(e){eC(18,this.name)}updateFromJSON(e){return this}static transform(){return null}remove(e){rj(this,!0,e)}replace(e,t){nN();let r=ng();null!==r&&(r=r.clone()),tk(this,e);let n=this.getLatest(),i=this.__key,l=e.__key,s=e.getWritable(),o=this.getParentOrThrow().getWritable(),a=o.__size;eG(s);let u=n.getPreviousSibling(),c=n.getNextSibling(),d=n.__prev,h=n.__next,f=n.__parent;if((rj(n,!1,!0),null===u)?o.__first=l:u.getWritable().__next=l,(s.__prev=d,null===c)?o.__last=l:c.getWritable().__prev=l,s.__next=h,s.__parent=f,o.__size=a,t&&(nq(this)&&nq(s)||eC(139),this.getChildren().forEach(e=>{s.append(e)})),nt(r)){e9(r);let e=r.anchor,t=r.focus;e.key===i&&r7(e,s),t.key===i&&r7(t,s)}return eZ()===i&&eQ(l),s}insertAfter(e,t=!0){nN(),tk(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.getParent(),l=ng(),s=!1,o=!1;if(null!==i){let t=e.getIndexWithinParent();if(eG(n),nt(l)){let e=i.__key,r=l.anchor,n=l.focus;s="element"===r.type&&r.key===e&&r.offset===t+1,o="element"===n.type&&n.key===e&&n.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),c=n.__key,d=r.__next;if(null===a?u.__last=c:a.getWritable().__prev=c,u.__size++,r.__next=c,n.__next=d,n.__prev=r.__key,n.__parent=r.__parent,t&&nt(l)){let e=this.getIndexWithinParent();n_(l,u,e+1);let t=u.__key;s&&l.anchor.set(t,e+2,"element"),o&&l.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){nN(),tk(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.__key;eG(n);let l=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),o=r.__prev,a=this.getIndexWithinParent();null===l?s.__first=i:l.getWritable().__next=i,s.__size++,r.__prev=i,n.__prev=o,n.__next=r.__key,n.__parent=r.__parent;let u=ng();return t&&nt(u)&&n_(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return n5()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){nN();let r=this.getPreviousSibling(),n=this.getParentOrThrow();if(null===r)return n.select(0,0);if(nq(r))return r.select();if(!r2(r)){let e=r.getIndexWithinParent()+1;return n.select(e,e)}return r.select(e,t)}selectNext(e,t){nN();let r=this.getNextSibling(),n=this.getParentOrThrow();if(null===r)return n.select();if(nq(r))return r.select(0,0);if(!r2(r)){let e=r.getIndexWithinParent();return n.select(e,e)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}class rM extends rI{static getType(){return"linebreak"}static clone(e){return new rM(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&tj(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&rU(r)){let r=t.lastChild;if(r===e||r.previousSibling===e&&rU(r))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&tj(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&rU(r))return!1;let n=t.lastChild;if(n===e||n.previousSibling===e&&rU(n))return!0}return!1}(e)?null:{conversion:rL,priority:0}}}static importJSON(e){return rF().updateFromJSON(e)}}function rL(e){return{node:rF()}}function rF(){return tC(new rM)}function rB(e){return e instanceof rM}function rU(e){return eX(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function rz(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function rW(e,t){return 1&t?"strong":2&t?"em":"span"}function rH(e,t,r,n,i){let l=n.classList,s=th(i,"base");void 0!==s&&l.add(...s);let o=!1,a=8&t&&4&t;for(let e in void 0!==(s=th(i,"underlineStrikethrough"))&&(8&r&&4&r?(o=!0,a||l.add(...s)):a&&l.remove(...s)),eb){let n=eb[e];if(void 0!==(s=th(i,e)))if(r&n){if(o&&("underline"===e||"strikethrough"===e)){t&n&&l.remove(...s);continue}t&n&&(!a||"underline"!==e)&&"strikethrough"!==e||l.add(...s)}else t&n&&l.remove(...s)}}function rK(e,t,r){let n=t.firstChild,i=r.isComposing(),l=e+(i?ef:"");if(null==n)t.textContent=l;else{let e=n.nodeValue;if(e!==l)if(i||el){let[t,r,i]=function(e,t){let r=e.length,n=t.length,i=0,l=0;for(;i<r&&i<n&&e[i]===t[i];)i++;for(;l+i<r&&l+i<n&&e[r-l-1]===t[n-l-1];)l++;return[i,r-i-l,t.slice(i,n-l)]}(e,l);0!==r&&n.deleteData(t,r),n.insertData(t,i)}else n.nodeValue=l}}function rV(e,t,r,n,i,l){rK(i,e,t);let s=l.theme.text;void 0!==s&&rH(0,0,n,e,s)}function r$(e,t){let r=document.createElement(t);return r.appendChild(e),r}class rX extends rI{static getType(){return"text"}static clone(e){return new rX(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return eE[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===eZ()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=eb[e];return!!(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return eJ(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){let r=this.__format,n=rz(0,r),i=rW(0,r),l=null===n?i:n,s=document.createElement(l),o=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==n&&(o=document.createElement(i),s.appendChild(o)),rV(o,this,0,r,this.__text,e);let a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,r){let n=this.__text,i=e.__format,l=this.__format,s=rz(0,i),o=rz(0,l),a=rW(0,i),u=rW(0,l);if((null===s?a:s)!==(null===o?u:o))return!0;if(s===o&&a!==u){let e=t.firstChild;null==e&&eC(48);let i=document.createElement(u);return rV(i,this,0,l,n,r),t.replaceChild(i,e),!1}let c=t;null!==o&&null!==s&&null==(c=t.firstChild)&&eC(49),rK(n,c,this);let d=r.theme.text;void 0!==d&&i!==l&&rH(0,i,l,c,d);let h=e.__style,f=this.__style;return h!==f&&(t.style.cssText=f),!1}static importDOM(){return{"#text":()=>({conversion:rY,priority:0}),b:()=>({conversion:rJ,priority:0}),code:()=>({conversion:r0,priority:0}),em:()=>({conversion:r0,priority:0}),i:()=>({conversion:r0,priority:0}),s:()=>({conversion:r0,priority:0}),span:()=>({conversion:rq,priority:0}),strong:()=>({conversion:r0,priority:0}),sub:()=>({conversion:r0,priority:0}),sup:()=>({conversion:r0,priority:0}),u:()=>({conversion:r0,priority:0})}}static importJSON(e){return r1().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return tR(t)||eC(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=r$(t,"b")),this.hasFormat("italic")&&(t=r$(t,"i")),this.hasFormat("strikethrough")&&(t=r$(t,"s")),this.hasFormat("underline")&&(t=r$(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?eb[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?ex[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=eJ(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=eS[e];if(this.__mode===t)return this;let r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){nN();let r=e,n=t,i=ng(),l=this.getTextContent(),s=this.__key;if("string"==typeof l){let e=l.length;void 0===r&&(r=e),void 0===n&&(n=e)}else r=0,n=0;if(!nt(i))return nh(s,r,s,n,"text","text");{let e=eZ();e!==i.anchor.key&&e!==i.focus.key||eQ(s),i.setTextNodeRange(this,r,this,n)}return i}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,n){let i=this.getWritable(),l=i.__text,s=r.length,o=e;o<0&&(o=s+o)<0&&(o=0);let a=ng();if(n&&nt(a)){let t=e+s;a.setTextNodeRange(i,t,i,t)}return i.__text=l.slice(0,o)+r+l.slice(o+t),i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){let t;nN();let r=this.getLatest(),n=r.getTextContent(),i=r.__key,l=eZ(),s=new Set(e),o=[],a=n.length,u="";for(let e=0;e<a;e++)""!==u&&s.has(e)&&(o.push(u),u=""),u+=n[e];""!==u&&o.push(u);let c=o.length;if(0===c)return[];if(o[0]===n)return[r];let d=o[0],h=r.getParent(),f=r.getFormat(),p=r.getStyle(),g=r.__detail,m=!1;r.isSegmented()?((t=r1(d)).__format=f,t.__style=p,t.__detail=g,m=!0):(t=r.getWritable()).__text=d;let _=ng(),y=[t],b=d.length;for(let e=1;e<c;e++){let t=o[e],r=t.length,n=r1(t).getWritable();n.__format=f,n.__style=p,n.__detail=g;let s=n.__key,a=b+r;if(nt(_)){let e=_.anchor,t=_.focus;e.key===i&&"text"===e.type&&e.offset>b&&e.offset<=a&&(e.key=s,e.offset-=b,_.dirty=!0),t.key===i&&"text"===t.type&&t.offset>b&&t.offset<=a&&(t.key=s,t.offset-=b,_.dirty=!0)}l===i&&eQ(s),b=a,y.push(n)}if(null!==h){let e=this.getPreviousSibling(),t=this.getNextSibling();null!==e&&eY(e),null!==t&&eY(t);let r=h.getWritable(),n=this.getIndexWithinParent();m?(r.splice(n,0,y),this.remove()):r.splice(n,1,y),nt(_)&&n_(_,h,n,c-1)}return y}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||eC(50);let r=this.__key,n=e.__key,i=this.__text,l=i.length;eZ()===n&&eQ(r);let s=ng();if(nt(s)){let i=s.anchor,o=s.focus;null!==i&&i.key===n&&nx(i,t,r,e,l),null!==o&&o.key===n&&nx(o,t,r,e,l)}let o=e.__text,a=t?o+i:i+o;this.setTextContent(a);let u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function rq(e){return{forChild:r4(e.style),node:null}}function rJ(e){let t="normal"===e.style.fontWeight;return{forChild:r4(e.style,t?void 0:"bold"),node:null}}let rG=new WeakMap;function rY(e){null===e.parentElement&&eC(129);let t=e.textContent||"";if(null!==function(e){let t,r=e.parentNode,n=[e];for(;null!==r&&void 0===(t=rG.get(r))&&!function(e){if(!tR(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(r);)n.push(r),r=r.parentNode;let i=void 0===t?r:t;for(let e=0;e<n.length;e++)rG.set(n[e],i);return i}(e)){let e=t.split(/(\r?\n|\t)/),r=[],n=e.length;for(let t=0;t<n;t++){let n=e[t];"\n"===n||"\r\n"===n?r.push(rF()):"	"===n?r.push(r3()):""!==n&&r.push(r1(n))}return{node:r}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let r=e,n=!0;for(;null!==r&&null!==(r=rQ(r,!1));){let e=r.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),n=!1;break}}n&&(t=t.slice(1))}if(" "===t[t.length-1]){let r=e,n=!0;for(;null!==r&&null!==(r=rQ(r,!0));)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){n=!1;break}n&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:r1(t)}}function rQ(e,t){let r=e;for(;;){let e;for(;null===(e=t?r.nextSibling:r.previousSibling);){let e=r.parentElement;if(null===e)return null;r=e}if(tR(r=e)){let e=r.style.display;if(""===e&&!tA(r)||""!==e&&!e.startsWith("inline"))return null}let n=r;for(;null!==(n=t?r.firstChild:r.lastChild);)r=n;if(eX(r))return r;if("BR"===r.nodeName)return null}}let rZ={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function r0(e){let t=rZ[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:r4(e.style,t),node:null}}function r1(e=""){return tC(new rX(e))}function r2(e){return e instanceof rX}function r4(e,t){let r=e.fontWeight,n=e.textDecoration.split(" "),i="700"===r||"bold"===r,l=n.includes("line-through"),s="italic"===e.fontStyle,o=n.includes("underline"),a=e.verticalAlign;return e=>(r2(e)&&(i&&!e.hasFormat("bold")&&e.toggleFormat("bold"),l&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),s&&!e.hasFormat("italic")&&e.toggleFormat("italic"),o&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class r8 extends rX{static getType(){return"tab"}static clone(e){return new r8(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),r=th(e.theme,"tab");return void 0!==r&&t.classList.add(...r),t}static importJSON(e){return r3().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&eC(126),super.setTextContent(e)}setDetail(e){return 2!==e&&eC(127),this}setMode(e){return"normal"!==e&&eC(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function r3(){return tC(new r8)}class r5{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),r=e.getNode(),n=this.offset,i=e.offset;if(nq(t)){let e=t.getDescendantByIndex(n);t=null!=e?e:t}if(nq(r)){let e=r.getDescendantByIndex(i);r=null!=e?e:r}return t===r?n<i:t.isBefore(r)}getNode(){let e=e0(this.key);return null===e&&eC(20),e}set(e,t,r,n){let i=this._selection,l=this.key;n&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,nP()||(eZ()===l&&eQ(e),null!==i&&(i.setCachedNodes(null),i.dirty=!0)))}}function r6(e,t,r){return new r5(e,t,r)}function r9(e,t){let r=t.__key,n=e.offset,i="element";if(r2(t)){i="text";let e=t.getTextContentSize();n>e&&(n=e)}else if(!nq(t)){let e=t.getNextSibling();if(r2(e))r=e.__key,n=0,i="text";else{let e=t.getParent();e&&(r=e.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,i)}function r7(e,t){if(nq(t)){let r=t.getLastDescendant();nq(r)||r2(r)?r9(e,r):r9(e,t)}else r9(e,t)}class ne{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!nn(e))return!1;let t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(e=>r.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new ne(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,r=this.getNodes(),n=r.length,i=r[n-1];if(r2(i))t=i.select();else{let e=i.getIndexWithinParent()+1;t=i.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<n;e++)r[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,r=[];for(let e of t){let t=e0(e);null!==t&&r.push(t)}return nP()||(this._cachedNodes=r),r}getTextContent(){let e=this.getNodes(),t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function nt(e){return e instanceof nr}class nr{constructor(e,t,r,n){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=n,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!nt(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e,t=this._cachedNodes;if(null!==t)return t;let r=this.anchor,n=this.focus,i=r.isBefore(n),l=i?r:n,s=i?n:r,o=l.getNode(),a=s.getNode(),u=nq(o)&&l.offset>0&&l.offset>=o.getChildrenSize(),c=l.offset,d=s.offset;if(nq(o)){let e=o.getDescendantByIndex(c);o=null!=e?e:o}if(nq(a)){let e=a.getDescendantByIndex(d);null!==e&&e!==o&&a.getChildAtIndex(d)===e&&(e=e.getPreviousSibling()),a=null!=e?e:a}if(o.is(a))e=nq(o)&&o.getChildrenSize()>0?[]:[o];else if(e=o.getNodesBetween(a),u){let t=e.findIndex(e=>!e.is(o)&&!e.isBefore(o));e.splice(0,t)}return nP()||(this._cachedNodes=e),e}setTextNodeRange(e,t,r,n){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,n,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],r=e[e.length-1],n=this.anchor,i=this.focus,l=n.isBefore(i),[s,o]=nl(this),a="",u=!0;for(let c=0;c<e.length;c++){let d=e[c];if(nq(d)&&!d.isInline())u||(a+="\n"),u=!d.isEmpty();else if(u=!1,r2(d)){let e=d.getTextContent();d===t?d===r?"element"===n.type&&"element"===i.type&&i.offset!==n.offset||(e=s<o?e.slice(s,o):e.slice(o,s)):e=l?e.slice(s):e.slice(o):d===r&&(e=l?e.slice(0,o):e.slice(0,s)),a+=e}else!nY(d)&&!rB(d)||d===r&&this.isCollapsed()||(a+=d.getTextContent())}return a}applyDOMRange(e){let t=nD(),r=t.getEditorState()._selection,n=nc(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(null===n)return;let[i,l]=n;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(l.key,l.offset,l.type,!0),eL(this)}clone(){let e=this.anchor,t=this.focus;return new nr(r6(e.key,e.offset,e.type),r6(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=eJ(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=eb[e];return!!(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),r=[],n=t.length;for(let e=0;e<n;e++){let n=t[e];"\n"===n||"\r\n"===n?r.push(rF()):"	"===n?r.push(r3()):r.push(r1(n))}this.insertNodes(r)}insertText(e){let t=this.anchor,r=this.focus,n=this.format,i=this.style,l=t,s=r;!this.isCollapsed()&&r.isBefore(t)&&(l=r,s=t),"element"===l.type&&function(e,t,r,n){let i=e.getNode(),l=i.getChildAtIndex(e.offset),s=r1(),o=nZ(i)?n5().append(s):s;s.setFormat(r),s.setStyle(n),null===l?i.append(o):l.insertBefore(o),e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(l,s,n,i);let o=l.offset,a=s.offset,u=this.getNodes(),c=u.length,d=u[0];r2(d)||eC(26);let h=d.getTextContent().length,f=d.getParentOrThrow(),p=u[c-1];if(1===c&&"element"===s.type&&(a=h,s.set(l.key,a,"text")),this.isCollapsed()&&o===h&&(d.isSegmented()||d.isToken()||!d.canInsertTextAfter()||!f.canInsertTextAfter()&&null===d.getNextSibling())){let t=d.getNextSibling();if(r2(t)&&t.canInsertTextBefore()&&!e$(t)||((t=r1()).setFormat(n),t.setStyle(i),f.canInsertTextAfter()?d.insertAfter(t):f.insertAfter(t)),t.select(0,0),d=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===o&&(d.isSegmented()||d.isToken()||!d.canInsertTextBefore()||!f.canInsertTextBefore()&&null===d.getPreviousSibling())){let t=d.getPreviousSibling();if(r2(t)&&!e$(t)||((t=r1()).setFormat(n),f.canInsertTextBefore()?d.insertBefore(t):f.insertBefore(t)),t.select(),d=t,""!==e)return void this.insertText(e)}else if(d.isSegmented()&&o!==h){let e=r1(d.getTextContent());e.setFormat(n),d.replace(e),d=e}else if(!this.isCollapsed()&&""!==e){let t=p.getParent();if(!f.canInsertTextBefore()||!f.canInsertTextAfter()||nq(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),nu(this.anchor,this.focus,null),void this.insertText(e)}if(1===c){if(d.isToken()){let t=r1(e);return t.select(),void d.replace(t)}let t=d.getFormat(),r=d.getStyle();if(o!==a||t===n&&r===i){if(d instanceof r8){let t=r1(e);return t.setFormat(n),t.setStyle(i),t.select(),void d.replace(t)}}else{if(""!==d.getTextContent()){let t=r1(e);if(t.setFormat(n),t.setStyle(i),t.select(),0===o)d.insertBefore(t,!1);else{let[e]=d.splitText(o);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}d.setFormat(n),d.setStyle(i)}let l=a-o;""===(d=d.spliceText(o,l,e,!0)).getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=r))}else{let t=new Set([...d.getParentKeys(),...p.getParentKeys()]),r=nq(d)?d:d.getParentOrThrow(),n=nq(p)?p:p.getParentOrThrow(),i=p;if(!r.is(n)&&n.isInline())do i=n,n=n.getParentOrThrow();while(n.isInline());if("text"===s.type&&(0!==a||""===p.getTextContent())||"element"===s.type&&p.getIndexWithinParent()<a)if(r2(p)&&!p.isToken()&&a!==p.getTextContentSize()){if(p.isSegmented()){let e=r1(p.getTextContent());p.replace(e),p=e}nZ(s.getNode())||"text"!==s.type||(p=p.spliceText(0,a,"")),t.add(p.__key)}else{let e=p.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?p.remove():e.remove()}else t.add(p.__key);let l=n.getChildren(),f=new Set(u),g=r.is(n),m=r.isInline()&&null===d.getNextSibling()?r:d;for(let e=l.length-1;e>=0;e--){let t=l[e];if(t.is(d)||nq(t)&&t.isParentOf(d))break;t.isAttached()&&(!f.has(t)||t.is(i)?g||m.insertAfter(t,!1):t.remove())}if(!g){let e=n,r=null;for(;null!==e;){let n=e.getChildren(),i=n.length;(0===i||n[i-1].is(r))&&(t.delete(e.__key),r=e),e=e.getParent()}}if(d.isToken())if(o===h)d.select();else{let t=r1(e);t.select(),d.replace(t)}else""===(d=d.spliceText(o,h-o,e,!0)).getTextContent()?d.remove():d.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<c;e++){let r=u[e],n=r.__key;t.has(n)||r.remove()}}}removeText(){if(this.isCollapsed())return;let{anchor:e,focus:t}=this,r=this.getNodes(),n=this.isBackward()?t:e,i=this.isBackward()?e:t,l=n.getNode(),s=i.getNode(),o=tM(l,tI),a=tM(s,tI);for(let e of(r2(l)&&l.isToken()&&n.offset<l.getTextContentSize()&&n.set(l.getKey(),0,"text"),i.offset>0&&r2(s)&&s.isToken()&&i.set(s.getKey(),s.getTextContentSize(),"text"),r))tv(l,e)||tv(s,e)||e.getKey()===l.getKey()||e.getKey()===s.getKey()||e.remove();let u=(e,t)=>{if(""===e.getTextContent())e.remove();else if(0!==t&&e$(e)){let t=r1(e.getTextContent());return t.setFormat(e.getFormat()),t.setStyle(e.getStyle()),e.replace(t)}};if(l===s&&r2(l)){let r=Math.abs(t.offset-e.offset);return l.spliceText(n.offset,r,"",!0),void u(l,r)}if(r2(l)){let e=l.getTextContentSize()-n.offset;l.spliceText(n.offset,e,""),l=u(l,e)||l}r2(s)&&(s.spliceText(0,i.offset,""),s=u(s,i.offset)||s),l.isAttached()&&r2(l)?l.selectEnd():s.isAttached()&&r2(s)&&s.selectStart(),nq(o)&&nq(a)&&o!==a&&(o.append(...a.getChildren()),a.remove(),i.set(n.key,n.offset,n.type))}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void eQ(null);let r=this.getNodes(),n=[];for(let e of r)r2(e)&&n.push(e);let i=t=>{r.forEach(r=>{if(nq(r)){let n=r.getFormatFlags(e,t);r.setTextFormat(n)}})},l=n.length;if(0===l)return this.toggleFormat(e),eQ(null),void i(t);let s=this.anchor,o=this.focus,a=this.isBackward(),u=a?o:s,c=a?s:o,d=0,h=n[0],f="element"===u.type?0:u.offset;if("text"===u.type&&f===h.getTextContentSize()&&(d=1,h=n[1],f=0),null==h)return;let p=h.getFormatFlags(e,t);i(p);let g=l-1,m=n[g],_="text"===c.type?c.offset:m.getTextContentSize();if(h.is(m)){if(f===_)return;if(e$(h)||0===f&&_===h.getTextContentSize())h.setFormat(p);else{let e=h.splitText(f,_),t=0===f?e[0]:e[1];t.setFormat(p),"text"===u.type&&u.set(t.__key,0,"text"),"text"===c.type&&c.set(t.__key,_-f,"text")}return void(this.format=p)}0===f||e$(h)||([,h]=h.splitText(f),f=0),h.setFormat(p);let y=m.getFormatFlags(e,p);_>0&&(_===m.getTextContentSize()||e$(m)||([m]=m.splitText(_)),m.setFormat(y));for(let t=d+1;t<g;t++){let r=n[t],i=r.getFormatFlags(e,y);r.setFormat(i)}"text"===u.type&&u.set(h.__key,f,"text"),"text"===c.type&&c.set(m.__key,_,"text"),this.format=p|y}insertNodes(e){var t;if(0===e.length)return;if("root"===this.anchor.key){this.insertParagraph();let t=ng();return nt(t)||eC(134),t.insertNodes(e)}let r=(this.isBackward()?this.focus:this.anchor).getNode(),n=tM(r,tI),i=e[e.length-1];if(nq(n)&&"__language"in n){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=nv(this);n.splice(t,0,e),i.selectEnd()}return}if(!e.some(e=>(nq(e)||nY(e))&&!e.isInline())){nq(n)||eC(211,r.constructor.name,r.getType());let t=nv(this);return n.splice(t,0,e),void i.selectEnd()}let l=function(e){let t=n5(),r=null;for(let n=0;n<e.length;n++){let i=e[n],l=rB(i);if(l||nY(i)&&i.isInline()||nq(i)&&i.isInline()||r2(i)||i.isParentRequired()){if(null===r&&(r=i.createParentElementNode(),t.append(r),l))continue;null!==r&&r.append(i)}else t.append(i),r=null}return t}(e),s=l.getLastDescendant(),o=l.getChildren(),a=nq(n)&&n.isEmpty()?null:this.insertParagraph(),u=o[o.length-1],c=o[0];nq(t=c)&&tI(t)&&!t.isEmpty()&&nq(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(nq(n)||eC(211,r.constructor.name,r.getType()),n.append(...c.getChildren()),c=o[1]),c&&(null===n&&eC(212,r.constructor.name,r.getType()),function(e,t,r){let n=t.getParentOrThrow().getLastChild(),i=t,l=[t];for(;i!==n;)i.getNextSibling()||eC(140),l.push(i=i.getNextSibling());let s=e;for(let e of l)s=s.insertAfter(e)}(n,c));let d=tM(s,tI);a&&nq(d)&&(a.canMergeWhenEmpty()||tI(u))&&(d.append(...a.getChildren()),a.remove()),nq(n)&&n.isEmpty()&&n.remove(),s.selectEnd();let h=nq(n)?n.getLastChild():null;rB(h)&&d!==n&&h.remove()}insertParagraph(){if("root"===this.anchor.key){let e=n5();return e5().splice(this.anchor.offset,0,[e]),e.select(),e}let e=nv(this),t=tM(this.anchor.getNode(),tI);nq(t)||eC(213);let r=t.getChildAtIndex(e),n=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...n),i.selectStart(),i):null}insertLineBreak(e){let t=rF();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),r=t.getIndexWithinParent();e.select(r,r)}}extract(){let e=this.getNodes(),t=e.length,r=t-1,n=this.anchor,i=this.focus,l=e[0],s=e[r],[o,a]=nl(this);if(0===t)return[];if(1===t){if(r2(l)&&!this.isCollapsed()){let e=o>a?a:o,t=l.splitText(e,o>a?o:a),r=0===e?t[0]:t[1];return null!=r?[r]:[]}return[l]}let u=n.isBefore(i);if(r2(l)){let t=u?o:a;t===l.getTextContentSize()?e.shift():0!==t&&([,l]=l.splitText(t),e[0]=l)}if(r2(s)){let t=s.getTextContent().length,n=u?a:o;0===n?e.pop():n!==t&&([s]=s.splitText(n),e[r]=s)}return e}modify(e,t,r){var n;let i=this.focus,l=this.anchor,s="move"===e,o=tg(i,t);if(nY(o)&&!o.isIsolated()){if(s&&o.isKeyboardSelectable()){let e=nf();return e.add(o.__key),void e9(e)}let e=t?o.getPreviousSibling():o.getNextSibling();if(r2(e)){let r=e.__key,n=t?e.getTextContent().length:0;return i.set(r,n,"text"),void(s&&l.set(r,n,"text"))}{let r,n,a=o.getParentOrThrow();return nq(e)?(n=e.__key,r=t?e.getChildrenSize():0):(r=o.getIndexWithinParent(),n=a.__key,t||r++),i.set(n,r,"element"),void(s&&l.set(n,r,"element"))}}let a=nD(),u=tN(tS(a));if(!u)return;let c=a._blockCursorElement,d=a._rootElement;if(null===d||null===c||!nq(o)||o.isInline()||o.canBeEmpty()||tP(c,a,d),n=t?"backward":"forward",u.modify(e,n,r),u.rangeCount>0){let e=u.getRangeAt(0),r=this.anchor.getNode(),n=nZ(r)?r:function(e){let t=e.getParentOrThrow();for(;null!==t&&!tE(t);)t=t.getParentOrThrow();return t}(r);if(this.applyDOMRange(e),this.dirty=!0,!s){let r=this.getNodes(),i=[],l=!1;for(let e=0;e<r.length;e++){let t=r[e];tv(t,n)?i.push(t):l=!0}if(l&&i.length>0)if(t){let e=i[0];nq(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=i[i.length-1];nq(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}u.anchorNode===e.startContainer&&u.anchorOffset===e.startOffset||function(e){let t=e.focus,r=e.anchor,n=r.key,i=r.offset,l=r.type;r.set(t.key,t.offset,t.type,!0),t.set(n,i,l,!0)}(this)}}}forwardDeletion(e,t,r){if(!r&&("element"===e.type&&nq(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),r=t.getNextSibling()||(null===e?null:e.getNextSibling());if(nq(r)&&r.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;let n=this.focus,i=tg(n,e);if(nY(i)&&!i.isIsolated()){if(i.isKeyboardSelectable()&&nq(r)&&0===r.getChildrenSize()){r.remove();let e=nf();e.add(i.__key),e9(e)}else i.remove(),nD().dispatchCommand(f,void 0);return}if(!e&&nq(i)&&nq(r)&&r.isEmpty())return r.remove(),void i.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{let i="text"===n.type?n.getNode():null;if(r="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){let t=n.offset,l=i.getTextContentSize();if(i.is(r)||e&&t!==l||!e&&0!==t)return void ns(i,e,t)}else if(null!==r&&r.isSegmented()){let n=t.offset,l=r.getTextContentSize();if(r.is(i)||e&&0!==n||!e&&n!==l)return void ns(r,e,n)}!function(e,t){let r=e.anchor,n=e.focus,i=r.getNode();if(i===n.getNode()&&"text"===r.type&&"text"===n.type){let e=r.offset,l=n.offset,s=e<l,o=s?e:l,a=s?l:e,u=a-1;o!==u&&(tt(i.getTextContent().slice(o,a))||(t?n.set(n.key,u,n.type):r.set(r.key,u,r.type)))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&nZ(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this)}}deleteLine(e){if(this.isCollapsed()){let t="element"===this.anchor.type;if(t&&this.insertText(" "),this.modify("extend",e,"lineboundary"),this.isCollapsed()&&0===this.anchor.offset&&this.modify("extend",e,"character"),t){let t=e?this.anchor:this.focus;t.set(t.key,t.offset+1,t.type)}}this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function nn(e){return e instanceof ne}function ni(e){let t=e.offset;if("text"===e.type)return t;let r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function nl(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[r,n]=t;return"element"===r.type&&"element"===n.type&&r.key===n.key&&r.offset===n.offset?[0,0]:[ni(r),ni(n)]}function ns(e,t,r){let n=e.getTextContent().split(/(?=\s)/g),i=n.length,l=0,s=0;for(let e=0;e<i;e++){let o=e===i-1;if(s=l,l+=n[e].length,t&&l===r||l>r||o){n.splice(e,1),o&&(s=void 0);break}}let o=n.join("").trim();""===o?e.remove():(e.setTextContent(o),e.select(s,s))}function no(e,t,r,n){let i,l=t;if(tR(e)){let s=!1,o=e.childNodes,a=o.length,u=n._blockCursorElement;l===a&&(s=!0,l=a-1);let c=o[l],d=!1;if(c===u)c=o[l+1],d=!0;else if(null!==u){let r=u.parentNode;e===r&&t>Array.prototype.indexOf.call(r.children,u)&&l--}if(r2(i=e7(c)))l=te(i,s);else{let o=e7(e);if(null===o)return null;if(nq(o)){let a=n.getElementByKey(o.getKey());null===a&&eC(214);let u=o.getDOMSlot(a);[o,l]=u.resolveChildIndex(o,a,e,t),nq(o)||eC(215),s&&l>=o.getChildrenSize()&&(l=Math.max(0,o.getChildrenSize()-1));let c=o.getChildAtIndex(l);if(nq(c)&&function(e,t,r){let n=e.getParent();return null===r||null===n||!n.canBeEmpty()||n!==r.getNode()}(c,0,r)){let e=s?c.getLastDescendant():c.getFirstDescendant();o=null===e||nq(c=e)?c:c.getParentOrThrow(),l=0}r2(c)?(i=c,o=null,l=te(c,s)):c!==o&&s&&!d&&(nq(o)||eC(216),l=Math.min(o.getChildrenSize(),l+1))}else{let r=o.getIndexWithinParent();l=0===t&&nY(o)&&e7(e)===o?r:r+1,o=o.getParentOrThrow()}if(nq(o))return r6(o.__key,l,"element")}}else i=e7(e);return r2(i)?r6(i.__key,l,"text"):null}function na(e,t,r){let n=e.offset,i=e.getNode();if(0===n){let n=i.getPreviousSibling(),l=i.getParent();if(t){if((r||!t)&&null===n&&nq(l)&&l.isInline()){let t=l.getPreviousSibling();r2(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else nq(n)&&!r&&n.isInline()?e.set(n.__key,n.getChildrenSize(),"element"):r2(n)&&e.set(n.__key,n.getTextContent().length,"text")}else if(n===i.getTextContent().length){let n=i.getNextSibling(),l=i.getParent();if(t&&nq(n)&&n.isInline())e.set(n.__key,0,"element");else if((r||t)&&null===n&&nq(l)&&l.isInline()&&!l.canInsertTextAfter()){let t=l.getNextSibling();r2(t)&&e.set(t.__key,0,"text")}}}function nu(e,t,r){if("text"===e.type&&"text"===t.type){let n=e.isBefore(t),i=e.is(t);na(e,n,i),na(t,!n,i),i&&t.set(e.key,e.offset,e.type);let l=nD();if(l.isComposing()&&l._compositionKey!==e.key&&nt(r)){let n=r.anchor,i=r.focus;e.set(n.key,n.offset,n.type,!0),t.set(i.key,i.offset,i.type,!0)}}}function nc(e,t,r,n,i,l){if(null===e||null===r||!eW(i,e,r))return null;let s=no(e,t,nt(l)?l.anchor:null,i);if(null===s)return null;let o=no(r,n,nt(l)?l.focus:null,i);if(null===o)return null;if("element"===s.type&&"element"===o.type){let t=e7(e),n=e7(r);if(nY(t)&&nY(n))return null}return nu(s,o,l),[s,o]}function nd(e){return nq(e)&&!e.isInline()}function nh(e,t,r,n,i,l){let s=nO(),o=new nr(r6(e,t,i),r6(r,n,l),0,"");return o.dirty=!0,s._selection=o,o}function nf(){return new ne(new Set)}function np(e,t,r,n){let i,l,s,o,a=r._window;if(null===a)return null;let u=n||a.event,c=u?u.type:void 0,d="selectionchange"===c,h=!eT&&(d||"beforeinput"===c||"compositionstart"===c||"compositionend"===c||"click"===c&&u&&3===u.detail||"drop"===c||void 0===c);if(nt(e)&&!h)return e.clone();if(null===t)return null;if(i=t.anchorNode,l=t.focusNode,s=t.anchorOffset,o=t.focusOffset,d&&nt(e)&&!eW(r,i,l))return e.clone();let f=nc(i,s,l,o,r,e);if(null===f)return null;let[p,g]=f;return new nr(p,g,nt(e)?e.format:0,nt(e)?e.style:"")}function ng(){return nO()._selection}function nm(){return nD()._editorState._selection}function n_(e,t,r,n=1){let i=e.anchor,l=e.focus,s=i.getNode(),o=l.getNode();if(!t.is(s)&&!t.is(o))return;let a=t.__key;if(e.isCollapsed()){let t=i.offset;if(r<=t&&n>0||r<t&&n<0){let r=Math.max(0,t+n);i.set(a,r,"element"),l.set(a,r,"element"),ny(e)}}else{let s=e.isBackward(),o=s?l:i,u=o.getNode(),c=s?i:l,d=c.getNode();if(t.is(u)){let e=o.offset;(r<=e&&n>0||r<e&&n<0)&&o.set(a,Math.max(0,e+n),"element")}if(t.is(d)){let e=c.offset;(r<=e&&n>0||r<e&&n<0)&&c.set(a,Math.max(0,e+n),"element")}}ny(e)}function ny(e){let t=e.anchor,r=t.offset,n=e.focus,i=n.offset,l=t.getNode(),s=n.getNode();if(e.isCollapsed()){if(!nq(l))return;let e=l.getChildrenSize(),i=r>=e,s=i?l.getChildAtIndex(e-1):l.getChildAtIndex(r);if(r2(s)){let e=0;i&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),n.set(s.__key,e,"text")}}else{if(nq(l)){let e=l.getChildrenSize(),n=r>=e,i=n?l.getChildAtIndex(e-1):l.getChildAtIndex(r);if(r2(i)){let e=0;n&&(e=i.getTextContentSize()),t.set(i.__key,e,"text")}}if(nq(s)){let e=s.getChildrenSize(),t=i>=e,r=t?s.getChildAtIndex(e-1):s.getChildAtIndex(i);if(r2(r)){let e=0;t&&(e=r.getTextContentSize()),n.set(r.__key,e,"text")}}}}function nb(e,t,r,n,i){let l=null,s=0,o=null;null!==n?(l=n.__key,r2(n)?(s=n.getTextContentSize(),o="text"):nq(n)&&(s=n.getChildrenSize(),o="element")):null!==i&&(l=i.__key,r2(i)?o="text":nq(i)&&(o="element")),null!==l&&null!==o?e.set(l,s,o):(-1===(s=t.getIndexWithinParent())&&(s=r.getChildrenSize()),e.set(r.__key,s,"element"))}function nx(e,t,r,n,i){"text"===e.type?e.set(r,e.offset+(t?0:i),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function nv(e){let t=e;e.isCollapsed()||t.removeText();let r=ng();nt(r)&&(t=r),nt(t)||eC(161);let n=t.anchor,i=n.getNode(),l=n.offset;for(;!tI(i);){let e=i;if([i,l]=function(e,t){let r=e.getParent();if(!r){let e=n5();return e5().append(e),e.select(),[e5(),0]}if(r2(e)){let n=e.splitText(t);if(0===n.length)return[r,e.getIndexWithinParent()];let i=+(0!==t);return[r,n[0].getIndexWithinParent()+i]}if(!nq(e)||0===t)return[r,e.getIndexWithinParent()];let n=e.getChildAtIndex(t);if(n){let r=new nr(r6(e.__key,t,"element"),r6(e.__key,t,"element"),0,""),i=e.insertNewAfter(r);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}(i,l),e.is(i))break}return l}let nw=null,nS=null,nE=!1,nC=!1,nk=0,nT={characterData:!0,childList:!0,subtree:!0};function nP(){return nE||null!==nw&&nw._readOnly}function nN(){nE&&eC(13)}function nR(){nk>99&&eC(14)}function nO(){return null===nw&&eC(195,nA()),nw}function nD(){return null===nS&&eC(196,nA()),nS}function nA(){let e=0,t=new Set,r=n7.version;if("undefined"!=typeof window)for(let n of document.querySelectorAll("[contenteditable]")){let i=eV(n);if(eH(i))e++;else if(i){let e=String(i.constructor.version||"<0.17.1");e===r&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function nj(e,t,r){let n=t.__type,i=function(e,t){let r=e._nodes.get(t);return void 0===r&&eC(30,t),r}(e,n),l=r.get(n);void 0===l&&(l=Array.from(i.transforms),r.set(n,l));let s=l.length;for(let e=0;e<s&&(l[e](t),t.isAttached());e++);}function nI(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function nM(e,t){if(!t)return;let r=e._updateTags,n=t;for(let e of(Array.isArray(t)||(n=[t]),n))r.add(e)}function nL(e,t){let r=e.type,n=t.get(r);void 0===n&&eC(17,r);let i=n.klass;e.type!==i.getType()&&eC(18,i.name);let l=i.importJSON(e),s=e.children;if(nq(l)&&Array.isArray(s))for(let e=0;e<s.length;e++){let r=nL(s[e],t);l.append(r)}return l}function nF(e,t,r){let n=nw,i=nE,l=nS;nw=t,nE=!0,nS=e;try{return r()}finally{nw=n,nE=i,nS=l}}function nB(e,t){let r=e._pendingEditorState,n=e._rootElement,i=e._headless||null===n;if(null===r)return;let l=e._editorState,s=l._selection,o=r._selection,a=0!==e._dirtyType,u=nw,c=nE,d=nS,h=e._updating,p=e._observer,g=null;if(e._pendingEditorState=null,e._editorState=r,!i&&a&&null!==p){nS=e,nw=r,nE=!1,e._updating=!0;try{let t=e._dirtyType,n=e._dirtyElements,i=e._dirtyLeaves;p.disconnect(),g=function(e,t,r,n,i,l){tQ="",t2="",tZ="",t4=2===n,t3=null,tH=r,tW=r._config,tK=r._nodes,tV=tH._listeners.mutation,t$=i,tX=l,tq=e._nodeMap,tJ=t._nodeMap,t8=t._readOnly,tG=new Map(r._keyToDOMMap);let s=new Map;return tY=s,function e(t,r){let n=tq.get(t),i=tJ.get(t);void 0!==n&&void 0!==i||eC(61);let l=t4||tX.has(t)||t$.has(t),s=ty(tH,t);if(n===i&&!l){if(nq(n)){let e=s.__lexicalTextContent;void 0!==e&&(tQ+=e,t2+=e);let t=s.__lexicalDirTextContent;void 0!==t&&(tZ+=t)}else{let e=n.getTextContent();r2(n)&&!n.isDirectionless()&&(tZ+=e),t2+=e,tQ+=e}return s}if(n!==i&&l&&tf(tY,tK,tV,i,"updated"),i.updateDOM(n,s,tW)){let e=rt(t,null);return null===r&&eC(62),r.replaceChild(e,s),t5(t,null),e}if(nq(n)&&nq(i)){let t=i.__indent;t!==n.__indent&&t7(s,t);let r=i.__format;r!==n.__format&&re(s,r),l&&(function(t,r,n){let i=tZ;tZ="",t0=null,t1="",function(t,r,n){let i=tQ,l=t.__size,s=r.__size;tQ="";let o=n.element;if(1===l&&1===s){let n=t.__first,i=r.__first;if(n===i)e(n,o);else{let e=ru(n),t=rt(i,null);try{o.replaceChild(t,e)}catch(r){if("object"==typeof r&&null!=r)throw Error(`${r.toString()} Parent: ${o.tagName}, new child: {tag: ${t.tagName} key: ${i}}, old child: {tag: ${e.tagName}, key: ${n}}.`);throw r}t5(n,null)}let l=tJ.get(i);r2(l)&&(null===t0&&(t0=l.getFormat()),""===t1&&(t1=l.getStyle()))}else{let i=rs(t,tq),a=rs(r,tJ);if(i.length!==l&&eC(227),a.length!==s&&eC(228),0===l)0!==s&&rr(a,r,0,s-1,n);else if(0===s){if(0!==l){let e=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;t6(i,0,l-1,e?null:o),e&&(o.textContent="")}}else!function(t,r,n,i,l,s){let o=i-1,a=l-1,u,c,d=s.getFirstChild(),h=0,f=0;for(;h<=o&&f<=a;){let t=r[h],i=n[f];if(t===i)d=ra(e(i,s.element)),h++,f++;else{void 0===u&&(u=new Set(r)),void 0===c&&(c=new Set(n));let l=c.has(t),o=u.has(i);if(l)if(o){let t=ty(tH,i);t===d?d=ra(e(i,s.element)):(s.withBefore(d).insertChild(t),e(i,s.element)),h++,f++}else rt(i,s.withBefore(d)),f++;else d=ra(ru(t)),t5(t,s.element),h++}let l=tJ.get(i);null!==l&&r2(l)&&(null===t0&&(t0=l.getFormat()),""===t1&&(t1=l.getStyle()))}let p=h>o,g=f>a;if(p&&!g){let e=n[a+1],r=void 0===e?null:tH.getElementByKey(e);rr(n,t,f,a,s.withBefore(r))}else g&&!p&&t6(r,h,o,s.element)}(r,i,a,l,s,n)}t_(r)&&(tQ+="\n\n"),o.__lexicalTextContent=tQ,tQ=i+tQ}(t,r,r.getDOMSlot(n)),rl(r,n),null==t0||t0===r.__textFormat||t8||(r.setTextFormat(t0),r.setTextStyle(t1)),""===t1||t1===r.__textStyle||t8||r.setTextStyle(t1),tZ=i}(n,i,s),nZ(i)||i.isInline()||ri(n,i,s)),t_(i)&&(tQ+="\n\n",t2+="\n\n")}else{let e=i.getTextContent();if(nY(i)){let e=i.decorate(tH,tW);null!==e&&ro(t,e)}else r2(i)&&!i.isDirectionless()&&(tZ+=e);tQ+=e,t2+=e}if(!t8&&nZ(i)&&i.__cachedText!==t2){let e=i.getWritable();e.__cachedText=t2,i=e}return s}("root",null),tH=void 0,tK=void 0,t$=void 0,tX=void 0,tq=void 0,tJ=void 0,tW=void 0,tG=void 0,tY=void 0,s}(l,r,e,t,n,i)}catch(t){if(t instanceof Error&&e._onError(t),nC)throw t;return n6(e,null,n,r),eA(e),e._dirtyType=2,nC=!0,nB(e,l),void(nC=!1)}finally{p.observe(n,nT),e._updating=h,nw=u,nE=c,nS=d}}r._readOnly||(r._readOnly=!0);let m=e._dirtyLeaves,_=e._dirtyElements,y=e._normalizedNodes,b=e._updateTags,x=e._deferred;a&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let r,n=e._decorators,i=e._pendingDecorators||n,l=t._nodeMap;for(r in i)l.has(r)||(i===n&&(i=e8(e)),delete i[r])}(e,r);let v=i?null:tN(tS(e));if(e._editable&&null!==v&&(a||null===o||o.dirty)&&null!==n&&!b.has("skip-dom-selection")){nS=e,nw=r;try{if(null!==p&&p.disconnect(),a||null===o||o.dirty){let t=e._blockCursorElement;null!==t&&tP(t,e,n),function(e,t,r,n,i,l,s){let o=n.anchorNode,a=n.focusNode,u=n.anchorOffset,c=n.focusOffset,d=document.activeElement;if(i.has("collaboration")&&d!==l||null!==d&&ez(d))return;if(!nt(t))return null!==e&&eW(r,o,a)&&n.removeAllRanges();let h=t.anchor,f=t.focus,p=h.key,g=f.key,m=ty(r,p),_=ty(r,g),y=h.offset,b=f.offset,x=t.format,v=t.style,w=t.isCollapsed(),S=m,E=_,C=!1;if("text"===h.type){S=eq(m);let e=h.getNode();C=e.getFormat()!==x||e.getStyle()!==v}else nt(e)&&"text"===e.anchor.type&&(C=!0);if("text"===f.type&&(E=eq(_)),null!==S&&null!==E&&(w&&(null===e||C||nt(e)&&(e.format!==x||e.style!==v))&&(rS=[x,v,y,p,performance.now()]),u!==y||c!==b||o!==S||a!==E||"Range"===n.type&&w||(null!==d&&l.contains(d)||l.focus({preventScroll:!0}),"element"===h.type))){try{n.setBaseAndExtent(S,y,E,b),ed&&setTimeout(()=>{n.setBaseAndExtent(S,y,E,b)})}catch(e){}if(!i.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==l&&l===document.activeElement){let e=nt(t)&&"element"===t.anchor.type?S.childNodes[y]||null:n.rangeCount>0?n.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let r=document.createRange();r.selectNode(e),t=r.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,r){let n=tx(r),i=tw(n);if(null===n||null===i)return;let{top:l,bottom:s}=t,o=0,a=0,u=r;for(;null!==u;){let t=u===n.body;if(t)o=0,a=tS(e).innerHeight;else{let e=u.getBoundingClientRect();o=e.top,a=e.bottom}let r=0;if(l<o?r=-(o-l):s>a&&(r=s-a),0!==r)if(t)i.scrollBy(0,r);else{let e=u.scrollTop;u.scrollTop+=r;let t=u.scrollTop-e;l-=t,s-=t}if(t)break;u=tb(u)}}(r,t,l)}}r_=!0}}(s,o,e,v,b,n)}!function(e,t,r){let n=e._blockCursorElement;if(nt(r)&&r.isCollapsed()&&"element"===r.anchor.type&&t.contains(document.activeElement)){let i=r.anchor,l=i.getNode(),s=i.offset,o=!1,a=null;if(s===l.getChildrenSize())tT(l.getChildAtIndex(s-1))&&(o=!0);else{let t=l.getChildAtIndex(s);if(null!==t&&tT(t)){let r=t.getPreviousSibling();(null===r||tT(r))&&(o=!0,a=e.getElementByKey(t.__key))}}if(o){let r=e.getElementByKey(l.__key);return null===n&&(e._blockCursorElement=n=function(e){let t=e.theme,r=document.createElement("div");r.contentEditable="false",r.setAttribute("data-lexical-cursor","true");let n=t.blockCursor;return void 0!==n&&("string"==typeof n&&(n=t.blockCursor=ek(n)),void 0!==n&&r.classList.add(...n)),r}(e._config)),t.style.caretColor="transparent",null===a?r.appendChild(n):r.insertBefore(n,a)}}null!==n&&tP(n,e,t)}(e,n,o)}finally{null!==p&&p.observe(n,nT),nS=d,nw=u}}null!==g&&function(e,t,r,n,i){let l=Array.from(e._listeners.mutation),s=l.length;for(let e=0;e<s;e++){let[s,o]=l[e],a=t.get(o);void 0!==a&&s(a,{dirtyLeaves:n,prevEditorState:i,updateTags:r})}}(e,g,b,m,l),nt(o)||null===o||null!==s&&s.is(o)||e.dispatchCommand(f,void 0);let w=e._pendingDecorators;null!==w&&(e._decorators=w,e._pendingDecorators=null,nU("decorator",e,!0,w)),function(e,t,r){let n=e3(t),i=e3(r);n!==i&&nU("textcontent",e,!0,i)}(e,t||l,r),nU("update",e,!0,{dirtyElements:_,dirtyLeaves:m,editorState:r,normalizedNodes:y,prevEditorState:t||l,tags:b}),function(e,t){if(e._deferred=[],0!==t.length){let r=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=r}}}(e,x),function(e){let t=e._updates;if(0!==t.length){let r=t.shift();if(r){let[t,n]=r;nH(e,t,n)}}}(e)}function nU(e,t,r,...n){let i=t._updating;t._updating=r;try{let r=Array.from(t._listeners[e]);for(let e=0;e<r.length;e++)r[e].apply(null,n)}finally{t._updating=i}}function nz(e,t,r){if(!1===e._updating||nS!==e){let n=!1;return e.update(()=>{n=nz(e,t,r)}),n}let n=tr(e);for(let i=4;i>=0;i--)for(let l=0;l<n.length;l++){let s=n[l]._commands.get(t);if(void 0!==s){let t=s[i];if(void 0!==t){let n=Array.from(t),i=n.length;for(let t=0;t<i;t++)if(!0===n[t](r,e))return!0}}}return!1}function nW(e,t){let r=e._updates,n=t||!1;for(;0!==r.length;){let t=r.shift();if(t){let r,[i,l]=t;if(void 0!==l){if(r=l.onUpdate,l.skipTransforms&&(n=!0),l.discrete){let t=e._pendingEditorState;null===t&&eC(191),t._flushSync=!0}r&&e._deferred.push(r),nM(e,l.tag)}i()}}return n}function nH(e,t,r){let n=e._updateTags,i,l=!1,s=!1;void 0!==r&&(i=r.onUpdate,nM(e,r.tag),l=r.skipTransforms||!1,s=r.discrete||!1),i&&e._deferred.push(i);let o=e._editorState,a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=n0(a||o),u=!0),a._flushSync=s;let c=nw,d=nE,h=nS,f=e._updating;nw=a,nE=!1,e._updating=!0,nS=e;let p=e._headless||null===e.getRootElement();try{u&&(p?null!==o._selection&&(a._selection=o._selection.clone()):a._selection=function(e,t){let r=e.getEditorState()._selection,n=tN(tS(e));return nt(r)||null==r?np(r,n,e,t):r.clone()}(e,r&&r.event||null));let n=e._compositionKey;t(),l=nW(e,l),function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(nt(n)){let e,t=n.anchor,i=n.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(r,n),"text"===i.type){let t=i.getNode();e!==t&&t.selectionTransform(r,n)}}}(a,e),0!==e._dirtyType&&(l?function(e,t){let r=t._dirtyLeaves,n=e._nodeMap;for(let e of r){let t=n.get(e);r2(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&eM(t)}}(a,e):function(e,t){let r=t._dirtyLeaves,n=t._dirtyElements,i=e._nodeMap,l=eZ(),s=new Map,o=r,a=o.size,u=n,c=u.size;for(;a>0||c>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,o)){let n=i.get(e);r2(n)&&n.isAttached()&&n.isSimpleText()&&!n.isUnmergeable()&&eM(n),void 0!==n&&nI(n,l)&&nj(t,n,s),r.add(e)}if((a=(o=t._dirtyLeaves).size)>0){nk++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u)){let r=e[0],o=e[1];if("root"!==r&&!o)continue;let a=i.get(r);void 0!==a&&nI(a,l)&&nj(t,a,s),n.set(r,o)}a=(o=t._dirtyLeaves).size,c=(u=t._dirtyElements).size,nk++}t._dirtyLeaves=r,t._dirtyElements=n}(a,e),nW(e),function(e,t,r,n){let i=e._nodeMap,l=t._nodeMap,s=[];for(let[e]of n){let t=l.get(e);void 0!==t&&(t.isAttached()||(nq(t)&&function e(t,r,n,i,l,s){let o=t.getFirstChild();for(;null!==o;){let t=o.__key;o.__parent===r&&(nq(o)&&e(o,t,n,i,l,s),n.has(t)||s.delete(t),l.push(t)),o=o.getNextSibling()}}(t,e,i,l,s,n),i.has(e)||n.delete(e),s.push(e)))}for(let e of s)l.delete(e);for(let e of r){let t=l.get(e);void 0===t||t.isAttached()||(i.has(e)||r.delete(e),l.delete(e))}}(o,a,e._dirtyLeaves,e._dirtyElements)),n!==e._compositionKey&&(a._flushSync=!0);let i=a._selection;if(nt(i)){let e=a._nodeMap,t=i.anchor.key,r=i.focus.key;void 0!==e.get(t)&&void 0!==e.get(r)||eC(19)}else nn(i)&&0===i._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=o,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void nB(e)}finally{nw=c,nE=d,nS=h,e._updating=f,nk=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(null!==n){if(n.dirty||!n.is(r))return!0}else if(null!==r)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,nB(e)):u&&eU(()=>{nB(e)}):(a._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function nK(e,t,r){e._updating?nS===e?t():e._updates.push([t,r]):nH(e,t,r)}class nV{constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new nV(this.element,e,this.after)}withAfter(e){return new nV(this.element,this.before,e)}withElement(e){return new nV(e,this.before,this.after)}insertChild(e){let t=this.before||this.getManagedLineBreak();return null!==t&&t.parentElement!==this.element&&eC(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&eC(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&eC(224),this.element.replaceChild(e,t),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(ea||eo))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,r="IMG"===e.nodeName?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let r=this.element,n=this.before,i=document.createElement("br");if(r.insertBefore(i,n),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",r.insertBefore(e,i),r.__lexicalLineBreak=e}else r.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,n){if(r===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,n))]}let i=n$(t,r);i.push(n);let l=n$(t,this.element),s=e.getIndexWithinParent();for(let e=0;e<l.length;e++){let t=i[e],r=l[e];if(void 0===t||t<r)break;if(t>r){s+=1;break}}return[e.getParentOrThrow(),s]}}function n$(e,t){let r=[],n=t;for(;n!==e&&null!==n;n=t.parentNode){let e=0;for(let t=n.previousSibling;null!==t;t=n.previousSibling)e++;r.push(e)}return n!==e&&eC(225),r.reverse()}class nX extends rI{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__first=e.__first,this.__last=e.__last,this.__size=e.__size,this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return ew[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=nD()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(r2(t)&&e.push(t),nq(t)){let r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;nq(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;nq(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),r=t.length;if(e>=r){let e=t[r-1];return nq(e)&&e.getLastDescendant()||e||null}let n=t[e];return nq(n)&&n.getFirstDescendant()||n||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:e0(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&eC(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:e0(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&eC(96,this.__key),e}getChildAtIndex(e){let t,r,n=this.getChildrenSize();if(e<n/2){for(t=this.getFirstChild(),r=0;null!==t&&r<=e;){if(r===e)return t;t=t.getNextSibling(),r++}return null}for(t=this.getLastChild(),r=n-1;null!==t&&r>=e;){if(r===e)return t;t=t.getPreviousSibling(),r--}return null}getTextContent(){let e="",t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContent(),nq(i)&&n!==r-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContentSize(),nq(i)&&n!==r-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=ev[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){let t=eb[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return eJ(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){nN();let r=ng(),n=e,i=t,l=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(r2(e)||nq(e))return e.select(0,0)}else if((void 0===e||e===l)&&(void 0===t||t===l)){let e=this.getLastChild();if(r2(e)||nq(e))return e.select()}}void 0===n&&(n=l),void 0===i&&(i=l);let s=this.__key;return nt(r)?(r.anchor.set(s,n,"element"),r.focus.set(s,i,"element"),r.dirty=!0,r):nh(s,n,s,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?ev[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){let n=r.length,i=this.getChildrenSize(),l=this.getWritable();e+t<=i||eC(226,String(e),String(t),String(i));let s=l.__key,o=[],a=[],u=this.getChildAtIndex(e+t),c=null,d=i-t+n;if(0!==e)if(e===i)c=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(c=t.getPreviousSibling())}if(t>0){let e=null===c?this.getFirstChild():c.getNextSibling();for(let r=0;r<t;r++){null===e&&eC(100);let t=e.getNextSibling(),r=e.__key;eG(e.getWritable()),a.push(r),e=t}}let h=c;for(let e=0;e<n;e++){let t=r[e];null!==h&&t.is(h)&&(c=h=h.getPreviousSibling());let n=t.getWritable();n.__parent===s&&d--,eG(n);let i=t.__key;if(null===h)l.__first=i,n.__prev=null;else{let e=h.getWritable();e.__next=i,n.__prev=e.__key}t.__key===s&&eC(76),n.__parent=s,o.push(i),h=t}if(e+t===i)null!==h&&(h.getWritable().__next=null,l.__last=h.__key);else if(null!==u){let e=u.getWritable();if(null!==h){let t=h.getWritable();e.__prev=h.__key,t.__next=u.__key}else e.__prev=null}if(l.__size=d,a.length){let e=ng();if(nt(e)){let t=new Set(a),r=new Set(o),{anchor:n,focus:i}=e;nJ(n,t,r)&&nb(n,n.getNode(),this,c,u),nJ(i,t,r)&&nb(i,i.getNode(),this,c,u),0!==d||this.canBeEmpty()||tE(this)||this.remove()}}return l}getDOMSlot(e){return new nV(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(tR(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px")}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return 0!==t&&(e.textFormat=t),""!==r&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let r=this.getDOMSlot(e),n=r.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let i=t.getElementByKey(e.getKey());null!==i&&(null==n?(r.insertChild(i),n=i):n!==i&&r.replaceChild(i,n),n=n.nextSibling)}}}function nq(e){return e instanceof nX}function nJ(e,t,r){let n=e.getNode();for(;n;){let e=n.__key;if(t.has(e)&&!r.has(e))return!0;n=n.getParent()}return!1}class nG extends rI{decorate(e,t){eC(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function nY(e){return e instanceof nG}class nQ extends nX{static getType(){return"root"}static clone(){return new nQ}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){eC(51)}getTextContent(){let e=this.__cachedText;return(nP()||0===nD()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){eC(52)}replace(e){eC(53)}insertBefore(e){eC(54)}insertAfter(e){eC(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){let r=e[t];nq(r)||nY(r)||eC(56)}return super.append(...e)}static importJSON(e){return e5().updateFromJSON(e)}collapseAtStart(){return!0}}function nZ(e){return e instanceof nQ}function n0(e){return new n2(new Map(e._nodeMap))}function n1(){return new n2(new Map([["root",new nQ]]))}class n2{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return nF(t&&t.editor||null,this,e)}clone(e){let t=new n2(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return nF(null,this,()=>({root:function e(t){let r=t.exportJSON(),n=t.constructor;if(r.type!==n.getType()&&eC(130,n.name),nq(t)){let i=r.children;Array.isArray(i)||eC(59,n.name);let l=t.getChildren();for(let t=0;t<l.length;t++){let r=e(l[t]);i.push(r)}}return r}(e5())}))}}class n4 extends nX{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class n8 extends nX{static getType(){return"paragraph"}static clone(e){return new n8(e.__key)}createDOM(e){let t=document.createElement("p"),r=th(e.theme,"paragraph");return void 0!==r&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:n3,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(tR(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();t.style.textAlign=e;let r=this.getDirection();r&&(t.dir=r)}return{element:t}}static importJSON(e){return n5().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){let r=n5();r.setTextFormat(e.format),r.setTextStyle(e.style);let n=this.getDirection();return r.setDirection(n),r.setFormat(this.getFormatType()),r.setStyle(this.getTextStyle()),this.insertAfter(r,t),r}collapseAtStart(){let e=this.getChildren();if(0===e.length||r2(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function n3(e){let t=n5();return e.style&&(t.setFormat(e.style.textAlign),tz(e,t)),{node:t}}function n5(){return tC(new n8)}function n6(e,t,r,n){let i=e._keyToDOMMap;i.clear(),e._editorState=n1(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let l=e._observer;null!==l&&(l.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==r&&(r.textContent="",i.set("root",r))}function n9(e){let t,r=e||{},n=nS,i=r.theme||{},l=void 0===e?n:r.parentEditor||null,s=r.disableEvents||!1,o=n1(),a=r.namespace||(null!==l?l._config.namespace:tn()),u=r.editorState,c=[nQ,rX,rM,r8,n8,n4,...r.nodes||[]],{onError:d,html:h}=r,f=void 0===r.editable||r.editable;if(void 0===e&&null!==n)t=n._nodes;else{t=new Map;for(let e=0;e<c.length;e++){let r=c[e],n=null,i=null;if("function"!=typeof r){let e=r;r=e.replace,n=e.with,i=e.withKlass||null}let l=r.getType(),s=r.transform(),o=new Set;null!==s&&o.add(s),t.set(l,{exportDOM:h&&h.export?h.export.get(r):void 0,klass:r,replace:n,replaceWithKlass:i,transforms:o})}}let p=new n7(o,l,t,{disableEvents:s,namespace:a,theme:i},d||console.error,function(e,t){let r=new Map,n=new Set,i=e=>{Object.keys(e).forEach(t=>{let n=r.get(t);void 0===n&&(n=[],r.set(t,n)),n.push(e[t])})};return e.forEach(e=>{let t=e.klass.importDOM;if(null==t||n.has(t))return;n.add(t);let r=t.call(e.klass);null!==r&&i(r)}),t&&i(t),r}(t,h?h.import:void 0),f);return void 0!==u&&(p._pendingEditorState=u,p._dirtyType=2),p}class n7{constructor(e,t,r,n,i,l,s){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=n,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=tn(),this._onError=i,this._htmlConversions=l,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){void 0===r&&eC(35);let n=this._commands;n.has(e)||n.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=n.get(e);void 0===i&&eC(36,String(e));let l=i[r];return l.add(t),()=>{l.delete(t),i.every(e=>0===e.size)&&n.delete(e)}}registerMutationListener(e,t,r){let n=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation;i.set(t,n);let l=r&&r.skipInitialization;return void 0!==l&&l||this.initializeMutationListener(t,n),()=>{i.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&eC(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let r=this._editorState,n=tB(r).get(t.getType());if(!n)return;let i=new Map;for(let e of n.keys())i.set(e,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){let r=this.registerNodeTransformToKlass(e,t),n=[r],i=r.replaceWithKlass;if(null!=i){let e=this.registerNodeTransformToKlass(i,t);n.push(e)}return function(e,t){let r=tB(e.getEditorState()),n=[];for(let e of t){let t=r.get(e);t&&n.push(t)}0!==n.length&&e.update(()=>{for(let e of n)for(let t of e.keys()){let e=e0(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:"history-merge"}:void 0)}(this,n.map(e=>e.klass.getType())),()=>{n.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return nz(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let r=th(this._config.theme,"root"),n=this._pendingEditorState||this._editorState;if(this._rootElement=e,n6(this,t,e,n),null!==t&&(this._config.disableEvents||function(e){let t=e.ownerDocument,r=rm.get(t);void 0===r&&eC(162);let n=r-1;n>=0||eC(164),rm.set(t,n),0===n&&t.removeEventListener("selectionchange",rO);let i=eV(e);eH(i)?(!function(e){if(null!==e._parentEditor){let t=tr(e),r=t[t.length-1]._key;rR.get(r)===e&&rR.delete(r)}else rR.delete(e._key)}(i),e.__lexicalEditor=null):i&&eC(198);let l=rN(e);for(let e=0;e<l.length;e++)l[e]();e.__lexicalEventHandles=[]}(t),null!=r&&t.classList.remove(...r)),null!==e){let t=tw(e),n=e.style;n.userSelect="text",n.whiteSpace="pre-wrap",n.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,eA(this),this._updateTags.add("history-merge"),nB(this),this._config.disableEvents||function(e,t){let r=e.ownerDocument,n=rm.get(r);(void 0===n||n<1)&&r.addEventListener("selectionchange",rO),rm.set(r,(n||0)+1),e.__lexicalEditor=t;let i=rN(e);for(let r=0;r<rd.length;r++){let[n,l]=rd[r],s="function"==typeof l?e=>{rA(e)||(rD(e),(t.isEditable()||"click"===n)&&l(e,t))}:e=>{if(rA(e))return;rD(e);let r=t.isEditable();switch(n){case"cut":return r&&nz(t,J,e);case"copy":return nz(t,q,e);case"paste":return r&&nz(t,x,e);case"dragstart":return r&&nz(t,V,e);case"dragover":return r&&nz(t,$,e);case"dragend":return r&&nz(t,X,e);case"focus":return r&&nz(t,Z,e);case"blur":return r&&nz(t,ee,e);case"drop":return r&&nz(t,H,e)}};e.addEventListener(n,s),i.push(()=>{e.removeEventListener(n,s)})}}(e,this),null!=r&&e.classList.add(...r)}else this._window=null,this._updateTags.add("history-merge"),nB(this);nU("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&eC(38);let r=e;r._readOnly&&((r=n0(e))._selection=e._selection?e._selection.clone():null),eD(this);let n=this._pendingEditorState,i=this._updateTags,l=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=l&&i.add(l),nB(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=l&&i.add(l),this._updating||nB(this)}parseEditorState(e,t){return function(e,t,r){let n=n1(),i=nw,l=nE,s=nS,o=t._dirtyElements,a=t._dirtyLeaves,u=t._cloneNotNeeded,c=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,nw=n,nE=!1,nS=t;try{let i=t._nodes;nL(e.root,i),r&&r(),n._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=o,t._dirtyLeaves=a,t._cloneNotNeeded=u,t._dirtyType=c,nw=i,nE=l,nS=s}return n}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return nB(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):nH(this,e,t)}focus(e,t={}){let r=this._rootElement;null!==r&&(r.setAttribute("autocapitalize","off"),nK(this,()=>{let n=ng(),i=e5();null!==n?n.dirty=!0:0!==i.getChildrenSize()&&("rootStart"===t.defaultSelection?i.selectStart():i.selectEnd()),nN(),nD()._updateTags.add("focus"),nN(),nD()._deferred.push(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),null===this._pendingEditorState&&r.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=tN(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,nU("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}n7.version="0.24.0+prod.esm";var ie=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});let it="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ir=it&&"documentMode"in document?document.documentMode:null,ii=(it&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),it&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent));it&&"InputEvent"in window&&!ir&&new window.InputEvent("input"),it&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),it&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,it&&/Android/.test(navigator.userAgent),it&&/^(?=.*Chrome).*/i.test(navigator.userAgent);function il(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}it&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function is(e,...t){let r=function(...e){let t=[];for(let r of e)if(r&&"string"==typeof r)for(let[e]of r.matchAll(/\S+/g))t.push(e);return t}(...t);r.length>0&&e.classList.add(...r)}let io={done:!0,value:void 0},ia=e=>({done:!1,value:e}),iu=(e,t)=>{let r=e;for(;r!==e5()&&null!=r;){if(t(r))return r;r=r.getParent()}return null};function ic(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}var id=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});let ih=new Map;function ip(e){let t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function ig(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function im(e){let t={};if(!e)return t;for(let r of e.split(";"))if(""!==r){let[e,n]=r.split(/:([^]+)/);e&&n&&(t[e.trim()]=n.trim())}return t}function i_(e,t){let r=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&null!==r){let[n,i]=r,l=e.isBackward(),s=n.getNode(),o=i.getNode(),a=t.is(s),u=t.is(o);if(a||u){let[r,n]=nl(e),i=s.is(o),a=t.is(l?o:s),u=t.is(l?s:o),c,d=0;return i?(d=r>n?n:r,c=r>n?r:n):a?(d=l?n:r,c=void 0):u&&(d=0,c=l?r:n),t.__text=t.__text.slice(d,c),t}}return t}function iy(e,t){if(null===e)return;let r=e.getStartEndPoints(),n=r?r[0]:null,i=e.is(ng())&&e.isCollapsed();if(null!==n&&"root"===n.key){let e=t(),r=e5(),n=r.getFirstChild();return n?n.replace(e,!0):r.append(e),void(i&&e.select())}let l=e.getNodes().filter(tI).filter(nq),s=n?function(e,t){let r=e;for(;null!==r&&null!==r.getParent()&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}(n.getNode(),tI):null;for(let e of(nq(s)&&!l.find(e=>e.is(s))&&l.push(s),l)){let r=t();r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),e.replace(r,!0),e.is(s)&&i&&r.select()}}function ib(e){return e.getNode().isAttached()}function ix(e,t){let r=tg(e.focus,t);return nY(r)&&!r.isIsolated()||nq(r)&&!r.isInline()&&!r.canBeEmpty()}function iv(e,t,r){let n=function(e){let t=e.anchor.getNode();return"rtl"===(nZ(t)?t:t.getParentOrThrow()).getDirection()}(e);e.modify(t?"extend":"move",r?!n:n,"character")}let iw=new Set(["STYLE","SCRIPT"]);var iS=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function iE(e,t,r){let n=e.getData("application/x-lexical-editor");if(n)try{let e=JSON.parse(n);if(e.namespace===r._config.namespace&&Array.isArray(e.nodes))return iC(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=nL(e[r],nD()._nodes);r2(n)&&function(e){let t=e.getStyle(),r=im(t);ih.set(t,r)}(n),t.push(n)}return t}(e.nodes),t)}catch(e){}let i=e.getData("text/html"),l=e.getData("text/plain");if(i&&l!==i)try{let e=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:e=>e}).createHTML(i):i,"text/html");return iC(r,function(e,t){let r=t.body?t.body.childNodes:[],n=[],i=[];for(let t=0;t<r.length;t++){let l=r[t];if(!iw.has(l.nodeName)){let t=function e(t,r,n,i,l=new Map,s){let o=[];if(iw.has(t.nodeName))return o;let a=null,u=function(e,t){let{nodeName:r}=e,n=t._htmlConversions.get(r.toLowerCase()),i=null;if(void 0!==n)for(let t of n){let r=t(e);null!==r&&(null===i||(i.priority||0)<=(r.priority||0))&&(i=r)}return null!==i?i.conversion:null}(t,r),c=u?u(t):null,d=null;if(null!==c){d=c.after;let e=c.node;if(null!==(a=Array.isArray(e)?e[e.length-1]:e)){for(let[,e]of l)if(!(a=e(a,s)))break;a&&o.push(...Array.isArray(e)?e:[a])}null!=c.forChild&&l.set(t.nodeName,c.forChild)}let h=t.childNodes,f=[],p=(null==a||!tE(a))&&(null!=a&&nd(a)||i);for(let t=0;t<h.length;t++)f.push(...e(h[t],r,n,p,new Map(l),a));return null!=d&&(f=d(f)),tj(t)&&(f=function(e,t,r){let n=e.style.textAlign,i=[],l=[];for(let e=0;e<t.length;e++){let s=t[e];if(nd(s))n&&!s.getFormat()&&s.setFormat(n),i.push(s);else if(l.push(s),e===t.length-1||e<t.length-1&&nd(t[e+1])){let e=r();e.setFormat(n),e.append(...l),i.push(e),l=[]}}return i}(t,f,p?()=>{let e=new n4;return n.push(e),e}:n5)),null==a?f.length>0?o=o.concat(f):tj(t)&&null!=t.nextSibling&&null!=t.previousSibling&&tA(t.nextSibling)&&tA(t.previousSibling)&&(o=o.concat(rF())):nq(a)&&a.append(...f),o}(l,e,i,!1);null!==t&&(n=n.concat(t))}}return function(e){for(let t of e)t.getNextSibling()instanceof n4&&t.insertAfter(rF());for(let t of e){for(let e of t.getChildren())t.insertBefore(e);t.remove()}}(i),n}(r,e),t)}catch(e){}let s=l||e.getData("text/uri-list");if(null!=s)if(nt(t)){let e=s.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){let r=ng();if(nt(r)){let n=e[t];"\n"===n||"\r\n"===n?r.insertParagraph():"	"===n?r.insertNodes([r3()]):r.insertText(n)}}}else t.insertRawText(s)}function iC(e,t,r){e.dispatchCommand(p,{nodes:t,selection:r})||r.insertNodes(t)}let ik=null;async function iT(e,t,r){if(null!==ik)return!1;if(null!==t)return new Promise((n,i)=>{e.update(()=>{n(iP(e,t,r))})});let n=e.getRootElement(),i=e._window||window,l=window.document,s=tN(i);if(null===n||null===s)return!1;let o=l.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(l.createTextNode("#")),n.append(o);let a=new Range;return a.setStart(o,0),a.setEnd(o,1),s.removeAllRanges(),s.addRange(a),new Promise((t,n)=>{let i=e.registerCommand(q,n=>(ic(n,ClipboardEvent)&&(i(),null!==ik&&(window.clearTimeout(ik),ik=null),t(iP(e,n,r))),!0),4);ik=window.setTimeout(()=>{i(),ik=null,t(!1)},50),l.execCommand("copy"),o.remove()})}function iP(e,t,r){if(void 0===r){let t=tN(e._window);if(!t)return!1;let n=t.anchorNode,i=t.focusNode;if(null!==n&&null!==i&&!eW(e,n,i))return!1;let l=ng();if(null===l)return!1;r=function(e=ng()){let t={"text/plain":e?e.getTextContent():""};if(e){let r=nD();for(let[n,i]of iN){let l=i(r,e);null!==l&&(t[n]=l)}}return t}(l)}t.preventDefault();let n=t.clipboardData;return null!==n&&(function(e,t){for(let r in t){let n=t[r];void 0!==n&&e.setData(r,n)}}(n,r),!0)}let iN=[["text/html",function(e,t=ng()){return null==t&&iS(166),nt(t)&&t.isCollapsed()||0===t.getNodes().length?"":function(e,t){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let r=document.createElement("div"),n=e5().getChildren();for(let i=0;i<n.length;i++)!function e(t,r,n,i=null){let l=null===i||r.isSelected(i),s=nq(r)&&r.excludeFromCopy("html"),o=r;if(null!==i){let e=tU(r);o=e=r2(e)&&null!==i?i_(i,e):e}let a=nq(o)?o.getChildren():[],u=t._nodes.get(o.getType()),{element:c,after:d}=u&&void 0!==u.exportDOM?u.exportDOM(t,o):o.exportDOM(t);if(!c)return!1;let h=document.createDocumentFragment();for(let n=0;n<a.length;n++){let s=a[n],o=e(t,s,h,i);!l&&nq(r)&&o&&r.extractWithChild(s,i,"html")&&(l=!0)}if(l&&!s){if((tR(c)||tD(c))&&c.append(h),n.append(c),d){let e=d.call(o,c);e&&(tD(c)?c.replaceChildren(e):c.replaceWith(e))}}else n.append(h);return l}(e,n[i],r,t);return r.innerHTML}(e,t)}],["application/x-lexical-editor",function(e,t=ng()){return null==t&&iS(166),nt(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(function(e,t){let r=[],n=e5().getChildren();for(let i=0;i<n.length;i++)!function e(t,r,n,i=[]){let l=null===r||n.isSelected(r),s=nq(n)&&n.excludeFromCopy("html"),o=n;if(null!==r){let e=tU(n);o=e=r2(e)&&null!==r?i_(r,e):e}let a=nq(o)?o.getChildren():[],u=function(e){let t=e.exportJSON(),r=e.constructor;return t.type!==r.getType()&&iS(58,r.name),nq(e)&&(Array.isArray(t.children)||iS(59,r.name)),t}(o);if(r2(o)){let e=o.__text;e.length>0?u.text=e:l=!1}for(let i=0;i<a.length;i++){let s=a[i],o=e(t,r,s,u.children);!l&&nq(n)&&o&&n.extractWithChild(s,r,"clone")&&(l=!0)}if(l&&!s)i.push(u);else if(Array.isArray(u.children))for(let e=0;e<u.children.length;e++){let t=u.children[e];i.push(t)}return l}(e,t,n[i],r);return{namespace:e._config.namespace,nodes:r}}(e,t))}]];function iR(e,t){if(void 0!==document.caretRangeFromPoint){let r=document.caretRangeFromPoint(e,t);return null===r?null:{node:r.startContainer,offset:r.startOffset}}if("undefined"!==document.caretPositionFromPoint){let r=document.caretPositionFromPoint(e,t);return null===r?null:{node:r.offsetNode,offset:r.offset}}return null}let iO="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,iD=iO&&"documentMode"in document?document.documentMode:null,iA=!(!iO||!("InputEvent"in window)||iD)&&"getTargetRanges"in new window.InputEvent("input"),ij=iO&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),iI=iO&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,iM=iO&&/^(?=.*Chrome).*/i.test(navigator.userAgent),iL=iO&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!iM,iF={};class iB extends nX{static getType(){return"quote"}static clone(e){return new iB(e.__key)}createDOM(e){let t=document.createElement("blockquote");return is(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:iK,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(tR(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();t.style.textAlign=e;let r=this.getDirection();r&&(t.dir=r)}return{element:t}}static importJSON(e){return iU().updateFromJSON(e)}insertNewAfter(e,t){let r=n5(),n=this.getDirection();return r.setDirection(n),this.insertAfter(r,t),r}collapseAtStart(){let e=n5();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function iU(){return tC(new iB)}class iz extends nX{static getType(){return"heading"}static clone(e){return new iz(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){let t=this.getWritable();return this.__tag=e,t}createDOM(e){let t=this.__tag,r=document.createElement(t),n=e.theme.heading;return void 0!==n&&is(r,n[t]),r}updateDOM(e,t,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:iH,priority:0}),h2:e=>({conversion:iH,priority:0}),h3:e=>({conversion:iH,priority:0}),h4:e=>({conversion:iH,priority:0}),h5:e=>({conversion:iH,priority:0}),h6:e=>({conversion:iH,priority:0}),p:e=>{let t=e.firstChild;return null!==t&&iW(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>iW(e)?{conversion:e=>({node:iV("h1")}),priority:3}:null}}exportDOM(e){let{element:t}=super.exportDOM(e);if(tR(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();t.style.textAlign=e;let r=this.getDirection();r&&(t.dir=r)}return{element:t}}static importJSON(e){return iV(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,t=!0){let r=e?e.anchor.offset:0,n=this.getLastDescendant(),i=n&&(!e||e.anchor.key!==n.getKey()||r!==n.getTextContentSize())&&e?iV(this.getTag()):n5(),l=this.getDirection();if(i.setDirection(l),this.insertAfter(i,t),0===r&&!this.isEmpty()&&e){let e=n5();e.select(),this.replace(e,!0)}return i}collapseAtStart(){let e=this.isEmpty()?n5():iV(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function iW(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function iH(e){let t=e.nodeName.toLowerCase(),r=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(r=iV(t),null!==e.style&&(tz(e,r),r.setFormat(e.style.textAlign))),{node:r}}function iK(e){let t=iU();return null!==e.style&&(t.setFormat(e.style.textAlign),tz(e,t)),{node:t}}function iV(e="h1"){return tC(new iz(e))}function i$(e){let t=null;if(ic(e,DragEvent)?t=e.dataTransfer:ic(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];let r=t.types,n=r.includes("Files"),i=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),i]}function iX(e){let t=ng();if(!nt(t))return!1;let r=new Set,n=t.getNodes();for(let t=0;t<n.length;t++){let i=n[t],l=i.getKey();if(r.has(l))continue;let s=iu(i,e=>nq(e)&&!e.isInline());if(null===s)continue;let o=s.getKey();s.canIndent()&&!r.has(o)&&(r.add(o),e(s))}return r.size>0}function iq(e){for(let t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function iJ(){return(0,i.jsx)("div",{className:"divider"})}function iG(){let[e]=h(),t=(0,a.useRef)(null),[r,n]=(0,a.useState)(!1),[l,s]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!1),_=function(){let[e]=h(),t=(0,a.useCallback)(t=>e.registerUpdateListener(t),[e]),r=(0,a.useCallback)(()=>e.getEditorState().read(()=>{let e=ng();if(!nt(e))return null;let t=e.anchor.getNode(),r="root"===t.getKey()?t:iu(t,e=>{let t=e.getParent();return null!==t&&tE(t)});return(null===r&&(r=t.getTopLevelElementOrThrow()),r instanceof iz)?r.getTag():r.getType()}),[e]);return(0,a.useSyncExternalStore)(t,r,r)}();function y(e){let t=ng();return _===e?iy(t,()=>n5()):"h1"===e?iy(t,()=>iV("h1")):"h2"===e?iy(t,()=>iV("h2")):"h3"===e?iy(t,()=>iV("h3")):"quote"===e?iy(t,()=>iU()):void 0}return(0,a.useCallback)(()=>{let e=ng();nt(e)&&(u(e.hasFormat("bold")),d(e.hasFormat("italic")),p(e.hasFormat("underline")),m(e.hasFormat("strikethrough")))},[]),(0,i.jsxs)("div",{className:"toolbar",ref:t,children:[(0,i.jsx)("button",{disabled:!r,onClick:()=>{e.dispatchCommand(C,void 0)},className:"toolbar-item spaced","aria-label":"Undo",children:(0,i.jsx)("i",{className:"format undo"})}),(0,i.jsx)("button",{disabled:!l,onClick:()=>{e.dispatchCommand(k,void 0)},className:"toolbar-item","aria-label":"Redo",children:(0,i.jsx)("i",{className:"format redo"})}),(0,i.jsx)(iJ,{}),(0,i.jsx)("button",{onClick:()=>e.update(()=>y("h1")),"data-active":"h1"===_?"":void 0,className:"toolbar-item spaced "+("h1"===_?"active":""),children:(0,i.jsx)("i",{className:"format h1"})}),(0,i.jsx)("button",{onClick:()=>e.update(()=>y("h2")),"data-active":"h2"===_?"":void 0,className:"toolbar-item spaced "+("h2"===_?"active":""),children:(0,i.jsx)("i",{className:"format h2"})}),(0,i.jsx)("button",{onClick:()=>e.update(()=>y("h3")),"data-active":"h3"===_?"":void 0,className:"toolbar-item spaced "+("h3"===_?"active":""),children:(0,i.jsx)("i",{className:"format h3"})}),(0,i.jsx)(iJ,{}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(E,"bold")},className:"toolbar-item spaced "+(o?"active":""),"aria-label":"Format Bold",children:(0,i.jsx)("i",{className:"format bold"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(E,"italic")},className:"toolbar-item spaced "+(c?"active":""),"aria-label":"Format Italics",children:(0,i.jsx)("i",{className:"format italic"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(E,"underline")},className:"toolbar-item spaced "+(f?"active":""),"aria-label":"Format Underline",children:(0,i.jsx)("i",{className:"format underline"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(E,"strikethrough")},className:"toolbar-item spaced "+(g?"active":""),"aria-label":"Format Strikethrough",children:(0,i.jsx)("i",{className:"format strikethrough"})}),(0,i.jsx)(iJ,{}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(K,"left")},className:"toolbar-item spaced","aria-label":"Left Align",children:(0,i.jsx)("i",{className:"format left-align"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(K,"center")},className:"toolbar-item spaced","aria-label":"Center Align",children:(0,i.jsx)("i",{className:"format center-align"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(K,"right")},className:"toolbar-item spaced","aria-label":"Right Align",children:(0,i.jsx)("i",{className:"format right-align"})}),(0,i.jsx)("button",{onClick:()=>{e.dispatchCommand(K,"justify")},className:"toolbar-item","aria-label":"Justify Align",children:(0,i.jsx)("i",{className:"format justify-align"})})," "]})}function iY({defaultSelection:e}){let[t]=h();return null}let iQ=a.useEffect,iZ={tag:"history-merge"};function i0({initialConfig:e,children:t}){let r=(0,a.useMemo)(()=>{let{theme:t,namespace:r,nodes:n,onError:i,editorState:l,html:s}=e,o={getTheme:function(){return null!=t?t:null}},a=n9({editable:e.editable,html:s,namespace:r,nodes:n,onError:e=>i(e,a),theme:t});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let e=e5();if(e.isEmpty()){let t=n5();e.append(t);null!==ng()&&t.select()}},iZ);else if(null!==t)switch(typeof t){case"string":{let r=e.parseEditorState(t);e.setEditorState(r,iZ);break}case"object":e.setEditorState(t,iZ);break;case"function":e.update(()=>{e5().isEmpty()&&t(e)},iZ)}}}(a,l),[a,o]},[]);return iQ(()=>{let t=e.editable,[n]=r;n.setEditable(void 0===t||t)},[]),(0,i.jsx)(d.Provider,{value:r,children:t})}let i1=a.useEffect;function i2(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function i4(e){return()=>(function(e){if(!function(e,t=!0){if(e)return!1;let r=e5().getTextContent();return t&&(r=r.trim()),""===r}(e,!1))return!1;let t=e5().getChildren(),r=t.length;if(r>1)return!1;for(let e=0;e<r;e++){let r=t[e];if(nY(r))return!1;if(nq(r)){if(!(r instanceof n8)||0!==r.__indent)return!1;let t=r.getChildren(),n=t.length;for(let r=0;r<n;r++)if(!r2(t[e]))return!1}}return!0})(e)}(function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default})(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});var i8=r(51215);let i3=a.useEffect;function i5(e){return e.getEditorState().read(i4(e.isComposing()))}function i6({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){var n;let[l]=h(),s=function(e,t){let[r,n]=(0,a.useState)(()=>e.getDecorators());return i3(()=>e.registerDecoratorListener(e=>{(0,i8.flushSync)(()=>{n(e)})}),[e]),(0,a.useEffect)(()=>{n(e.getDecorators())},[e]),(0,a.useMemo)(()=>{let n=[],l=Object.keys(r);for(let s=0;s<l.length;s++){let o=l[s],u=(0,i.jsx)(t,{onError:t=>e._onError(t),children:(0,i.jsx)(a.Suspense,{fallback:null,children:r[o]})}),c=e.getElementByKey(o);null!==c&&n.push((0,i8.createPortal)(u,c,o))}return n},[t,r,e])}(l,r);return i3(()=>{var e;return il(il((e=n).registerCommand(g,e=>{let t=ng();return!!nn(t)&&(t.clear(),!0)},0),e.registerCommand(m,e=>{let t=ng();return!!nt(t)&&(t.deleteCharacter(e),!0)},0),e.registerCommand(w,e=>{let t=ng();return!!nt(t)&&(t.deleteWord(e),!0)},0),e.registerCommand(S,e=>{let t=ng();return!!nt(t)&&(t.deleteLine(e),!0)},0),e.registerCommand(b,t=>{let r=ng();if("string"==typeof t)null!==r&&r.insertText(t);else{if(null===r)return!1;let n=t.dataTransfer;if(null!=n)iE(n,r,e);else if(nt(r)){let e=t.data;return e&&r.insertText(e),!0}}return!0},0),e.registerCommand(v,()=>{let e=ng();return!!nt(e)&&(e.removeText(),!0)},0),e.registerCommand(E,e=>{let t=ng();return!!nt(t)&&(t.formatText(e),!0)},0),e.registerCommand(K,e=>{let t=ng();if(!nt(t)&&!nn(t))return!1;for(let r of t.getNodes()){let t=iu(r,e=>nq(e)&&!e.isInline());null!==t&&t.setFormat(e)}return!0},0),e.registerCommand(_,e=>{let t=ng();return!!nt(t)&&(t.insertLineBreak(e),!0)},0),e.registerCommand(y,()=>{let e=ng();return!!nt(e)&&(e.insertParagraph(),!0)},0),e.registerCommand(U,()=>{var e;let t;return e=[r3()],null===(t=ng()||nm())&&(t=e5().selectEnd()),t.insertNodes(e),!0},0),e.registerCommand(z,()=>iX(e=>{let t=e.getIndent();e.setIndent(t+1)}),0),e.registerCommand(W,()=>iX(e=>{let t=e.getIndent();t>0&&e.setIndent(t-1)}),0),e.registerCommand(D,e=>{let t=ng();if(nn(t)&&!nY(e4(e.target))){let e=t.getNodes();if(e.length>0)return e[0].selectPrevious(),!0}else if(nt(t)){let r=tg(t.focus,!0);if(!e.shiftKey&&nY(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},0),e.registerCommand(A,e=>{let t=ng();if(nn(t)){let e=t.getNodes();if(e.length>0)return e[0].selectNext(0,0),!0}else if(nt(t)){if(function(e){let t=e.focus;return"root"===t.key&&t.offset===e5().getChildrenSize()}(t))return e.preventDefault(),!0;let r=tg(t.focus,!1);if(!e.shiftKey&&nY(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},0),e.registerCommand(R,e=>{let t=ng();if(nn(t)){let r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}if(!nt(t))return!1;if(ix(t,!0)){let r=e.shiftKey;return e.preventDefault(),iv(t,r,!0),!0}return!1},0),e.registerCommand(P,e=>{let t=ng();if(nn(t)&&!nY(e4(e.target))){let r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectNext(0,0),!0}if(!nt(t))return!1;let r=e.shiftKey;return!!ix(t,!1)&&(e.preventDefault(),iv(t,r,!1),!0)},0),e.registerCommand(M,t=>{if(nY(e4(t.target)))return!1;let r=ng();if(!nt(r))return!1;let{anchor:n}=r,i=n.getNode();return r.isCollapsed()&&0===n.offset&&!nZ(i)&&(function(e){let t=iu(e,e=>nq(e)&&!e.isInline());return nq(t)||ie(4,e.__key),t})(i).getIndent()>0?(t.preventDefault(),e.dispatchCommand(W,void 0)):(!iI||"ko-KR"!==navigator.language)&&(t.preventDefault(),e.dispatchCommand(m,!0))},0),e.registerCommand(F,t=>!nY(e4(t.target))&&!!nt(ng())&&(t.preventDefault(),e.dispatchCommand(m,!1)),0),e.registerCommand(j,t=>{let r=ng();if(!nt(r))return!1;if(iq(r),null!==t){if((iI||ij||iL)&&iA)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(_,!1)}return e.dispatchCommand(y,void 0)},0),e.registerCommand(L,()=>!!nt(ng())&&(e.blur(),!0),0),e.registerCommand(H,t=>{let[,r]=i$(t);if(r.length>0){let n=iR(t.clientX,t.clientY);if(null!==n){let{offset:t,node:i}=n,l=e4(i);if(null!==l){let e=new nr(r6("root",0,"element"),r6("root",0,"element"),0,"");if(r2(l))e.anchor.set(l.getKey(),t,"text"),e.focus.set(l.getKey(),t,"text");else{let t=l.getParentOrThrow().getKey(),r=l.getIndexWithinParent()+1;e.anchor.set(t,r,"element"),e.focus.set(t,r,"element")}e9(eL(e))}e.dispatchCommand(iF,r)}return t.preventDefault(),!0}return!!nt(ng())},0),e.registerCommand(V,e=>{let[t]=i$(e),r=ng();return!(t&&!nt(r))},0),e.registerCommand($,e=>{let[t]=i$(e),r=ng();if(t&&!nt(r))return!1;let n=iR(e.clientX,e.clientY);return null!==n&&nY(e4(n.node))&&e.preventDefault(),!0},0),e.registerCommand(G,()=>((function(e){let t=e5();if(nt(void 0)){let t=(void 0).anchor,r=e.focus,n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(n.getKey(),0,"element"),r.set(n.getKey(),n.getChildrenSize(),"element"),eL(e)}e9(eL(t.select(0,t.getChildrenSize())))})(),!0),0),e.registerCommand(q,t=>(iT(e,ic(t,ClipboardEvent)?t:null),!0),0),e.registerCommand(J,t=>((async function(e,t){await iT(t,ic(e,ClipboardEvent)?e:null),t.update(()=>{let e=ng();nt(e)?e.removeText():nn(e)&&e.getNodes().forEach(e=>e.remove())})})(t,e),!0),0),e.registerCommand(x,t=>{let[,r,n]=i$(t);return r.length>0&&!n?(e.dispatchCommand(iF,r),!0):!(tO(t.target)&&ez(t.target))&&null!==ng()&&(t.preventDefault(),e.update(()=>{let r=ng(),n=ic(t,InputEvent)||ic(t,KeyboardEvent)?null:t.clipboardData;null!=n&&null!==r&&iE(n,r,e)},{tag:"paste"}),!0)},0),e.registerCommand(I,e=>{let t=ng();return nt(t)&&iq(t),!1},0),e.registerCommand(B,e=>{let t=ng();return nt(t)&&iq(t),!1},0)),function(e){let t=window.location.origin,r=r=>{if(r.origin!==t)return;let n=e.getRootElement();if(document.activeElement!==n)return;let i=r.data;if("string"==typeof i){let t;try{t=JSON.parse(i)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let n=t.payload;if(n&&"makeChanges"===n.functionId){let t=n.args;if(t){let[n,i,l,s,o,a]=t;e.update(()=>{let e=ng();if(nt(e)){let t=e.anchor,a=t.getNode(),u=0,c=0;if(r2(a)&&n>=0&&i>=0&&(u=n,c=n+i,e.setTextNodeRange(a,u,a,c)),u===c&&""===l||(e.insertRawText(l),a=t.getNode()),r2(a)){u=s,c=s+o;let t=a.getTextContentSize();u=u>t?t:u,c=c>t?t:c,e.setTextNodeRange(a,u,a,c)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}(n))},[n=l]),(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)(i9,{content:t}),s]})}function i9({content:e}){let[t]=h(),r=function(e){let[t,r]=(0,a.useState)(()=>i5(e));return i3(()=>{function t(){r(i5(e))}return t(),il(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),n=function(){let[e]=h(),t=(0,a.useMemo)(()=>i2(e),[e,i2]),[r,n]=(0,a.useState)(()=>t.initialValueFn()),i=(0,a.useRef)(r);return i1(()=>{let{initialValueFn:e,subscribe:r}=t,l=e();return i.current!==l&&(i.current=l,n(l)),r(e=>{i.current=e,n(e)})},[t,i2]),r}();return r?"function"==typeof e?e(n):e:null}let i7=a.useEffect,le=(0,a.forwardRef)(function({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:l,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:u,ariaLabel:c,ariaLabelledBy:d,ariaMultiline:h,ariaOwns:f,ariaRequired:p,autoCapitalize:g,className:m,id:_,role:y="textbox",spellCheck:b=!0,style:x,tabIndex:v,"data-testid":w,...S},E){let[C,k]=(0,a.useState)(e.isEditable()),T=(0,a.useCallback)(t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)},[e]),P=(0,a.useMemo)(()=>(function(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}})(E,T),[T,E]);return i7(()=>(k(e.isEditable()),e.registerEditableListener(e=>{k(e)})),[e]),(0,i.jsx)("div",{"aria-activedescendant":C?t:void 0,"aria-autocomplete":C?r:"none","aria-controls":C?n:void 0,"aria-describedby":l,...null!=s?{"aria-errormessage":s}:{},"aria-expanded":C&&"combobox"===y?!!o:void 0,...null!=u?{"aria-invalid":u}:{},"aria-label":c,"aria-labelledby":d,"aria-multiline":h,"aria-owns":C?f:void 0,"aria-readonly":!C||void 0,"aria-required":p,autoCapitalize:g,className:m,contentEditable:C,"data-testid":w,id:_,ref:P,role:C?y:void 0,spellCheck:b,style:x,tabIndex:v,...S})});function lt(e){return e.getEditorState().read(i4(e.isComposing()))}let lr=(0,a.forwardRef)(function(e,t){let{placeholder:r,...n}=e,[l]=h();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(le,{editor:l,...n,ref:t}),null!=r&&(0,i.jsx)(ln,{editor:l,content:r})]})});function ln({content:e,editor:t}){let r=function(e){let[t,r]=(0,a.useState)(()=>lt(e));return i7(()=>{function t(){r(lt(e))}return t(),il(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),[n,l]=(0,a.useState)(t.isEditable());if(!r)return null;let s=null;return"function"==typeof e?s=e(n):null!==e&&(s=e),null===s?null:(0,i.jsx)("div",{"aria-hidden":!0,children:s})}function li({delay:e,externalHistoryState:t}){let[r]=h();return function(e,t,r=1e3){(0,a.useMemo)(()=>t||{current:null,redoStack:[],undoStack:[]},[t])}(0,t,e),null}function ll(e,t){return(ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ls={error:null},lo=function(e){function t(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state=ls,t.resetErrorBoundary=function(){for(var e,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,n),t.reset()},t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ll(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var r=t.prototype;return r.reset=function(){this.setState(ls)},r.componentDidCatch=function(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t)},r.componentDidUpdate=function(e,t){var r,n,i,l,s=this.state.error,o=this.props.resetKeys;null!==s&&null!==t.error&&(void 0===(i=e.resetKeys)&&(i=[]),void 0===(l=o)&&(l=[]),i.length!==l.length||i.some(function(e,t){return!Object.is(e,l[t])}))&&(null==(r=(n=this.props).onResetKeysChange)||r.call(n,e.resetKeys,o),this.reset())},r.render=function(){var e=this.state.error,t=this.props,r=t.fallbackRender,n=t.FallbackComponent,i=t.fallback;if(null!==e){var l={error:e,resetErrorBoundary:this.resetErrorBoundary};if(a.isValidElement(i))return i;if("function"==typeof r)return r(l);if(n)return a.createElement(n,l);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(a.Component);function la({children:e,onError:t}){return(0,i.jsx)(lo,{fallback:(0,i.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}class lu extends nX{static getType(){return"lb-thread-mark"}static clone(e){return new lu(Array.from(e.__ids),e.__key)}static importDOM(){return null}static importJSON(e){let t=lc(e.ids);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),ids:this.getIDs(),type:"lb-thread-mark",version:1}}constructor(e,t){super(t),this.__ids=e||[]}createDOM(){return document.createElement("span")}updateDOM(){return!1}hasID(e){let t=this.getIDs();for(let r=0;r<t.length;r++)if(e===t[r])return!0;return!1}getIDs(){let e=this.getLatest();return ld(e)?e.__ids:[]}addID(e){let t=this.getWritable();if(ld(t)){let r=t.__ids;t.__ids=r;for(let t=0;t<r.length;t++)if(e===r[t])return;r.push(e)}}deleteID(e){let t=this.getWritable();if(ld(t)){let r=t.__ids;t.__ids=r;for(let t=0;t<r.length;t++)if(e===r[t])return void r.splice(t,1)}}insertNewAfter(e,t=!0){let r=lc(this.__ids);return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!nt(t)||"html"===r)return!1;let n=t.anchor,i=t.focus,l=n.getNode(),s=i.getNode(),o=t.isBackward()?n.offset-i.offset:i.offset-n.offset;return this.isParentOf(l)&&this.isParentOf(s)&&this.getTextContent().length===o}excludeFromCopy(e){return"clone"!==e}}function lc(e){return tC(new lu(e))}function ld(e){return e instanceof lu}var lh=r(82723),lf=r(99106);function lp({nodeKey:e,children:t}){let[r]=h(),n=function(e){let[t]=h(),r=(0,a.useCallback)(e=>t.registerUpdateListener(e),[t]),n=(0,a.useCallback)(()=>t.getEditorState().read(()=>(function(e){let t=e0(e);return null!==t&&t.isSelected()})(e)),[t,e]);return(0,a.useSyncExternalStore)(r,n,n)}(e);return(0,i.jsx)("span",{onClick:function(t){r.update(()=>{t.stopPropagation(),t.preventDefault();let r=nf();r.add(e),e9(r)})},"data-selected":n?"":void 0,className:"lb-root lb-lexical-mention",children:t})}class lg extends nG{constructor(e,t,r){super(r),this.__id=e,this.__userId=t}static getType(){return"lb-mention"}static clone(e){return new lg(e.__id,e.__userId,e.__key)}createDOM(){let e=document.createElement("span");return e.style.display="inline-block",e.style.userSelect="none",e}updateDOM(){return!1}static importDom(){return{span:()=>({conversion:e=>{let t=e.getAttribute("data-lexical-lb-mention");return t?{node:lm(t)}:null},priority:1})}}exportDOM(){let e=document.createElement("span");return e.setAttribute("data-lexical-lb-mention",this.getUserId()),e.textContent=this.getUserId(),{element:e}}static importJSON(e){return lm(e.userId)}exportJSON(){return{userId:this.__userId,type:"lb-mention",version:1}}getUserId(){return this.getLatest().__userId}getId(){return this.getLatest().__id}decorate(){return(0,i.jsxs)(lp,{nodeKey:this.getKey(),children:["@",(0,i.jsx)(lf.K,{userId:this.getUserId()})]})}getTextContent(){return"@"+this.getUserId()}}function lm(e){return tC(new lg((0,lh.bR)(),e))}var l_=r(4503),ly=r(25605);let lb=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],lx=lb[Math.floor(Math.random()*lb.length)],lv=(0,a.createContext)({clientID:0,color:lx[1],isCollabActive:!1,name:lx[0],yjsDocMap:new Map}),lw=()=>new Map,lS=e=>{let t=lw();return e.forEach((e,r)=>{t.set(r,e)}),t},lE=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},lC=(e,t)=>{for(let[r,n]of e)if(t(n,r))return!0;return!1},lk=()=>new Set,lT=e=>e[e.length-1],lP=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},lN=Array.from,lR=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},lO=Array.isArray;class lD{constructor(){this._observers=lw()}on(e,t){return lE(this._observers,e,lk).add(t),t}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return lN((this._observers.get(e)||lw()).values()).forEach(e=>e(...t))}destroy(){this._observers=lw()}}class lA{constructor(){this._observers=lw()}on(e,t){lE(this._observers,e,lk).add(t)}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return lN((this._observers.get(e)||lw()).values()).forEach(e=>e(...t))}destroy(){this._observers=lw()}}let lj=Math.floor,lI=Math.abs,lM=(e,t)=>e<t?e:t,lL=(e,t)=>e>t?e:t,lF=e=>0!==e?e<0:1/e<0,lB=Number.MAX_SAFE_INTEGER;Number.MIN_SAFE_INTEGER;let lU=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&lj(e)===e);Number.parseInt,String.fromCodePoint,(0,String.fromCharCode)(65535);let lz=e=>e.toLowerCase(),lW=/^\s*/g,lH=e=>e.replace(lW,""),lK=/([A-Z])/g,lV=(e,t)=>lH(e.replace(lK,e=>`${t}${lz(e)}`)),l$="undefined"!=typeof TextEncoder?new TextEncoder:null,lX=l$?e=>l$.encode(e):e=>{let t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.codePointAt(e);return n},lq="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});lq&&1===lq.decode(new Uint8Array).length&&(lq=null);class lJ{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let lG=()=>new lJ,lY=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},lQ=e=>{let t=new Uint8Array(lY(e)),r=0;for(let n=0;n<e.bufs.length;n++){let i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),r),t},lZ=(e,t)=>{let r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*lL(r,t)),e.cpos=0)},l0=(e,t)=>{let r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},l1=(e,t)=>{for(;t>127;)l0(e,128|127&t),t=lj(t/128);l0(e,127&t)},l2=(e,t)=>{let r=lF(t);for(r&&(t=-t),l0(e,128*(t>63)|64*!!r|63&t),t=lj(t/64);t>0;)l0(e,128*(t>127)|127&t),t=lj(t/128)},l4=new Uint8Array(3e4),l8=l4.length/3,l3=l$&&l$.encodeInto?(e,t)=>{if(t.length<l8){let r=l$.encodeInto(t,l4).written||0;l1(e,r);for(let t=0;t<r;t++)l0(e,l4[t])}else l6(e,lX(t))}:(e,t)=>{let r=unescape(encodeURIComponent(t)),n=r.length;l1(e,n);for(let t=0;t<n;t++)l0(e,r.codePointAt(t))},l5=(e,t)=>{let r=e.cbuf.length,n=e.cpos,i=lM(r-n,t.length),l=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,l>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(lL(2*r,l)),e.cbuf.set(t.subarray(i)),e.cpos=l)},l6=(e,t)=>{l1(e,t.byteLength),l5(e,t)},l9=(e,t)=>{lZ(e,t);let r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},l7=(e,t)=>l9(e,4).setFloat32(0,t,!1),se=(e,t)=>l9(e,8).setFloat64(0,t,!1),st=(e,t)=>l9(e,8).setBigInt64(0,t,!1),sr=new DataView(new ArrayBuffer(4)),sn=e=>(sr.setFloat32(0,e),sr.getFloat32(0)===e),si=(e,t)=>{switch(typeof t){case"string":l0(e,119),l3(e,t);break;case"number":lU(t)&&0x7fffffff>=lI(t)?(l0(e,125),l2(e,t)):sn(t)?(l0(e,124),l7(e,t)):(l0(e,123),se(e,t));break;case"bigint":l0(e,122),st(e,t);break;case"object":if(null===t)l0(e,126);else if(lO(t)){l0(e,117),l1(e,t.length);for(let r=0;r<t.length;r++)si(e,t[r])}else if(t instanceof Uint8Array)l0(e,116),l6(e,t);else{l0(e,118);let r=Object.keys(t);l1(e,r.length);for(let n=0;n<r.length;n++){let i=r[n];l3(e,i),si(e,t[i])}}break;case"boolean":l0(e,t?120:121);break;default:l0(e,127)}};class sl extends lJ{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&l1(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}let ss=e=>{e.count>0&&(l2(e.encoder,1===e.count?e.s:-e.s),e.count>1&&l1(e.encoder,e.count-2))};class so{constructor(){this.encoder=new lJ,this.s=0,this.count=0}write(e){this.s===e?this.count++:(ss(this),this.count=1,this.s=e)}toUint8Array(){return ss(this),lQ(this.encoder)}}let sa=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);l2(e.encoder,t),e.count>1&&l1(e.encoder,e.count-2)}};class su{constructor(){this.encoder=new lJ,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(sa(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return sa(this),lQ(this.encoder)}}class sc{constructor(){this.sarr=[],this.s="",this.lensE=new so}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new lJ;return this.sarr.push(this.s),this.s="",l3(e,this.sarr.join("")),l5(e,this.lensE.toUint8Array()),lQ(e)}}let sd=e=>Error(e),sh=()=>{throw sd("Method unimplemented")},sf=()=>{throw sd("Unexpected case")},sp=sd("Unexpected end of array"),sg=sd("Integer out of Range");class sm{constructor(e){this.arr=e,this.pos=0}}let s_=e=>new sm(e),sy=e=>e.pos!==e.arr.length,sb=(e,t)=>{let r=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r},sx=e=>sb(e,sw(e)),sv=e=>e.arr[e.pos++],sw=e=>{let t=0,r=1,n=e.arr.length;for(;e.pos<n;){let n=e.arr[e.pos++];if(t+=(127&n)*r,r*=128,n<128)return t;if(t>lB)throw sg}throw sp},sS=e=>{let t=e.arr[e.pos++],r=63&t,n=64,i=(64&t)>0?-1:1;if((128&t)==0)return i*r;let l=e.arr.length;for(;e.pos<l;){if(r+=(127&(t=e.arr[e.pos++]))*n,n*=128,t<128)return i*r;if(r>lB)throw sg}throw sp},sE=lq?e=>lq.decode(sx(e)):e=>{let t=sw(e);if(0===t)return"";{let r=String.fromCodePoint(sv(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(sv(e));else for(;t>0;){let n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},sC=(e,t)=>{let r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},sk=[e=>void 0,e=>null,sS,e=>sC(e,4).getFloat32(0,!1),e=>sC(e,8).getFloat64(0,!1),e=>sC(e,8).getBigInt64(0,!1),e=>!1,e=>!0,sE,e=>{let t=sw(e),r={};for(let n=0;n<t;n++)r[sE(e)]=sT(e);return r},e=>{let t=sw(e),r=[];for(let n=0;n<t;n++)r.push(sT(e));return r},sx],sT=e=>sk[127-sv(e)](e);class sP extends sm{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),sy(this)?this.count=sw(this)+1:this.count=-1),this.count--,this.s}}class sN extends sm{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=sS(this);let e=lF(this.s);this.count=1,e&&(this.s=-this.s,this.count=sw(this)+2)}return this.count--,this.s}}class sR extends sm{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=sS(this);this.diff=lj(e/2),this.count=1,1&e&&(this.count=sw(this)+2)}return this.s+=this.diff,this.count--,this.s}}class sO{constructor(e){this.decoder=new sN(e),this.str=sE(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}var sD=r(77598);sD.webcrypto.subtle;let sA=sD.webcrypto.getRandomValues.bind(sD.webcrypto),sj=()=>sA(new Uint32Array(1))[0],sI=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^sj()&15>>e/4).toString(16)),sM=e=>new Promise(e);Promise.all.bind(Promise);let sL=e=>void 0===e?null:e;class sF{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let sB=new sF;try{"undefined"!=typeof localStorage&&localStorage&&(sB=localStorage)}catch(e){}let sU=sB,sz=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&sz(e,t,r+1)}},sW=e=>e,sH="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let sK=[],sV=()=>{if(void 0===n)if(sH){n=lw();let e=process.argv,t=null;for(let r=0;r<e.length;r++){let i=e[r];"-"===i[0]?(null!==t&&n.set(t,""),t=i):null!==t?(n.set(t,i),t=null):sK.push(i)}null!==t&&n.set(t,"")}else"object"==typeof location?(n=lw(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,r]=e.split("=");n.set(`--${lV(t,"-")}`,r),n.set(`-${lV(t,"-")}`,r)}})):n=lw();return n},s$=e=>sV().has(e),sX=e=>sH?sL(process.env[e.toUpperCase().replaceAll("-","_")]):sL(sU.getItem(e)),sq=e=>s$("--"+e)||null!==sX(e);sq("production");let sJ=sH&&["true","1","2"].includes(process.env.FORCE_COLOR)||!s$("--no-colors")&&!sq("no-color")&&(!sH||process.stdout.isTTY)&&(!sH||s$("--color")||null!==sX("COLORTERM")||(sX("TERM")||"").includes("color")),sG=e=>new Uint8Array(e),sY=e=>{let t=sG(e.byteLength);return t.set(e),t},sQ=Symbol,sZ=Date.now,s0=sQ(),s1=sQ(),s2=sQ(),s4=sQ(),s8=sQ(),s3=sQ(),s5=sQ(),s6=sQ(),s9=sQ();sZ();let s7={[s0]:"\x1b[1m",[s1]:"\x1b[2m",[s2]:"\x1b[34m",[s8]:"\x1b[32m",[s4]:"\x1b[37m",[s3]:"\x1b[31m",[s5]:"\x1b[35m",[s6]:"\x1b[38;5;208m",[s9]:"\x1b[0m"},oe=sJ?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=0;for(;n<e.length;n++){let r=e[n],i=s7[r];if(void 0!==i)t.push(i);else if(void 0===r)break;else if(r.constructor===String||r.constructor===Number)t.push(r);else break}for(n>0&&(t.push("\x1b[0m"),r.push(t.join("")));n<e.length;n++){let t=e[n];t instanceof Symbol||r.push(t)}return r}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=0;for(;n<e.length;n++){let r=e[n];if(void 0===r)break;if(r.constructor===String||r.constructor===Number)t.push(r);else if(r.constructor===Object)break}for(n>0&&r.push(t.join(""));n<e.length;n++){let t=e[n];t instanceof Symbol||r.push(t)}return r},ot=(...e)=>{console.log(...oe(e))},or=(...e)=>{console.warn(...oe(e))},on=e=>({[Symbol.iterator](){return this},next:e}),oi=(e,t)=>on(()=>{let r;do r=e.next();while(!r.done&&!t(r.value));return r}),ol=(e,t)=>on(()=>{let{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}}),os=Object.assign,oo=Object.keys;Object.values;let oa=(e,t)=>{for(let r in e)t(e[r],r)},ou=e=>oo(e).length,oc=e=>{for(let t in e)return!1;return!0},od=(e,t)=>{for(let r in e)if(!t(e[r],r))return!1;return!0},oh=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),of=(e,t)=>e===t||ou(e)===ou(t)&&od(e,(e,r)=>(void 0!==e||oh(t,r))&&t[r]===e),op=Object.freeze,og=e=>{for(let t in e){let r=e[t];("object"==typeof r||"function"==typeof r)&&og(e[t])}return op(e)};class om{constructor(e,t){this.clock=e,this.len=t}}class o_{constructor(){this.clients=new Map}}let oy=(e,t,r)=>t.clients.forEach((t,n)=>{let i=e.doc.store.clients.get(n);if(null!=i){let n=i[i.length-1],l=n.id.clock+n.length;for(let n=0,s=t[n];n<t.length&&s.clock<l;s=t[++n])aT(e,i,s.clock,s.len,r)}}),ob=(e,t)=>{let r=0,n=e.length-1;for(;r<=n;){let i=lj((r+n)/2),l=e[i],s=l.clock;if(s<=t){if(t<s+l.len)return i;r=i+1}else n=i-1}return null},ox=(e,t)=>{let r=e.clients.get(t.client);return void 0!==r&&null!==ob(r,t.clock)},ov=e=>{e.clients.forEach(e=>{let t,r;for(e.sort((e,t)=>e.clock-t.clock),t=1,r=1;t<e.length;t++){let n=e[r-1],i=e[t];n.clock+n.len>=i.clock?n.len=lL(n.len,i.clock+i.len-n.clock):(r<t&&(e[r]=i),r++)}e.length=r})},ow=e=>{let t=new o_;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){let l=n.slice();for(let t=r+1;t<e.length;t++)lP(l,e[t].clients.get(i)||[]);t.clients.set(i,l)}});return ov(t),t},oS=(e,t,r,n)=>{lE(e.clients,t,()=>[]).push(new om(r,n))},oE=()=>new o_,oC=e=>{let t=oE();return e.clients.forEach((e,r)=>{let n=[];for(let t=0;t<e.length;t++){let r=e[t];if(r.deleted){let i=r.id.clock,l=r.length;if(t+1<e.length)for(let r=e[t+1];t+1<e.length&&r.deleted;r=e[++t+1])l+=r.length;n.push(new om(i,l))}}n.length>0&&t.clients.set(r,n)}),t},ok=(e,t)=>{l1(e.restEncoder,t.clients.size),lN(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{e.resetDsCurVal(),l1(e.restEncoder,t);let n=r.length;l1(e.restEncoder,n);for(let t=0;t<n;t++){let n=r[t];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},oT=e=>{let t=new o_,r=sw(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();let r=sw(e.restDecoder),n=sw(e.restDecoder);if(n>0){let i=lE(t.clients,r,()=>[]);for(let t=0;t<n;t++)i.push(new om(e.readDsClock(),e.readDsLen()))}}return t},oP=(e,t,r)=>{let n=new o_,i=sw(e.restDecoder);for(let l=0;l<i;l++){e.resetDsCurVal();let i=sw(e.restDecoder),l=sw(e.restDecoder),s=r.clients.get(i)||[],o=ab(r,i);for(let r=0;r<l;r++){let r=e.readDsClock(),l=r+e.readDsLen();if(r<o){o<l&&oS(n,i,o,l-o);let e=av(s,r),a=s[e];for(!a.deleted&&a.id.clock<r&&(s.splice(e+1,0,ci(t,a,r-a.id.clock)),e++);e<s.length;)if((a=s[e++]).id.clock<l)a.deleted||(l<a.id.clock+a.length&&s.splice(e,0,ci(t,a,l-a.id.clock)),a.delete(t));else break}else oS(n,i,r,l-r)}}if(n.clients.size>0){let e=new oL;return l1(e.restEncoder,0),ok(e,n),e.toUint8Array()}return null};class oN extends lD{constructor({guid:e=sI(),collectionid:t=null,gc:r=!0,gcFilter:n=()=>!0,meta:i=null,autoLoad:l=!1,shouldLoad:s=!0}={}){super(),this.gc=r,this.gcFilter=n,this.clientID=sj(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new a_,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=l,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=sM(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let o=()=>sM(e=>{let t=r=>{(void 0===r||!0===r)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=o()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=o()}load(){let e=this._item;null===e||this.shouldLoad||aI(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(lN(this.subdocs).map(e=>e.guid))}transact(e,t=null){return aI(this,e,t)}get(e,t=a7){let r=lE(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),n=r.constructor;if(t!==a7&&n!==t)if(n===a7){let n=new t;n._map=r._map,r._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=n}),n._start=r._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=r._length,this.share.set(e,n),n._integrate(this,null),n}else throw Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,ub)}getText(e=""){return this.get(e,uF)}getMap(e=""){return this.get(e,uv)}getXmlElement(e=""){return this.get(e,uz)}getXmlFragment(e=""){return this.get(e,uU)}toJSON(){let e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,lN(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new oN({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,aI(e.parent.doc,r=>{let n=t.doc;e.deleted||r.subdocsAdded.add(n),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class oR{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return sw(this.restDecoder)}readDsLen(){return sw(this.restDecoder)}}class oO extends oR{readLeftID(){return o9(sw(this.restDecoder),sw(this.restDecoder))}readRightID(){return o9(sw(this.restDecoder),sw(this.restDecoder))}readClient(){return sw(this.restDecoder)}readInfo(){return sv(this.restDecoder)}readString(){return sE(this.restDecoder)}readParentInfo(){return 1===sw(this.restDecoder)}readTypeRef(){return sw(this.restDecoder)}readLen(){return sw(this.restDecoder)}readAny(){return sT(this.restDecoder)}readBuf(){return sY(sx(this.restDecoder))}readJSON(){return JSON.parse(sE(this.restDecoder))}readKey(){return sE(this.restDecoder)}}class oD{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=sw(this.restDecoder),this.dsCurrVal}readDsLen(){let e=sw(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class oA extends oD{constructor(e){super(e),this.keys=[],sw(e),this.keyClockDecoder=new sR(sx(e)),this.clientDecoder=new sN(sx(e)),this.leftClockDecoder=new sR(sx(e)),this.rightClockDecoder=new sR(sx(e)),this.infoDecoder=new sP(sx(e),sv),this.stringDecoder=new sO(sx(e)),this.parentInfoDecoder=new sP(sx(e),sv),this.typeRefDecoder=new sN(sx(e)),this.lenDecoder=new sN(sx(e))}readLeftID(){return new o5(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new o5(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return sT(this.restDecoder)}readBuf(){return sx(this.restDecoder)}readJSON(){return sT(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}}class oj{constructor(){this.restEncoder=lG()}toUint8Array(){return lQ(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){l1(this.restEncoder,e)}writeDsLen(e){l1(this.restEncoder,e)}}class oI extends oj{writeLeftID(e){l1(this.restEncoder,e.client),l1(this.restEncoder,e.clock)}writeRightID(e){l1(this.restEncoder,e.client),l1(this.restEncoder,e.clock)}writeClient(e){l1(this.restEncoder,e)}writeInfo(e){l0(this.restEncoder,e)}writeString(e){l3(this.restEncoder,e)}writeParentInfo(e){l1(this.restEncoder,+!!e)}writeTypeRef(e){l1(this.restEncoder,e)}writeLen(e){l1(this.restEncoder,e)}writeAny(e){si(this.restEncoder,e)}writeBuf(e){l6(this.restEncoder,e)}writeJSON(e){l3(this.restEncoder,JSON.stringify(e))}writeKey(e){l3(this.restEncoder,e)}}class oM{constructor(){this.restEncoder=lG(),this.dsCurrVal=0}toUint8Array(){return lQ(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,l1(this.restEncoder,t)}writeDsLen(e){0===e&&sf(),l1(this.restEncoder,e-1),this.dsCurrVal+=e}}class oL extends oM{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new su,this.clientEncoder=new so,this.leftClockEncoder=new su,this.rightClockEncoder=new su,this.infoEncoder=new sl(l0),this.stringEncoder=new sc,this.parentInfoEncoder=new sl(l0),this.typeRefEncoder=new so,this.lenEncoder=new so}toUint8Array(){let e=lG();return l1(e,0),l6(e,this.keyClockEncoder.toUint8Array()),l6(e,this.clientEncoder.toUint8Array()),l6(e,this.leftClockEncoder.toUint8Array()),l6(e,this.rightClockEncoder.toUint8Array()),l6(e,lQ(this.infoEncoder)),l6(e,this.stringEncoder.toUint8Array()),l6(e,lQ(this.parentInfoEncoder)),l6(e,this.typeRefEncoder.toUint8Array()),l6(e,this.lenEncoder.toUint8Array()),l5(e,lQ(this.restEncoder)),lQ(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){si(this.restEncoder,e)}writeBuf(e){l6(this.restEncoder,e)}writeJSON(e){si(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let oF=(e,t,r,n)=>{n=lL(n,t[0].id.clock);let i=av(t,n);l1(e.restEncoder,t.length-i),e.writeClient(r),l1(e.restEncoder,n);let l=t[i];l.write(e,n-l.id.clock);for(let r=i+1;r<t.length;r++)t[r].write(e,0)},oB=(e,t,r)=>{let n=new Map;r.forEach((e,r)=>{ab(t,r)>e&&n.set(r,e)}),ay(t).forEach((e,t)=>{r.has(t)||n.set(t,0)}),l1(e.restEncoder,n.size),lN(n.entries()).sort((e,t)=>t[0]-e[0]).forEach(([r,n])=>{oF(e,t.clients.get(r),r,n)})},oU=(e,t)=>{let r=lw(),n=sw(e.restDecoder);for(let i=0;i<n;i++){let n=sw(e.restDecoder),i=Array(n),l=e.readClient(),s=sw(e.restDecoder);r.set(l,{i:0,refs:i});for(let r=0;r<n;r++){let n=e.readInfo();switch(31&n){case 0:{let t=e.readLen();i[r]=new u$(o9(l,s),t),s+=t;break}case 10:{let t=sw(e.restDecoder);i[r]=new cc(o9(l,s),t),s+=t;break}default:{let o=(192&n)==0,a=new co(o9(l,s),null,(128&n)==128?e.readLeftID():null,null,(64&n)==64?e.readRightID():null,o?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,o&&(32&n)==32?e.readString():null,ca(e,n));i[r]=a,s+=a.length}}}}return r},oz=(e,t,r)=>{let n=[],i=lN(r.keys()).sort((e,t)=>e-t);if(0===i.length)return null;let l=()=>{if(0===i.length)return null;let e=r.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=r.get(i[i.length-1])}return e},s=l();if(null===s)return null;let o=new a_,a=new Map,u=(e,t)=>{let r=a.get(e);(null==r||r>t)&&a.set(e,t)},c=s.refs[s.i++],d=new Map,h=()=>{for(let e of n){let t=e.id.client,n=r.get(t);n?(n.i--,o.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):o.clients.set(t,[e]),i=i.filter(e=>e!==t)}n.length=0};for(;;){if(c.constructor!==cc){let i=lE(d,c.id.client,()=>ab(t,c.id.client))-c.id.clock;if(i<0)n.push(c),u(c.id.client,c.id.clock-1),h();else{let l=c.getMissing(e,t);if(null!==l){n.push(c);let e=r.get(l)||{refs:[],i:0};if(e.refs.length===e.i)u(l,ab(t,l)),h();else{c=e.refs[e.i++];continue}}else(0===i||i<c.length)&&(c.integrate(e,i),d.set(c.id.client,c.id.clock+c.length))}}if(n.length>0)c=n.pop();else if(null!==s&&s.i<s.refs.length)c=s.refs[s.i++];else{if(null===(s=l()))break;c=s.refs[s.i++]}}if(o.clients.size>0){let e=new oL;return oB(e,o,new Map),l1(e.restEncoder,0),{missing:a,update:e.toUint8Array()}}return null},oW=(e,t)=>oB(e,t.doc.store,t.beforeState),oH=(e,t,r,n=new oA(e))=>aI(t,e=>{e.local=!1;let t=!1,r=e.doc,i=r.store,l=oz(e,i,oU(n,r)),s=i.pendingStructs;if(s){for(let[e,r]of s.missing)if(r<ab(i,e)){t=!0;break}if(l){for(let[e,t]of l.missing){let r=s.missing.get(e);(null==r||r>t)&&s.missing.set(e,t)}s.update=aK([s.update,l.update])}}else i.pendingStructs=l;let o=oP(n,e,i);if(i.pendingDs){let t=new oA(s_(i.pendingDs));sw(t.restDecoder);let r=oP(t,e,i);o&&r?i.pendingDs=aK([o,r]):i.pendingDs=o||r}else i.pendingDs=o;if(t){let t=i.pendingStructs.update;i.pendingStructs=null,oK(e.doc,t)}},r,!1),oK=(e,t,r,n=oA)=>{let i=s_(t);oH(i,e,r,new n(i))},oV=(e,t,r)=>oK(e,t,r,oO),o$=(e,t,r=new Map)=>{oB(e,t.store,r),ok(e,oC(t.store))},oX=(e,t=new Uint8Array([0]),r=new oL)=>{o$(r,e,oG(t));let n=[r.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(aV(e.store.pendingStructs.update,t)),n.length>1){if(r.constructor===oI)return aW(n.map((e,t)=>0===t?e:aG(e)));else if(r.constructor===oL)return aK(n)}return n[0]},oq=(e,t)=>oX(e,t,new oI),oJ=e=>{let t=new Map,r=sw(e.restDecoder);for(let n=0;n<r;n++){let r=sw(e.restDecoder),n=sw(e.restDecoder);t.set(r,n)}return t},oG=e=>oJ(new oR(s_(e))),oY=(e,t)=>(l1(e.restEncoder,t.size),lN(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{l1(e.restEncoder,t),l1(e.restEncoder,r)}),e),oQ=(e,t)=>oY(e,ay(t.store)),oZ=(e,t=new oM)=>(e instanceof Map?oY(t,e):oQ(t,e),t.toUint8Array()),o0=e=>oZ(e,new oj);class o1{constructor(){this.l=[]}}let o2=()=>new o1,o4=(e,t)=>e.l.push(t),o8=(e,t)=>{let r=e.l,n=r.length;e.l=r.filter(e=>t!==e),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},o3=(e,t,r)=>sz(e.l,[t,r]);class o5{constructor(e,t){this.client=e,this.clock=t}}let o6=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,o9=(e,t)=>new o5(e,t),o7=e=>{for(let[t,r]of e.doc.share.entries())if(r===e)return t;throw sf()},ae=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class at{constructor(e,t=e.getMap("users")){let r=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=r;let n=(e,t)=>{let r=e.get("ds"),n=e.get("ids"),i=e=>this.clients.set(e,t);r.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,ow([this.dss.get(t)||oE(),oT(new oR(s_(e)))]))})})}),this.dss.set(t,ow(r.map(e=>oT(new oR(s_(e)))))),n.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(i))),n.forEach(i)};t.observe(e=>{e.keysChanged.forEach(e=>n(t.get(e),e))}),t.forEach(n)}setUserMapping(e,t,r,{filter:n=()=>!0}={}){let i=this.yusers,l=i.get(r);l||((l=new uv).set("ids",new ub),l.set("ds",new ub),i.set(r,l)),l.get("ids").push([t]),i.observe(e=>{setTimeout(()=>{let e=i.get(r);if(e!==l){l=e,this.clients.forEach((e,t)=>{r===e&&l.get("ids").push([t])});let t=new oj,n=this.dss.get(r);n&&(ok(t,n),l.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{let t=l.get("ds"),r=e.deleteSet;if(e.local&&r.clients.size>0&&n(e,r)){let e=new oj;ok(e,r),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[t,r]of this.dss.entries())if(ox(r,e))return t;return null}}class ar{constructor(e,t,r,n=0){this.type=e,this.tname=t,this.item=r,this.assoc=n}}class an{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}}let ai=(e,t,r=0)=>new an(e,t,r),al=(e,t,r)=>{let n=null,i=null;return null===e._item?i=o7(e):n=o9(e._item.id.client,e._item.id.clock),new ar(n,i,t,r)},as=(e,t,r=0)=>{let n=e._start;if(r<0){if(0===t)return al(e,null,r);t--}for(;null!==n;){if(!n.deleted&&n.countable){if(n.length>t)return al(e,o9(n.id.client,n.id.clock+t),r);t-=n.length}if(null===n.right&&r<0)return al(e,n.lastId,r);n=n.right}return al(e,null,r)},ao=(e,t)=>{let r=aw(e,t),n=t.clock-r.id.clock;return{item:r,diff:n}},aa=(e,t,r=!0)=>{let n=t.store,i=e.item,l=e.type,s=e.tname,o=e.assoc,a=null,u=0;if(null!==i){if(ab(n,i.client)<=i.clock)return null;let e=r?cr(n,i):ao(n,i),t=e.item;if(!(t instanceof co))return null;if(null===(a=t.parent)._item||!a._item.deleted){u=t.deleted||!t.countable?0:e.diff+(o>=0?0:1);let r=t.left;for(;null!==r;)!r.deleted&&r.countable&&(u+=r.length),r=r.left}}else{if(null!==s)a=t.get(s);else if(null!==l){if(ab(n,l.client)<=l.clock)return null;let{item:e}=r?cr(n,l):{item:aw(n,l)};if(!(e instanceof co)||!(e.content instanceof ct))return null;a=e.content.type}else throw sf();u=o>=0?a._length:0}return ai(a,u,e.assoc)},au=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&o6(e.item,t.item)&&o6(e.type,t.type)&&e.assoc===t.assoc;class ac{constructor(e,t){this.ds=e,this.sv=t}}let ad=(e,t=new oM)=>(ok(t,e.ds),oY(t,e.sv),t.toUint8Array()),ah=e=>ad(e,new oj),af=(e,t)=>new ac(e,t);af(oE(),new Map);let ap=e=>af(oC(e.store),ay(e.store)),ag=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ox(t.ds,e.id),am=(e,t)=>{let r=lE(e.meta,am,lk),n=e.doc.store;r.has(t)||(t.sv.forEach((t,r)=>{t<ab(n,r)&&aE(e,o9(r,t))}),oy(e,t.ds,e=>{}),r.add(t))};class a_{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let ay=e=>{let t=new Map;return e.clients.forEach((e,r)=>{let n=e[e.length-1];t.set(r,n.id.clock+n.length)}),t},ab=(e,t)=>{let r=e.clients.get(t);if(void 0===r)return 0;let n=r[r.length-1];return n.id.clock+n.length},ax=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{let e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw sf()}r.push(t)},av=(e,t)=>{let r=0,n=e.length-1,i=e[n],l=i.id.clock;if(l===t)return n;let s=lj(t/(l+i.length-1)*n);for(;r<=n;){if((l=(i=e[s]).id.clock)<=t){if(t<l+i.length)return s;r=s+1}else n=s-1;s=lj((r+n)/2)}throw sf()},aw=(e,t)=>{let r=e.clients.get(t.client);return r[av(r,t.clock)]},aS=(e,t,r)=>{let n=av(t,r),i=t[n];return i.id.clock<r&&i instanceof co?(t.splice(n+1,0,ci(e,i,r-i.id.clock)),n+1):n},aE=(e,t)=>{let r=e.doc.store.clients.get(t.client);return r[aS(e,r,t.clock)]},aC=(e,t,r)=>{let n=t.clients.get(r.client),i=av(n,r.clock),l=n[i];return r.clock!==l.id.clock+l.length-1&&l.constructor!==u$&&n.splice(i+1,0,ci(e,l,r.clock-l.id.clock+1)),l},ak=(e,t,r)=>{let n=e.clients.get(t.id.client);n[av(n,t.id.clock)]=r},aT=(e,t,r,n,i)=>{let l;if(0===n)return;let s=r+n,o=aS(e,t,r);do s<(l=t[o++]).id.clock+l.length&&aS(e,t,s),i(l);while(o<t.length&&t[o].id.clock<s)};class aP{constructor(e,t,r){this.doc=e,this.deleteSet=new o_,this.beforeState=ay(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let aN=(e,t)=>(0!==t.deleteSet.clients.size||!!lC(t.afterState,(e,r)=>t.beforeState.get(r)!==e))&&(ov(t.deleteSet),oW(e,t),ok(e,t.deleteSet),!0),aR=(e,t,r)=>{let n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&lE(e.changed,t,lk).add(r)},aO=(e,t)=>{let r=e[t],n=e[t-1],i=t;for(;i>0;r=n,n=e[--i-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof co&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let l=t-i;return l&&e.splice(t+1-l,l),l},aD=(e,t,r)=>{for(let[n,i]of e.clients.entries()){let e=t.clients.get(n);for(let n=i.length-1;n>=0;n--){let l=i[n],s=l.clock+l.len;for(let n=av(e,l.clock),i=e[n];n<e.length&&i.id.clock<s;i=e[++n]){let i=e[n];if(l.clock+l.len<=i.id.clock)break;i instanceof co&&i.deleted&&!i.keep&&r(i)&&i.gc(t,!1)}}}},aA=(e,t)=>{e.clients.forEach((e,r)=>{let n=t.clients.get(r);for(let t=e.length-1;t>=0;t--){let r=e[t],i=lM(n.length-1,1+av(n,r.clock+r.len-1));for(let e=i,t=n[e];e>0&&t.id.clock>=r.clock;t=n[e])e-=1+aO(n,e)}})},aj=(e,t)=>{if(t<e.length){let r=e[t],n=r.doc,i=n.store,l=r.deleteSet,s=r._mergeStructs;try{ov(l),r.afterState=ay(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let e=[];r.changed.forEach((t,n)=>e.push(()=>{null!==n._item&&n._item.deleted||n._callObserver(r,t)})),e.push(()=>{r.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),o3(t._dEH,e,r))})}),e.push(()=>n.emit("afterTransaction",[r,n])),sz(e,[]),r._needFormattingCleanup&&uI(r)}finally{n.gc&&aD(l,i,n.gcFilter),aA(l,i),r.afterState.forEach((e,t)=>{let n=r.beforeState.get(t)||0;if(n!==e){let e=i.clients.get(t),r=lL(av(e,n),1);for(let t=e.length-1;t>=r;)t-=1+aO(e,t)}});for(let e=s.length-1;e>=0;e--){let{client:t,clock:r}=s[e].id,n=i.clients.get(t),l=av(n,r);!(l+1<n.length&&aO(n,l+1)>1)&&l>0&&aO(n,l)}if(r.local||r.afterState.get(n.clientID)===r.beforeState.get(n.clientID)||(ot(s6,s0,"[yjs] ",s1,s3,"Changed the client-id because another client seems to be using it."),n.clientID=sj()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let e=new oI;aN(e,r)&&n.emit("update",[e.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let e=new oL;aN(e,r)&&n.emit("updateV2",[e.toUint8Array(),r.origin,n,r])}let{subdocsAdded:o,subdocsLoaded:a,subdocsRemoved:u}=r;(o.size>0||u.size>0||a.size>0)&&(o.forEach(e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)}),u.forEach(e=>n.subdocs.delete(e)),n.emit("subdocs",[{loaded:a,added:o,removed:u},n,r]),u.forEach(e=>e.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):aj(e,t+1)}}},aI=(e,t,r=null,n=!0)=>{let i=e._transactionCleanups,l=!1,s=null;null===e._transaction&&(l=!0,e._transaction=new aP(e,r,n),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(l){let t=e._transaction===i[0];e._transaction=null,t&&aj(i,0)}}return s};class aM{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}let aL=(e,t,r)=>{oy(e,r.deletions,r=>{r instanceof co&&t.scope.some(t=>t===e.doc||ae(t,r))&&cn(r,!1)})},aF=(e,t,r)=>{let n=null,i=e.doc,l=e.scope;aI(i,r=>{for(;t.length>0&&null===e.currStackItem;){let n=i.store,s=t.pop(),o=new Set,a=[],u=!1;oy(r,s.insertions,e=>{if(e instanceof co){if(null!==e.redone){let{item:t,diff:i}=cr(n,e.id);i>0&&(t=aE(r,o9(t.id.client,t.id.clock+i))),e=t}!e.deleted&&l.some(t=>t===r.doc||ae(t,e))&&a.push(e)}}),oy(r,s.deletions,e=>{e instanceof co&&l.some(t=>t===r.doc||ae(t,e))&&!ox(s.insertions,e.id)&&o.add(e)}),o.forEach(t=>{u=null!==cs(r,t,o,s.insertions,e.ignoreRemoteMapChanges,e)||u});for(let t=a.length-1;t>=0;t--){let n=a[t];e.deleteFilter(n)&&(n.delete(r),u=!0)}e.currStackItem=u?s:null}r.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),n=r},e);let s=e.currStackItem;if(null!=s){let t=n.changedParentTypes;e.emit("stack-item-popped",[{stackItem:s,type:r,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return s};class aB extends lD{constructor(e,{captureTimeout:t=500,captureTransaction:r=e=>!0,deleteFilter:n=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:l=!1,doc:s=lO(e)?e[0].doc:e instanceof oN?e:e.doc}={}){super(),this.scope=[],this.doc=s,this.addToScope(e),this.deleteFilter=n,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=l,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;let t=this.undoing,r=this.redoing,n=t?this.redoStack:this.undoStack;t?this.stopCapturing():r||this.clear(!1,!0);let i=new o_;e.afterState.forEach((t,r)=>{let n=e.beforeState.get(r)||0,l=t-n;l>0&&oS(i,r,n,l)});let l=sZ(),s=!1;if(this.lastChange>0&&l-this.lastChange<this.captureTimeout&&n.length>0&&!t&&!r){let t=n[n.length-1];t.deletions=ow([t.deletions,e.deleteSet]),t.insertions=ow([t.insertions,i])}else n.push(new aM(e.deleteSet,i)),s=!0;t||r||(this.lastChange=l),oy(e,e.deleteSet,t=>{t instanceof co&&this.scope.some(r=>r===e.doc||ae(r,t))&&cn(t,!0)});let o=[{stackItem:n[n.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];s?this.emit("stack-item-added",o):this.emit("stack-item-updated",o)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){let t=new Set(this.scope);(e=lO(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof a7?e.doc!==this.doc:e!==this.doc)&&or("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(e=>aL(r,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>aL(r,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=aF(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=aF(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class aU{constructor(e,t){this.gen=function*(e){let t=sw(e.restDecoder);for(let r=0;r<t;r++){let t=sw(e.restDecoder),r=e.readClient(),n=sw(e.restDecoder);for(let i=0;i<t;i++){let t=e.readInfo();if(10===t){let t=sw(e.restDecoder);yield new cc(o9(r,n),t),n+=t}else if((31&t)!=0){let i=(192&t)==0,l=new co(o9(r,n),null,(128&t)==128?e.readLeftID():null,null,(64&t)==64?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(32&t)==32?e.readString():null,ca(e,t));yield l,n+=l.length}else{let t=e.readLen();yield new u$(o9(r,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===cc);return this.curr}}class az{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let aW=e=>aK(e,oO,oI),aH=(e,t)=>{if(e.constructor===u$){let{client:r,clock:n}=e.id;return new u$(o9(r,n+t),e.length-t)}if(e.constructor===cc){let{client:r,clock:n}=e.id;return new cc(o9(r,n+t),e.length-t)}{let{client:r,clock:n}=e.id;return new co(o9(r,n+t),null,o9(r,n+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},aK=(e,t=oA,r=oL)=>{if(1===e.length)return e[0];let n=e.map(e=>new t(s_(e))),i=n.map(e=>new aU(e,!0)),l=null,s=new r,o=new az(s);for(;(i=i.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let r=e.curr.id.clock-t.curr.id.clock;return 0===r?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===cc?1:-1:r}}),0!==i.length;){let e=i[0],t=e.curr.id.client;if(null!==l){let r=e.curr,n=!1;for(;null!==r&&r.id.clock+r.length<=l.struct.id.clock+l.struct.length&&r.id.client>=l.struct.id.client;)r=e.next(),n=!0;if(null===r||r.id.client!==t||n&&r.id.clock>l.struct.id.clock+l.struct.length)continue;if(t!==l.struct.id.client)aX(o,l.struct,l.offset),l={struct:r,offset:0},e.next();else if(l.struct.id.clock+l.struct.length<r.id.clock)if(l.struct.constructor===cc)l.struct.length=r.id.clock+r.length-l.struct.id.clock;else{aX(o,l.struct,l.offset);let e=r.id.clock-l.struct.id.clock-l.struct.length;l={struct:new cc(o9(t,l.struct.id.clock+l.struct.length),e),offset:0}}else{let t=l.struct.id.clock+l.struct.length-r.id.clock;t>0&&(l.struct.constructor===cc?l.struct.length-=t:r=aH(r,t)),l.struct.mergeWith(r)||(aX(o,l.struct,l.offset),l={struct:r,offset:0},e.next())}}else l={struct:e.curr,offset:0},e.next();for(let r=e.curr;null!==r&&r.id.client===t&&r.id.clock===l.struct.id.clock+l.struct.length&&r.constructor!==cc;r=e.next())aX(o,l.struct,l.offset),l={struct:r,offset:0}}return null!==l&&(aX(o,l.struct,l.offset),l=null),aq(o),ok(s,ow(n.map(e=>oT(e)))),s.toUint8Array()},aV=(e,t,r=oA,n=oL)=>{let i=oG(t),l=new n,s=new az(l),o=new r(s_(e)),a=new aU(o,!1);for(;a.curr;){let e=a.curr,t=e.id.client,r=i.get(t)||0;if(a.curr.constructor===cc){a.next();continue}if(e.id.clock+e.length>r)for(aX(s,e,lL(r-e.id.clock,0)),a.next();a.curr&&a.curr.id.client===t;)aX(s,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===t&&a.curr.id.clock+a.curr.length<=r;)a.next()}return aq(s),ok(l,oT(o)),l.toUint8Array()},a$=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:lQ(e.encoder.restEncoder)}),e.encoder.restEncoder=lG(),e.written=0)},aX=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&a$(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),l1(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},aq=e=>{a$(e);let t=e.encoder.restEncoder;l1(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){let n=e.clientStructs[r];l1(t,n.written),l5(t,n.restEncoder)}},aJ=(e,t,r,n)=>{let i=new r(s_(e)),l=new aU(i,!1),s=new n,o=new az(s);for(let e=l.curr;null!==e;e=l.next())aX(o,t(e),0);return aq(o),ok(s,oT(i)),s.toUint8Array()},aG=e=>aJ(e,sW,oA,oI),aY="You must not compute changes after the event-handler fired.";class aQ{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=aZ(this.currentTarget,this.target))}deletes(e){return ox(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw sd(aY);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){let n,i,l=t._map.get(r);if(this.adds(l)){let e=l.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(l))if(!(null!==e&&this.deletes(e)))return;else n="delete",i=lT(e.content.getContent());else null!==e&&this.deletes(e)?(n="update",i=lT(e.content.getContent())):(n="add",i=void 0)}else{if(!this.deletes(l))return;n="delete",i=lT(l.content.getContent())}e.set(r,{action:n,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw sd(aY);let t=this.target,r=lk(),n=lk(),i=[];if(e={added:r,deleted:n,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,l=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&((null===e||void 0===e.delete)&&(l(),e={delete:0}),e.delete+=i.length,n.add(i)):this.adds(i)?((null===e||void 0===e.insert)&&(l(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),r.add(i)):((null===e||void 0===e.retain)&&(l(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&l()}this._changes=e}return e}}let aZ=(e,t)=>{let r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)!n.deleted&&n.countable&&(e+=n.length),n=n.right;r.unshift(e)}t=t._item.parent}return r},a0=()=>{or("Invalid access: Add Yjs type to a document before reading data.")},a1=0;class a2{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=a1++}}let a4=e=>{e.timestamp=a1++},a8=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=a1++},a3=(e,t,r)=>{if(e.length>=80){let n=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return a8(n,t,r),n}{let n=new a2(t,r);return e.push(n),n}},a5=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,r)=>lI(t-e.index)<lI(t-r.index)?e:r),n=e._start,i=0;for(null!==r&&(n=r.p,i=r.index,a4(r));null!==n.right&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;null!==n.left&&i>t;)!(n=n.left).deleted&&n.countable&&(i-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)!(n=n.left).deleted&&n.countable&&(i-=n.length);return null!==r&&lI(r.index-i)<n.parent.length/80?(a8(r,n,i),r):a3(e._searchMarker,n,i)},a6=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){let i=e[n];if(r>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}i.p=t,t.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=lL(t,i.index+r))}},a9=(e,t,r)=>{let n=e,i=t.changedParentTypes;for(;lE(i,e,()=>[]).push(r),null!==e._item;)e=e._item.parent;o3(n._eH,r,t)};class a7{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=o2(),this._dEH=o2(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw sh()}clone(){throw sh()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){o4(this._eH,e)}observeDeep(e){o4(this._dEH,e)}unobserve(e){o8(this._eH,e)}unobserveDeep(e){o8(this._dEH,e)}toJSON(){}}let ue=(e,t,r)=>{e.doc??a0(),t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t,i=[],l=e._start;for(;null!==l&&n>0;){if(l.countable&&!l.deleted){let e=l.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&n>0;r++)i.push(e[r]),n--;t=0}}l=l.right}return i},ut=e=>{e.doc??a0();let t=[],r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){let e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},ur=(e,t)=>{let r=0,n=e._start;for(e.doc??a0();null!==n;){if(n.countable&&!n.deleted){let i=n.content.getContent();for(let n=0;n<i.length;n++)t(i[n],r++,e)}n=n.right}},un=(e,t)=>{let r=[];return ur(e,(n,i)=>{r.push(t(n,i,e))}),r},ui=e=>{let t=e._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(null===r){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};r=t.content.getContent(),n=0,t=t.right}let e=r[n++];return r.length<=n&&(r=null),{done:!1,value:e}}}},ul=(e,t)=>{e.doc??a0();let r=a5(e,t),n=e._start;for(null!==r&&(n=r.p,t-=r.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},us=(e,t,r,n)=>{let i=r,l=e.doc,s=l.clientID,o=l.store,a=null===r?t._start:r.right,u=[],c=()=>{u.length>0&&((i=new co(o9(s,ab(o,s)),i,i&&i.lastId,a,a&&a.id,t,null,new u1(u))).integrate(e,0),u=[])};n.forEach(r=>{if(null===r)u.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(r);break;default:switch(c(),r.constructor){case Uint8Array:case ArrayBuffer:(i=new co(o9(s,ab(o,s)),i,i&&i.lastId,a,a&&a.id,t,null,new uX(new Uint8Array(r)))).integrate(e,0);break;case oN:(i=new co(o9(s,ab(o,s)),i,i&&i.lastId,a,a&&a.id,t,null,new uG(r))).integrate(e,0);break;default:if(r instanceof a7)(i=new co(o9(s,ab(o,s)),i,i&&i.lastId,a,a&&a.id,t,null,new ct(r))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),c()},uo=()=>sd("Length exceeded!"),ua=(e,t,r,n)=>{if(r>t._length)throw uo();if(0===r)return t._searchMarker&&a6(t._searchMarker,r,n.length),us(e,t,null,n);let i=r,l=a5(t,r),s=t._start;for(null!==l&&(s=l.p,0==(r-=l.index)&&(r+=(s=s.prev)&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(r<=s.length){r<s.length&&aE(e,o9(s.id.client,s.id.clock+r));break}r-=s.length}return t._searchMarker&&a6(t._searchMarker,i,n.length),us(e,t,s,n)},uu=(e,t,r)=>{let n=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;return us(e,t,n,r)},uc=(e,t,r,n)=>{if(0===n)return;let i=r,l=n,s=a5(t,r),o=t._start;for(null!==s&&(o=s.p,r-=s.index);null!==o&&r>0;o=o.right)!o.deleted&&o.countable&&(r<o.length&&aE(e,o9(o.id.client,o.id.clock+r)),r-=o.length);for(;n>0&&null!==o;)o.deleted||(n<o.length&&aE(e,o9(o.id.client,o.id.clock+n)),o.delete(e),n-=o.length),o=o.right;if(n>0)throw uo();t._searchMarker&&a6(t._searchMarker,i,-l+n)},ud=(e,t,r)=>{let n=t._map.get(r);void 0!==n&&n.delete(e)},uh=(e,t,r,n)=>{let i,l=t._map.get(r)||null,s=e.doc,o=s.clientID;if(null==n)i=new u1([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:i=new u1([n]);break;case Uint8Array:i=new uX(n);break;case oN:i=new uG(n);break;default:if(n instanceof a7)i=new ct(n);else throw Error("Unexpected content type")}new co(o9(o,ab(s.store,o)),l,l&&l.lastId,null,null,t,r,i).integrate(e,0)},uf=(e,t)=>{e.doc??a0();let r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},up=e=>{let t={};return e.doc??a0(),e._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},ug=(e,t)=>{e.doc??a0();let r=e._map.get(t);return void 0!==r&&!r.deleted},um=(e,t)=>{let r={};return e._map.forEach((e,n)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&ag(i,t)&&(r[n]=i.content.getContent()[i.length-1])}),r},u_=e=>(e.doc??a0(),oi(e._map.entries(),e=>!e[1].deleted));class uy extends aQ{}class ub extends a7{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new ub;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ub}clone(){let e=new ub;return e.insert(0,this.toArray().map(e=>e instanceof a7?e.clone():e)),e}get length(){return this.doc??a0(),this._length}_callObserver(e,t){super._callObserver(e,t),a9(this,e,new uy(this,e))}insert(e,t){null!==this.doc?aI(this.doc,r=>{ua(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?aI(this.doc,t=>{uu(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?aI(this.doc,r=>{uc(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return ul(this,e)}toArray(){return ut(this)}slice(e=0,t=this.length){return ue(this,e,t)}toJSON(){return this.map(e=>e instanceof a7?e.toJSON():e)}map(e){return un(this,e)}forEach(e){ur(this,e)}[Symbol.iterator](){return ui(this)}_write(e){e.writeTypeRef(u8)}}class ux extends aQ{constructor(e,t,r){super(e,t),this.keysChanged=r}}class uv extends a7{constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new uv}clone(){let e=new uv;return this.forEach((t,r)=>{e.set(r,t instanceof a7?t.clone():t)}),e}_callObserver(e,t){a9(this,e,new ux(this,e,t))}toJSON(){this.doc??a0();let e={};return this._map.forEach((t,r)=>{if(!t.deleted){let n=t.content.getContent()[t.length-1];e[r]=n instanceof a7?n.toJSON():n}}),e}get size(){return[...u_(this)].length}keys(){return ol(u_(this),e=>e[0])}values(){return ol(u_(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ol(u_(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??a0(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?aI(this.doc,t=>{ud(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?aI(this.doc,r=>{uh(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return uf(this,e)}has(e){return ug(this,e)}clear(){null!==this.doc?aI(this.doc,e=>{this.forEach(function(t,r,n){ud(e,n,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(u3)}}let uw=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&of(e,t);class uS{constructor(e,t,r,n){this.left=e,this.right=t,this.index=r,this.currentAttributes=n}forward(){null===this.right&&sf(),this.right.content.constructor===uQ?this.right.deleted||uT(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let uE=(e,t,r)=>{for(;null!==t.right&&r>0;)t.right.content.constructor===uQ?t.right.deleted||uT(t.currentAttributes,t.right.content):t.right.deleted||(r<t.right.length&&aE(e,o9(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length),t.left=t.right,t.right=t.right.right;return t},uC=(e,t,r,n)=>{let i=new Map,l=n?a5(t,r):null;return l?uE(e,new uS(l.p.left,l.p,l.index,i),r-l.index):uE(e,new uS(null,t._start,0,i),r)},uk=(e,t,r,n)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===uQ&&uw(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let i=e.doc,l=i.clientID;n.forEach((n,s)=>{let o=r.left,a=r.right,u=new co(o9(l,ab(i.store,l)),o,o&&o.lastId,a,a&&a.id,t,null,new uQ(s,n));u.integrate(e,0),r.right=u,r.forward()})},uT=(e,t)=>{let{key:r,value:n}=t;null===n?e.delete(r):e.set(r,n)},uP=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===uQ&&uw(t[e.right.content.key]??null,e.right.content.value));){;e.forward()}},uN=(e,t,r,n)=>{let i=e.doc,l=i.clientID,s=new Map;for(let o in n){let a=n[o],u=r.currentAttributes.get(o)??null;if(!uw(u,a)){s.set(o,u);let{left:n,right:c}=r;r.right=new co(o9(l,ab(i.store,l)),n,n&&n.lastId,c,c&&c.id,t,null,new uQ(o,a)),r.right.integrate(e,0),r.forward()}}return s},uR=(e,t,r,n,i)=>{r.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});let l=e.doc,s=l.clientID;uP(r,i);let o=uN(e,t,r,i),a=n.constructor===String?new u2(n):n instanceof a7?new ct(n):new uY(n),{left:u,right:c,index:d}=r;t._searchMarker&&a6(t._searchMarker,r.index,a.getLength()),(c=new co(o9(s,ab(l.store,s)),u,u&&u.lastId,c,c&&c.id,t,null,a)).integrate(e,0),r.right=c,r.index=d,r.forward(),uk(e,t,r,o)},uO=(e,t,r,n,i)=>{let l=e.doc,s=l.clientID;uP(r,i);let o=uN(e,t,r,i);for(;null!==r.right&&(n>0||o.size>0&&(r.right.deleted||r.right.content.constructor===uQ));){if(!r.right.deleted)if(r.right.content.constructor===uQ){let{key:t,value:l}=r.right.content,s=i[t];if(void 0!==s){if(uw(s,l))o.delete(t);else{if(0===n)break;o.set(t,l)}r.right.delete(e)}else r.currentAttributes.set(t,l)}else n<r.right.length&&aE(e,o9(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;r.forward()}if(n>0){let i="";for(;n>0;n--)i+="\n";r.right=new co(o9(s,ab(l.store,s)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new u2(i)),r.right.integrate(e,0),r.forward()}uk(e,t,r,o)},uD=(e,t,r,n,i)=>{let l=t,s=lw();for(;l&&(!l.countable||l.deleted);){if(!l.deleted&&l.content.constructor===uQ){let e=l.content;s.set(e.key,e)}l=l.right}let o=0,a=!1;for(;t!==l;){if(r===t&&(a=!0),!t.deleted){let r=t.content;if(r.constructor===uQ){let{key:l,value:u}=r,c=n.get(l)??null;(s.get(l)!==r||c===u)&&(t.delete(e),o++,a||(i.get(l)??null)!==u||c===u||(null===c?i.delete(l):i.set(l,c))),a||t.deleted||uT(i,r)}}t=t.right}return o},uA=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let r=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===uQ){let n=t.content.key;r.has(n)?t.delete(e):r.add(n)}t=t.left}},uj=e=>{let t=0;return aI(e.doc,r=>{let n=e._start,i=e._start,l=lw(),s=lS(l);for(;i;)!1===i.deleted&&(i.content.constructor===uQ?uT(s,i.content):(t+=uD(r,n,i,l,s),l=lS(s),n=i)),i=i.right}),t},uI=e=>{let t=new Set,r=e.doc;for(let[n,i]of e.afterState.entries()){let l=e.beforeState.get(n)||0;i!==l&&aT(e,r.store.clients.get(n),l,i,e=>{e.deleted||e.content.constructor!==uQ||e.constructor===u$||t.add(e.parent)})}aI(r,r=>{for(let n of(oy(e,e.deleteSet,e=>{if(e instanceof u$||!e.parent._hasFormatting||t.has(e.parent))return;let n=e.parent;e.content.constructor===uQ?t.add(n):uA(r,e)}),t))uj(n)})},uM=(e,t,r)=>{let n=r,i=lS(t.currentAttributes),l=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case ct:case uY:case u2:r<t.right.length&&aE(e,o9(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}l&&uD(e,l,t.right,i,t.currentAttributes);let s=(t.left||t.right).parent;return s._searchMarker&&a6(s._searchMarker,t.index,-n+r),t};class uL extends aQ{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];aI(e,e=>{let r=new Map,n=new Map,i=this.target._start,l=null,s={},o="",a=0,u=0,c=()=>{if(null!==l){let e=null;switch(l){case"delete":u>0&&(e={delete:u}),u=0;break;case"insert":("object"==typeof o||o.length>0)&&(e={insert:o},r.size>0&&(e.attributes={},r.forEach((t,r)=>{null!==t&&(e.attributes[r]=t)}))),o="";break;case"retain":a>0&&(e={retain:a},oc(s)||(e.attributes=os({},s))),a=0}e&&t.push(e),l=null}};for(;null!==i;){switch(i.content.constructor){case ct:case uY:this.adds(i)?this.deletes(i)||(c(),l="insert",o=i.content.getContent()[0],c()):this.deletes(i)?("delete"!==l&&(c(),l="delete"),u+=1):i.deleted||("retain"!==l&&(c(),l="retain"),a+=1);break;case u2:this.adds(i)?this.deletes(i)||("insert"!==l&&(c(),l="insert"),o+=i.content.str):this.deletes(i)?("delete"!==l&&(c(),l="delete"),u+=i.length):i.deleted||("retain"!==l&&(c(),l="retain"),a+=i.length);break;case uQ:{let{key:t,value:o}=i.content;if(this.adds(i))this.deletes(i)||(uw(r.get(t)??null,o)?null!==o&&i.delete(e):("retain"===l&&c(),uw(o,n.get(t)??null)?delete s[t]:s[t]=o));else if(this.deletes(i)){n.set(t,o);let e=r.get(t)??null;uw(e,o)||("retain"===l&&c(),s[t]=e)}else if(!i.deleted){n.set(t,o);let r=s[t];void 0!==r&&(uw(r,o)?null!==r&&i.delete(e):("retain"===l&&c(),null===o?delete s[t]:s[t]=o))}i.deleted||("insert"===l&&c(),uT(r,i.content))}}i=i.right}for(c();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}}class uF extends a7{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??a0(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new uF}clone(){let e=new uF;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let r=new uL(this,e,t);a9(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??a0();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===u2&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?aI(this.doc,r=>{let n=new uS(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let l=e[i];if(void 0!==l.insert){let s=t||"string"!=typeof l.insert||i!==e.length-1||null!==n.right||"\n"!==l.insert.slice(-1)?l.insert:l.insert.slice(0,-1);("string"!=typeof s||s.length>0)&&uR(r,this,n,s,l.attributes||{})}else void 0!==l.retain?uO(r,this,n,l.retain,l.attributes||{}):void 0!==l.delete&&uM(r,n,l.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??a0();let n=[],i=new Map,l=this.doc,s="",o=this._start;function a(){if(s.length>0){let e={},t=!1;i.forEach((r,n)=>{t=!0,e[n]=r});let r={insert:s};t&&(r.attributes=e),n.push(r),s=""}}let u=()=>{for(;null!==o;){if(ag(o,e)||void 0!==t&&ag(o,t))switch(o.content.constructor){case u2:{let n=i.get("ychange");void 0===e||ag(o,e)?void 0===t||ag(o,t)?void 0!==n&&(a(),i.delete("ychange")):(void 0===n||n.user!==o.id.client||"added"!==n.type)&&(a(),i.set("ychange",r?r("added",o.id):{type:"added"})):(void 0===n||n.user!==o.id.client||"removed"!==n.type)&&(a(),i.set("ychange",r?r("removed",o.id):{type:"removed"})),s+=o.content.str;break}case ct:case uY:{a();let e={insert:o.content.getContent()[0]};if(i.size>0){let t={};e.attributes=t,i.forEach((e,r)=>{t[r]=e})}n.push(e);break}case uQ:ag(o,e)&&(a(),uT(i,o.content))}o=o.right}a()};return e||t?aI(l,r=>{e&&am(r,e),t&&am(r,t),u()},"cleanup"):u(),n}insert(e,t,r){if(t.length<=0)return;let n=this.doc;null!==n?aI(n,n=>{let i=uC(n,this,e,!r);r||(r={},i.currentAttributes.forEach((e,t)=>{r[t]=e})),uR(n,this,i,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){let n=this.doc;null!==n?aI(n,n=>{let i=uC(n,this,e,!r);uR(n,this,i,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(0===t)return;let r=this.doc;null!==r?aI(r,r=>{uM(r,uC(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(0===t)return;let n=this.doc;null!==n?aI(n,n=>{let i=uC(n,this,e,!1);null!==i.right&&uO(n,this,i,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){null!==this.doc?aI(this.doc,t=>{ud(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?aI(this.doc,r=>{uh(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return uf(this,e)}getAttributes(){return up(this)}_write(e){e.writeTypeRef(u5)}}class uB{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??a0()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==uz&&t.constructor!==uU||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)));return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class uU extends a7{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new uU}clone(){let e=new uU;return e.insert(0,this.toArray().map(e=>e instanceof a7?e.clone():e)),e}get length(){return this.doc??a0(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new uB(this,e)}querySelector(e){e=e.toUpperCase();let t=new uB(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),lN(new uB(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){a9(this,e,new uW(this,t,e))}toString(){return un(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){let n=e.createDocumentFragment();return void 0!==r&&r._createAssociation(n,this),ur(this,i=>{n.insertBefore(i.toDOM(e,t,r),null)}),n}insert(e,t){null!==this.doc?aI(this.doc,r=>{ua(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)aI(this.doc,r=>{us(r,this,e&&e instanceof a7?e._item:e,t)});else{let r=this._prelimContent,n=null===e?0:r.findIndex(t=>t===e)+1;if(0===n&&null!==e)throw sd("Reference item not found");r.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?aI(this.doc,r=>{uc(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return ut(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return ul(this,e)}slice(e=0,t=this.length){return ue(this,e,t)}forEach(e){ur(this,e)}_write(e){e.writeTypeRef(u9)}}class uz extends uU{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new uz(this.nodeName)}clone(){let e=new uz(this.nodeName);return oa(this.getAttributes(),(t,r)=>{"string"==typeof t&&e.setAttribute(r,t)}),e.insert(0,this.toArray().map(e=>e instanceof a7?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],r=[];for(let t in e)r.push(t);r.sort();let n=r.length;for(let i=0;i<n;i++){let n=r[i];t.push(n+'="'+e[n]+'"')}let i=this.nodeName.toLocaleLowerCase(),l=t.length>0?" "+t.join(" "):"";return`<${i}${l}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?aI(this.doc,t=>{ud(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?aI(this.doc,r=>{uh(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return uf(this,e)}hasAttribute(e){return ug(this,e)}getAttributes(e){return e?um(this,e):up(this)}toDOM(e=document,t={},r){let n=e.createElement(this.nodeName),i=this.getAttributes();for(let e in i){let t=i[e];"string"==typeof t&&n.setAttribute(e,t)}return ur(this,i=>{n.appendChild(i.toDOM(e,t,r))}),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(u6),e.writeKey(this.nodeName)}}class uW extends aQ{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class uH extends uv{constructor(e){super(),this.hookName=e}_copy(){return new uH(this.hookName)}clone(){let e=new uH(this.hookName);return this.forEach((t,r)=>{e.set(r,t)}),e}toDOM(e=document,t={},r){let n,i=t[this.hookName];return(n=void 0!==i?i.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(u7),e.writeKey(this.hookName)}}class uK extends uF{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new uK}clone(){let e=new uK;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){let n=e.createTextNode(this.toString());return void 0!==r&&r._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let r in e.attributes){let n=[];for(let t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:r,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let r="";for(let e=0;e<t.length;e++){let n=t[e];r+=`<${n.nodeName}`;for(let e=0;e<n.attrs.length;e++){let t=n.attrs[e];r+=` ${t.key}="${t.value}"`}r+=">"}r+=e.insert;for(let e=t.length-1;e>=0;e--)r+=`</${t[e].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(ce)}}class uV{constructor(e,t){this.id=e,this.length=t}get deleted(){throw sh()}mergeWith(e){return!1}write(e,t,r){throw sh()}integrate(e,t){throw sh()}}class u$ extends uV{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),ax(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class uX{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new uX(this.content)}splice(e){throw sh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class uq{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new uq(this.len)}splice(e){let t=new uq(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){oS(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let uJ=(e,t)=>new oN({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class uG{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new uG(uJ(this.doc.guid,this.opts))}splice(e){throw sh()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class uY{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new uY(this.embed)}splice(e){throw sh()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class uQ{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new uQ(this.key,this.value)}splice(e){throw sh()}mergeWith(e){return!1}integrate(e,t){let r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class uZ{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new uZ(this.arr)}splice(e){let t=new uZ(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}let u0="development"===sX("node_env");class u1{constructor(e){this.arr=e,u0&&og(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new u1(this.arr)}splice(e){let t=new u1(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeAny(t)}}getRef(){return 8}}class u2{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new u2(this.str)}splice(e){let t=new u2(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let u4=[e=>new ub,e=>new uv,e=>new uF,e=>new uz(e.readKey()),e=>new uU,e=>new uH(e.readKey()),e=>new uK],u8=0,u3=1,u5=2,u6=3,u9=4,u7=5,ce=6;class ct{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ct(this.type._copy())}splice(e){throw sh()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let cr=(e,t)=>{let r,n=t,i=0;do i>0&&(n=o9(n.client,n.clock+i)),r=aw(e,n),i=n.clock-r.id.clock,n=r.redone;while(null!==n&&r instanceof co);return{item:r,diff:i}},cn=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},ci=(e,t,r)=>{let{client:n,clock:i}=t.id,l=new co(o9(n,i+r),t,o9(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&l.markDeleted(),t.keep&&(l.keep=!0),null!==t.redone&&(l.redone=o9(t.redone.client,t.redone.clock+r)),t.right=l,null!==l.right&&(l.right.left=l),e._mergeStructs.push(l),null!==l.parentSub&&null===l.right&&l.parent._map.set(l.parentSub,l),t.length=r,l},cl=(e,t)=>lR(e,e=>ox(e.deletions,t)),cs=(e,t,r,n,i,l)=>{let s,o=e.doc,a=o.store,u=o.clientID,c=t.redone;if(null!==c)return aE(e,c);let d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!r.has(d)||null===cs(e,d,r,n,i,l)))return null;for(;null!==d.redone;)d=aE(e,d.redone)}let f=null===d?t.parent:d.content.type;if(null===t.parentSub){for(h=t.left,s=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:aE(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}for(;null!==s;){let t=s;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:aE(e,t.redone);if(null!==t&&t.parent._item===d){s=t;break}s=s.right}}else if(s=null,t.right&&!i){for(h=t;null!==h&&null!==h.right&&(h.right.redone||ox(n,h.right.id)||cl(l.undoStack,h.right.id)||cl(l.redoStack,h.right.id));)for(h=h.right;h.redone;)h=aE(e,h.redone);if(h&&null!==h.right)return null}else h=f._map.get(t.parentSub)||null;let p=ab(a,u),g=o9(u,p),m=new co(g,h,h&&h.lastId,s,s&&s.id,f,t.parentSub,t.content.copy());return t.redone=g,cn(m,!0),m.integrate(e,0),m};class co extends uV{constructor(e,t,r,n,i,l,s,o){super(e,o.getLength()),this.origin=r,this.left=t,this.right=n,this.rightOrigin=i,this.parent=l,this.parentSub=s,this.redone=null,this.content=o,this.info=2*!!this.content.isCountable()}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ab(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ab(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===o5&&this.id.client!==this.parent.client&&this.parent.clock>=ab(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=aC(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=aE(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===u$||this.right&&this.right.constructor===u$)this.parent=null;else if(this.parent){if(this.parent.constructor===o5){let e=aw(t,this.parent);e.constructor===u$?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===co?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===co&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=aC(e,e.doc.store,o9(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let n=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),n.add(t),o6(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,n.clear();else if(o6(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&i.has(aw(e.doc.store,t.origin)))n.has(aw(e.doc.store,t.origin))||(r=t,n.clear());else break;t=t.right}this.left=r}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ax(e.doc.store,this),this.content.integrate(e,this),aR(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new u$(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:o9(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&o6(e.origin,this.lastId)&&this.right===e&&o6(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),oS(e.deleteSet,this.id.client,this.id.clock,this.length),aR(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw sf();this.content.gc(e),t?ak(e,this,new u$(this.id,this.length)):this.content=new uq(this.length)}write(e,t){let r=t>0?o9(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,i=this.parentSub,l=31&this.content.getRef()|128*(null!==r)|64*(null!==n)|32*(null!==i);if(e.writeInfo(l),null!==r&&e.writeLeftID(r),null!==n&&e.writeRightID(n),null===r&&null===n){let t=this.parent;if(void 0!==t._item){let r=t._item;if(null===r){let r=o7(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===o5?(e.writeParentInfo(!1),e.writeLeftID(t)):sf();null!==i&&e.writeString(i)}this.content.write(e,t)}}let ca=(e,t)=>cu[31&t](e),cu=[()=>{sf()},e=>new uq(e.readLen()),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++){let t=e.readString();"undefined"===t?r.push(void 0):r.push(JSON.parse(t))}return new uZ(r)},e=>new uX(e.readBuf()),e=>new u2(e.readString()),e=>new uY(e.readJSON()),e=>new uQ(e.readKey(),e.readJSON()),e=>new ct(u4[e.readTypeRef()](e)),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new u1(r)},e=>new uG(uJ(e.readString(),e.readAny())),()=>{sf()}];class cc extends uV{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){sf()}write(e,t){e.writeInfo(10),l1(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let cd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},ch="__ $YJS$ __";!0===cd[ch]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),cd[ch]=!0;var cf=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function cp(e,t,r,n,i){let l=r._offsetMap,s=n._offsetMap,o=new Set,a=e,u=t;for(;null!==u;){let e=u.key,t=l.get(e),r=u.end-u.start;if(o.add(e),void 0===t)a+=r;else{let e=t.end-t.start;e!==r&&(a+=r-e)}let n=u.prev;if(null!==n){u=n;continue}let i=u.parent;for(;null!==i;){let e=i.prev;if(null!==e){let t=e.key,r=l.get(t),n=e.end-e.start;if(o.add(t),void 0===r)a+=n;else{let e=r.end-r.start;e!==n&&(a+=n-e)}e=e.prev}i=i.parent}break}let c=r._firstNode;if(null!==c){u=cg(c,e,i);let t=!1;for(;null!==u;){if(!o.has(u.key)){t=!0;break}u=u.parent}if(!t)for(;null!==u;){let e=u.key;if(!o.has(e)){let t=s.get(e),r=u.end-u.start;if(void 0===t)a-=r;else{let e=t.end-t.start;r!==e&&(a+=e-r)}}u=u.prev}}return a}function cg(e,t,r){let n=e;for(;null!==n;){if(t<n.end+ +("element"!==n.type||0===r)){let e=n.child;if(null!==e){n=e;continue}return n}let e=n.next;if(null===e)break;n=e}return null}function cm(e,t,r,n,i,l){return{child:e,end:n,key:i,next:null,parent:l,prev:null,start:r,type:t}}function c_(e,t){let r=[],n=e.__first;for(;null!==n;){let e=null===t?e0(n):t.get(n);null==e&&cf(174),r.push(n),n=e.__next}return r}var cy=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});class cb{constructor(e,t){this._key="",this._map=e,this._parent=t,this._type="linebreak"}getNode(){let e=e0(this._key);return rB(e)?e:null}getKey(){return this._key}getSharedType(){return this._map}getType(){return this._type}getSize(){return 1}getOffset(){return this._parent.getChildOffset(this)}destroy(e){e.collabNodeMap.delete(this._key)}}function cx(e,t){let r=new cb(e,t);return e._collabNode=r,r}class cv{constructor(e,t,r,n){this._key="",this._map=e,this._parent=r,this._text=t,this._type=n,this._normalized=!1}getPrevNode(e){if(null===e)return null;let t=e.get(this._key);return r2(t)?t:null}getNode(){let e=e0(this._key);return r2(e)?e:null}getSharedType(){return this._map}getType(){return this._type}getKey(){return this._key}getSize(){return this._text.length+ +!this._normalized}getOffset(){return this._parent.getChildOffset(this)}spliceText(e,t,r){let n=this._parent._xmlText,i=this.getOffset()+1+e;0!==t&&n.delete(i,t),""!==r&&n.insert(i,r)}syncPropertiesAndTextFromLexical(e,t,r){let n=this.getPrevNode(r),i=t.__text;if(cO(e,this._map,n,t),null!==n){let e=n.__text;e!==i&&(!function(e,t,r,n){let i=ng(),l=n.length;if(nt(i)&&i.isCollapsed()){let e=i.anchor;e.key===t&&(l=e.offset)}let s=function(e,t,r){let n=e.length,i=t.length,l=0,s=0;for(;l<n&&l<i&&e[l]===t[l]&&l<r;)l++;for(;s+l<n&&s+l<i&&e[n-s-1]===t[i-s-1];)s++;for(;s+l<n&&s+l<i&&e[l]===t[l];)l++;return{index:l,insert:t.slice(l,i-s),remove:n-l-s}}(r,n,l);e.spliceText(s.index,s.remove,s.insert)}(this,t.__key,e,i),this._text=i)}}syncPropertiesAndTextFromYjs(e,t){let r=this.getNode();null===r&&cy(84),cR(e,this._map,r,t);let n=this._text;r.__text!==n&&(r.getWritable().__text=n)}destroy(e){e.collabNodeMap.delete(this._key)}}function cw(e,t,r,n){let i=new cv(e,t,r,n);return e._collabNode=i,i}let cS=new Set(["__key","__parent","__next","__prev"]),cE=new Set(["__first","__last","__size"]),cC=new Set(["__cachedText"]),ck=new Set(["__text"]);function cT(e,t,r){if(cS.has(e))return!0;if(r2(t)){if(ck.has(e))return!0}else if(nq(t)&&(cE.has(e)||nZ(t)&&cC.has(e)))return!0;let n=t.constructor,i=r.excludedProperties.get(n);return null!=i&&i.has(e)}function cP(e){let t=e0(e);return null===t&&cy(85),t}function cN(e,t,r){let n,i=t.__type;if(nq(t))(n=cF(new uK,r,i)).syncPropertiesFromLexical(e,t,null),n.syncChildrenFromLexical(e,t,null,null,null);else if(r2(t))(n=cw(new uv,t.__text,r,i)).syncPropertiesAndTextFromLexical(e,t,null);else if(rB(t)){let e=new uv;e.set("__type","linebreak"),n=cx(e,r)}else nY(t)?(n=cM(new uz,r,i)).syncPropertiesFromLexical(e,t,null):cy(86);return n._key=t.__key,n}function cR(e,t,r,n){let i,l=null===n?t instanceof uv?Array.from(t.keys()):Object.keys(t.getAttributes()):Array.from(n);for(let n=0;n<l.length;n++){let s=l[n];if(cT(s,r,e))continue;let o=r[s],a=t instanceof uv?t.get(s):t.getAttribute(s);if(o!==a){if(a instanceof oN){let t=e.docMap;o instanceof oN&&t.delete(o.guid);let r=n9(),n=a.guid;r._key=n,t.set(n,a),a=r}void 0===i&&(i=r.getWritable()),i[s]=a}}}function cO(e,t,r,n){let i=n.__type,l=e.nodeProperties,s=l.get(i);void 0===s&&(s=Object.keys(n).filter(t=>!cT(t,n,e)),l.set(i,s));let o=e.editor.constructor;for(let i=0;i<s.length;i++){let l=s[i],a=null===r?void 0:r[l],u=n[l];if(a!==u){if(u instanceof o){let t,r=e.docMap;if(a instanceof o){let e=a._key;t=r.get(e),r.delete(e)}let i=t||new oN,l=i.guid;u._key=l,r.set(l,i),u=i,e.editor.update(()=>{n.markDirty()})}t instanceof uv?t.set(l,u):t.setAttribute(l,u)}}}function cD(e,t,r,n){return e.slice(0,t)+n+e.slice(t+r)}function cA(e,t,r){let n=0,i=0,l=e._children,s=l.length;for(;i<s;i++){let e=l[i],o=n;if(n+=e.getSize(),(r?n>=t:n>t)&&e instanceof cv){let r=t-o-1;return r<0&&(r=0),{length:n-t,node:e,nodeIndex:i,offset:r}}if(n>t)return{length:0,node:e,nodeIndex:i,offset:o};if(i===s-1)return{length:0,node:null,nodeIndex:i+1,offset:o+1}}return{length:0,node:null,nodeIndex:0,offset:0}}function cj(e){let t=e.getParent();if(null!==t){let r=e.getWritable(),n=t.getWritable(),i=e.getPreviousSibling(),l=e.getNextSibling();if(null===i)if(null!==l){let e=l.getWritable();n.__first=l.__key,e.__prev=null}else n.__first=null;else{let e=i.getWritable();if(null!==l){let t=l.getWritable();t.__prev=e.__key,e.__next=t.__key}else e.__next=null;r.__prev=null}if(null===l)if(null!==i){let e=i.getWritable();n.__last=i.__key,e.__next=null}else n.__last=null;else{let e=l.getWritable();if(null!==i){let t=i.getWritable();t.__next=e.__key,e.__prev=t.__key}else e.__prev=null;r.__next=null}n.__size--,r.__parent=null}}class cI{constructor(e,t,r){this._key="",this._xmlElem=e,this._parent=t,this._type=r}getPrevNode(e){if(null===e)return null;let t=e.get(this._key);return nY(t)?t:null}getNode(){let e=e0(this._key);return nY(e)?e:null}getSharedType(){return this._xmlElem}getType(){return this._type}getKey(){return this._key}getSize(){return 1}getOffset(){return this._parent.getChildOffset(this)}syncPropertiesFromLexical(e,t,r){let n=this.getPrevNode(r);cO(e,this._xmlElem,n,t)}syncPropertiesFromYjs(e,t){let r=this.getNode();null===r&&cy(83),cR(e,this._xmlElem,r,t)}destroy(e){e.collabNodeMap.delete(this._key)}}function cM(e,t,r){let n=new cI(e,t,r);return e._collabNode=n,n}class cL{constructor(e,t,r){this._key="",this._children=[],this._xmlText=e,this._type=r,this._parent=t}getPrevNode(e){if(null===e)return null;let t=e.get(this._key);return nq(t)?t:null}getNode(){let e=e0(this._key);return nq(e)?e:null}getSharedType(){return this._xmlText}getType(){return this._type}getKey(){return this._key}isEmpty(){return 0===this._children.length}getSize(){return 1}getOffset(){let e=this._parent;return null===e&&cy(90),e.getChildOffset(this)}syncPropertiesFromYjs(e,t){let r=this.getNode();null===r&&cy(91),cR(e,this._xmlText,r,t)}applyChildrenYjsDelta(e,t){let r=this._children,n=0,i=null;for(let l=0;l<t.length;l++){let s=t[l],o=s.insert,a=s.delete;if(null!=s.retain)n+=s.retain;else if("number"==typeof a){let e=a;for(;e>0;){let{node:t,nodeIndex:i,offset:l,length:s}=cA(this,n,!1);if(t instanceof cL||t instanceof cb||t instanceof cI)r.splice(i,1),e-=1;else{if(!(t instanceof cv))break;{let n=Math.min(e,s),o=0!==i?r[i-1]:null,a=t.getSize();if(0===l&&s===a){r.splice(i,1);let e=cD(t._text,l,n-1,"");e.length>0&&(o instanceof cv?o._text+=e:this._xmlText.delete(l,e.length))}else t._text=cD(t._text,l,n,"");e-=n}}}}else{if(null==o)throw Error("Unexpected delta format");if("string"==typeof o){let{node:e,offset:t}=cA(this,n,!0);e instanceof cv?e._text=cD(e._text,t,0,o):this._xmlText.delete(t,o.length),n+=o.length}else{let{node:t,nodeIndex:l,length:s}=cA(this,n,!1),a=function e(t,r,n){let i=r._collabNode;if(void 0===i){let i=t.editor._nodes,l=function(e){let t=e instanceof uv?e.get("__type"):e.getAttribute("__type");return null==t&&cy(87),t}(r);void 0===i.get(l)&&cy(88,l);let s=r.parent,o=void 0===n&&null!==s?e(t,s):n||null;if(o instanceof cL||cy(89),r instanceof uK)return cF(r,o,l);if(r instanceof uv)return"linebreak"===l?cx(r,o):cw(r,"",o,l);if(r instanceof uz)return cM(r,o,l)}return i}(e,o,this);if(t instanceof cv&&s>0&&s<t._text.length){let e=t._text,n=e.length-s;t._text=cD(e,n,s,""),r.splice(l+1,0,a),i=cD(e,0,n,"")}else r.splice(l,0,a);null!==i&&a instanceof cv&&(a._text=i+a._text,i=null),n+=1}}}}syncChildrenFromYjs(e){let t=this.getNode();null===t&&cy(92);let r=t.__key,n=c_(t,null),i=n.length,l=this._children,s=l.length,o=e.collabNodeMap,a=new Set,u,c,d=0,h=null;s!==i&&(c=t.getWritable());for(let i=0;i<s;i++){let f=n[d],p=l[i],g=p.getNode(),m=p._key;if(null!==g&&f===m){let t=r2(g);if(a.add(f),t)if(p._key=f,p instanceof cL){let t=p._xmlText;p.syncPropertiesFromYjs(e,null),p.applyChildrenYjsDelta(e,t.toDelta()),p.syncChildrenFromYjs(e)}else p instanceof cv?p.syncPropertiesAndTextFromYjs(e,null):p instanceof cI?p.syncPropertiesFromYjs(e,null):p instanceof cb||cy(93);h=g,d++}else{if(void 0===u){u=new Set;for(let e=0;e<s;e++){let t=l[e]._key;""!==t&&u.add(t)}}if(null!==g&&void 0!==f&&!u.has(f)){cj(cP(f)),i--,d++;continue}c=t.getWritable();let n=function(e,t,r){let n=t.getType(),i=e.editor._nodes.get(n);void 0===i&&cy(88,n);let l=new i.klass;if(l.__parent=r,t._key=l.__key,t instanceof cL){let r=t._xmlText;t.syncPropertiesFromYjs(e,null),t.applyChildrenYjsDelta(e,r.toDelta()),t.syncChildrenFromYjs(e)}else t instanceof cv?t.syncPropertiesAndTextFromYjs(e,null):t instanceof cI&&t.syncPropertiesFromYjs(e,null);return e.collabNodeMap.set(l.__key,t),l}(e,p,r),a=n.__key;if(o.set(a,p),null===h){let e=c.getFirstChild();if(c.__first=a,null!==e){let t=e.getWritable();t.__prev=a,n.__next=t.__key}}else{let e=h.getWritable(),t=h.getNextSibling();if(e.__next=a,n.__prev=h.__key,null!==t){let e=t.getWritable();e.__prev=a,n.__next=e.__key}}i===s-1&&(c.__last=a),c.__size++,h=n}}for(let t=0;t<i;t++){let r=n[t];if(!a.has(r)){let t=cP(r),n=e.collabNodeMap.get(r);void 0!==n&&n.destroy(e),cj(t)}}}syncPropertiesFromLexical(e,t,r){cO(e,this._xmlText,this.getPrevNode(r),t)}_syncChildFromLexical(e,t,r,n,i,l){let s=this._children[t],o=cP(r);s instanceof cL&&nq(o)?(s.syncPropertiesFromLexical(e,o,n),s.syncChildrenFromLexical(e,o,n,i,l)):s instanceof cv&&r2(o)?s.syncPropertiesAndTextFromLexical(e,o,n):s instanceof cI&&nY(o)&&s.syncPropertiesFromLexical(e,o,n)}syncChildrenFromLexical(e,t,r,n,i){let l=this.getPrevNode(r),s=null===l?[]:c_(l,r),o=c_(t,null),a=s.length-1,u=o.length-1,c=e.collabNodeMap,d,h,f=0,p=0;for(;f<=a&&p<=u;){let t=s[f],l=o[p];if(t===l)this._syncChildFromLexical(e,p,l,r,n,i),f++,p++;else{void 0===d&&(d=new Set(s)),void 0===h&&(h=new Set(o));let r=h.has(t),n=d.has(l);if(r){let t=cN(e,cP(l),this);c.set(l,t),n?(this.splice(e,p,1,t),f++):this.splice(e,p,0,t),p++}else this.splice(e,p,1),f++}}let g=f>a,m=p>u;if(g&&!m)for(;p<=u;++p){let t=o[p],r=cN(e,cP(t),this);this.append(r),c.set(t,r)}else if(m&&!g)for(let t=this._children.length-1;t>=p;t--)this.splice(e,t,1)}append(e){let t=this._xmlText,r=this._children,n=r[r.length-1],i=void 0!==n?n.getOffset()+n.getSize():0;if(e instanceof cL)t.insertEmbed(i,e._xmlText);else if(e instanceof cv){let r=e._map;null===r.parent&&t.insertEmbed(i,r),t.insert(i+1,e._text)}else e instanceof cb?t.insertEmbed(i,e._map):e instanceof cI&&t.insertEmbed(i,e._xmlElem);this._children.push(e)}splice(e,t,r,n){let i=this._children,l=i[t];if(void 0===l)return void 0===n&&cy(94),void this.append(n);let s=l.getOffset();-1===s&&cy(95);let o=this._xmlText;if(0!==r&&o.delete(s,l.getSize()),n instanceof cL)o.insertEmbed(s,n._xmlText);else if(n instanceof cv){let e=n._map;null===e.parent&&o.insertEmbed(s,e),o.insert(s+1,n._text)}else n instanceof cb?o.insertEmbed(s,n._map):n instanceof cI&&o.insertEmbed(s,n._xmlElem);if(0!==r){let n=i.slice(t,t+r);for(let t=0;t<n.length;t++)n[t].destroy(e)}void 0!==n?i.splice(t,r,n):i.splice(t,r)}getChildOffset(e){let t=0,r=this._children;for(let n=0;n<r.length;n++){let i=r[n];if(i===e)return t;t+=i.getSize()}return -1}destroy(e){let t=e.collabNodeMap,r=this._children;for(let t=0;t<r.length;t++)r[t].destroy(e);t.delete(this._key)}}function cF(e,t,r){let n=new cL(e,t,r);return e._collabNode=n,n}function cB(e,t){let r=t.collabNodeMap.get(e.key);if(void 0===r)return null;let n=e.offset,i=r.getSharedType();if(r instanceof cv){i=r._parent._xmlText;let e=r.getOffset();if(-1===e)return null;n=e+1+n}else if(r instanceof cL&&"element"===e.type){let t=e.getNode();nq(t)||cy(184);let r=0,i=0,l=t.getFirstChild();for(;null!==l&&i++<n;)r2(l)?r+=l.getTextContentSize()+1:r++,l=l.getNextSibling();n=r}return as(i,n)}function cU(e,t){if(null==e){if(null!=t)return!0}else if(null==t||!au(e,t))return!0;return!1}function cz(e,t){let r=e.cursorsContainer;if(null!==r){let e=t.selections,n=e.length;for(let t=0;t<n;t++)r.removeChild(e[t])}}function cW(e,t){let{anchorPos:r,focusPos:n}=t,i=null,l=0,s=null,o=0;if(null!==r&&null!==n){let t=aa(r,e.doc),a=aa(n,e.doc);null!==t&&null!==a&&([i,l]=cK(t.type,t.index),[s,o]=cK(a.type,a.index))}return{anchorCollabNode:i,anchorOffset:l,focusCollabNode:s,focusOffset:o}}function cH(e,t,r){if(e.key!==t||e.offset!==r){let n=e0(t);if(null!==n&&!nq(n)&&!r2(n)){let e=n.getParentOrThrow();t=e.getKey(),r=n.getIndexWithinParent(),n=e}e.set(t,r,nq(n)?"element":"text")}}function cK(e,t){let r=e._collabNode;if(void 0===r)return[null,0];if(r instanceof cL){let{node:e,offset:n}=cA(r,t,!0);return null===e?[r,0]:[e,n]}return[null,0]}function cV({id:e,providerFactory:t,shouldBootstrap:r,username:n,cursorColor:l,cursorsContainerRef:s,initialEditorState:o,excludedProperties:u,awarenessData:c}){(0,a.useRef)(!1),(0,a.useRef)(!1);let d=function(e,t){let r=(0,a.useContext)(lv);return null!=e&&(r.name=e),null!=t&&(r.color=t),r}(n,l),{yjsDocMap:f,name:p,color:g}=d,[m]=h(),[_,y]=(0,a.useState)(),[b,x]=(0,a.useState)(f.get(e)),[v,w]=(0,a.useState)();return _&&v?(0,i.jsx)(c$,{awarenessData:c,binding:v,collabContext:d,color:g,cursorsContainerRef:s,editor:m,id:e,initialEditorState:o,name:p,provider:_,setDoc:x,shouldBootstrap:r,yjsDocMap:f}):(0,i.jsx)(i.Fragment,{})}function c$({editor:e,id:t,provider:r,yjsDocMap:n,name:l,color:s,shouldBootstrap:o,cursorsContainerRef:u,initialEditorState:c,awarenessData:d,collabContext:h,binding:f,setDoc:p}){let g=function(e,t,r,n,l,s,o,u,c,d,h,f,p=function(e,t){let r=Array.from(t.awareness.getStates()),n=e.clientID,i=e.cursors,l=e.editor._editorState._nodeMap,s=new Set;for(let t=0;t<r.length;t++){let[o,a]=r[t];if(o!==n){s.add(o);let{name:t,color:r,focusing:n}=a,u=null,c=i.get(o);if(void 0===c&&(c={color:r,name:t,selection:null},i.set(o,c)),n){let{anchorCollabNode:t,anchorOffset:r,focusCollabNode:n,focusOffset:i}=cW(e,a);if(null!==t&&null!==n){let e=t.getKey(),l=n.getKey();if(null===(u=c.selection))u=function(e,t,r,n,i){let l=e.color,s=document.createElement("span");s.style.cssText=`position:absolute;top:0;bottom:0;right:-1px;width:1px;background-color:${l};z-index:10;`;let o=document.createElement("span");return o.textContent=e.name,o.style.cssText=`position:absolute;left:-2px;top:-16px;background-color:${l};color:#fff;line-height:12px;font-size:12px;padding:2px;font-family:Arial;font-weight:bold;white-space:nowrap;`,s.appendChild(o),{anchor:{key:t,offset:r},caret:s,color:l,focus:{key:n,offset:i},name:o,selections:[]}}(c,e,r,l,i);else{let t=u.anchor,n=u.focus;t.key=e,t.offset=r,n.key=l,n.offset=i}}}!function(e,t,r,n){let i,l=e.editor,s=l.getRootElement(),o=e.cursorsContainer;if(null===o||null===s)return;let a=o.offsetParent;if(null===a)return;let u=a.getBoundingClientRect(),c=t.selection;if(null===r)return null===c||(t.selection=null,cz(e,c));t.selection=r;let d=r.caret,h=r.color,f=r.selections,p=r.anchor,g=r.focus,m=p.key,_=g.key,y=n.get(m),b=n.get(_);if(null==y||null==b)return;if(y===b&&rB(y))i=[l.getElementByKey(m).getBoundingClientRect()];else{let e=function(e,t,r,n,i){let l=t.getKey(),s=n.getKey(),o=document.createRange(),a=e.getElementByKey(l),u=e.getElementByKey(s),c=r,d=i;if(r2(t)&&(a=ip(a)),r2(n)&&(u=ip(u)),void 0===t||void 0===n||null===a||null===u)return null;"BR"===a.nodeName&&([a,c]=ig(a)),"BR"===u.nodeName&&([u,d]=ig(u));let h=a.firstChild;a===u&&null!=h&&"BR"===h.nodeName&&0===c&&0===d&&(d=1);try{o.setStart(a,c),o.setEnd(u,d)}catch(e){return null}return o.collapsed&&(c!==d||l!==s)&&(o.setStart(u,d),o.setEnd(a,c)),o}(l,y,p.offset,b,g.offset);if(null===e)return;i=function(e,t){let r=e.getRootElement();if(null===r)return[];let n=r.getBoundingClientRect(),i=getComputedStyle(r),l=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),s=Array.from(t.getClientRects()),o,a=s.length;s.sort((e,t)=>{let r=e.top-t.top;return 3>=Math.abs(r)?e.left-t.left:r});for(let e=0;e<a;e++){let t=s[e],r=o&&o.top<=t.top&&o.top+o.height>t.top&&o.left+o.width>t.left,i=t.width+l===n.width;r||i?(s.splice(e--,1),a--):o=t}return s}(l,e)}let x=f.length,v=i.length;for(let e=0;e<v;e++){let t=i[e],r=f[e];if(void 0===r){r=document.createElement("span"),f[e]=r;let t=document.createElement("span");r.appendChild(t),o.appendChild(r)}let n=`position:absolute;top:${t.top-u.top}px;left:${t.left-u.left}px;height:${t.height}px;width:${t.width}px;pointer-events:none;z-index:5;`;r.style.cssText=n,r.firstChild.style.cssText=`${n}left:0;top:0;background-color:${h};opacity:0.3;`,e===v-1&&d.parentNode!==r&&r.appendChild(d)}for(let e=x-1;e>=v;e--){let t=f[e];o.removeChild(t),f.pop()}}(e,c,u,l)}}let o=Array.from(i.keys());for(let t=0;t<o.length;t++){let r=o[t];if(!s.has(r)){let t=i.get(r);void 0!==t&&(function(e,t){let r=t.selection;null!==r&&cz(e,r)}(e,t),i.delete(r))}}}){return(0,a.useRef)(!1),(0,a.useCallback)(()=>r.connect(),[r]),(0,a.useCallback)(()=>{try{r.disconnect()}catch(e){}},[r]),(0,a.useMemo)(()=>(0,i8.createPortal)((0,i.jsx)("div",{ref:e=>{u.cursorsContainer=e}}),d&&d.current||document.body),[u,d])}(0,0,r,0,0,0,0,f,0,u,0,0);return h.clientID=f.clientID,function(e,t){let r=(0,a.useMemo)(()=>new aB(t.root.getSharedType(),{trackedOrigins:new Set([t,null])}),[t]);(0,a.useCallback)(()=>{r.clear()},[r]),a.useEffect(()=>{let t=()=>{e.dispatchCommand(Q,r.undoStack.length>0),e.dispatchCommand(Y,r.redoStack.length>0)};return r.on("stack-item-added",t),r.on("stack-item-popped",t),r.on("stack-cleared",t),()=>{r.off("stack-item-added",t),r.off("stack-item-popped",t),r.off("stack-cleared",t)}},[e,r])}(e,f),g}var cX=r(61865);let cq="function"==typeof Buffer,cJ="function"==typeof TextDecoder?new TextDecoder:void 0,cG="function"==typeof TextEncoder?new TextEncoder:void 0,cY=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),cQ=(e=>{let t={};return e.forEach((e,r)=>t[e]=r),t})(cY),cZ=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,c0=String.fromCharCode.bind(String),c1="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),c2=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),c4=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),c8="function"==typeof btoa?e=>btoa(e):cq?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,n,i,l="",s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw TypeError("invalid character found");l+=cY[(t=r<<16|n<<8|i)>>18&63]+cY[t>>12&63]+cY[t>>6&63]+cY[63&t]}return s?l.slice(0,s-3)+"===".substring(s):l},c3=cq?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(c0.apply(null,e.subarray(r,r+4096)));return c8(t.join(""))},c5=(e,t=!1)=>t?c2(c3(e)):c3(e),c6=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c0(192|t>>>6)+c0(128|63&t):c0(224|t>>>12&15)+c0(128|t>>>6&63)+c0(128|63&t)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return c0(240|t>>>18&7)+c0(128|t>>>12&63)+c0(128|t>>>6&63)+c0(128|63&t)},c9=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c7=e=>e.replace(c9,c6),de=cq?e=>Buffer.from(e,"utf8").toString("base64"):cG?e=>c3(cG.encode(e)):e=>c8(c7(e)),dt=(e,t=!1)=>t?c2(de(e)):de(e),dr=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,dn=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c0((t>>>10)+55296)+c0((1023&t)+56320);case 3:return c0((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c0((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},di=e=>e.replace(dr,dn),dl="function"==typeof atob?e=>atob(c4(e)):cq?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!cZ.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r="",n,i;for(let l=0;l<e.length;)t=cQ[e.charAt(l++)]<<18|cQ[e.charAt(l++)]<<12|(n=cQ[e.charAt(l++)])<<6|(i=cQ[e.charAt(l++)]),r+=64===n?c0(t>>16&255):64===i?c0(t>>16&255,t>>8&255):c0(t>>16&255,t>>8&255,255&t);return r},ds=cq?e=>c1(Buffer.from(e,"base64")):e=>c1(dl(e).split("").map(e=>e.charCodeAt(0))),da=e=>ds(dc(e)),du=cq?e=>Buffer.from(e,"base64").toString("utf8"):cJ?e=>cJ.decode(ds(e)):e=>di(dl(e)),dc=e=>c4(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),dd=e=>du(dc(e)),dh=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),df={fromUint8Array:c5,toUint8Array:da},dp=e=>sM((t,r)=>{e.onerror=e=>r(Error(e.target.error)),e.onsuccess=e=>t(e.target.result)}),dg=(e,t)=>sM((r,n)=>{let i=indexedDB.open(e);i.onupgradeneeded=e=>t(e.target.result),i.onerror=e=>n(sd(e.target.error)),i.onsuccess=e=>{let t=e.target.result;t.onversionchange=()=>{t.close()},r(t)}}),dm=e=>dp(indexedDB.deleteDatabase(e)),d_=(e,t)=>t.forEach(t=>e.createObjectStore.apply(e,t)),dy=(e,t,r="readwrite")=>{let n=e.transaction(t,r);return t.map(e=>dN(n,e))},db=(e,t)=>dp(e.count(t)),dx=(e,t)=>dp(e.get(t)),dv=(e,t)=>dp(e.delete(t)),dw=(e,t,r)=>dp(e.put(t,r)),dS=(e,t)=>dp(e.add(t)),dE=(e,t,r)=>dp(e.getAll(t,r)),dC=(e,t,r)=>{let n=null;return dP(e,t,e=>(n=e,!1),r).then(()=>n)},dk=(e,t=null)=>dC(e,t,"prev"),dT=(e,t)=>sM((r,n)=>{e.onerror=n,e.onsuccess=async e=>{let n=e.target.result;if(null===n||await t(n)===!1)return r();n.continue()}}),dP=(e,t,r,n="next")=>dT(e.openKeyCursor(t,n),e=>r(e.key)),dN=(e,t)=>e.objectStore(t),dR=(e,t)=>IDBKeyRange.upperBound(e,t),dO=(e,t)=>IDBKeyRange.lowerBound(e,t),dD="custom",dA="updates",dj=(e,t=()=>{},r=()=>{})=>{let[n]=dy(e.db,[dA]);return dE(n,dO(e._dbref,!1)).then(i=>{e._destroyed||(t(n),aI(e.doc,()=>{i.forEach(t=>oV(e.doc,t))},e,!1),r(n))}).then(()=>dk(n).then(t=>{e._dbref=t+1})).then(()=>db(n).then(t=>{e._dbsize=t})).then(()=>n)},dI=(e,t=!0)=>dj(e).then(r=>{(t||e._dbsize>=500)&&dS(r,oq(e.doc)).then(()=>dv(r,dR(e._dbref,!0))).then(()=>db(r).then(t=>{e._dbsize=t}))});class dM extends lA{constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=dg(e,e=>d_(e,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=sM(e=>this.on("synced",()=>e(this))),this._db.then(e=>{this.db=e,dj(this,e=>dS(e,oq(t)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){let[t]=dy(this.db,[dA]);dS(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{dI(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{dm(this.name)})}get(e){return this._db.then(t=>{let[r]=dy(t,[dD],"readonly");return dx(r,e)})}set(e,t){return this._db.then(r=>{let[n]=dy(r,[dD]);return dw(n,t,e)})}del(e){return this._db.then(t=>{let[r]=dy(t,[dD]);return dv(r,e)})}}function dL(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function dF(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function dB(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function dU(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function dz(e,t){return e<<32-t|e>>>t}(e,t)=>t.toString(16).padStart(2,"0");let dW={_0:48,_9:57,A:65,F:70,a:97,f:102};function dH(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),dL(e),e}class dK{}class dV extends dK{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=dU(this.buffer)}update(e){dF(this),dL(e=dH(e));let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let l=0;l<i;){let s=Math.min(n-this.pos,i-l);if(s===n){let t=dU(e);for(;n<=i-l;l+=n)this.process(t,l);continue}r.set(e.subarray(l,l+s),this.pos),this.pos+=s,l+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dF(this);dL(e);let t=this.outputLen;if(e.length<t)throw Error("digestInto() expects output buffer of length at least "+t);this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:l}=this,{pos:s}=this;r[s++]=128,dB(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let e=s;e<i;e++)r[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),l=BigInt(0xffffffff),s=Number(r>>i&l),o=Number(r&l),a=4*!!n,u=4*!n;e.setUint32(t+a,s,n),e.setUint32(t+u,o,n)}(n,i-8,BigInt(8*this.length),l),this.process(n,0);let o=dU(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],l)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:l,pos:s}=this;return e.destroyed=l,e.finished=i,e.length=n,e.pos=s,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let d$=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),dX=BigInt(0x100000000-1),dq=BigInt(32),dJ=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),dG=new Uint32Array(64);class dY extends dV{constructor(e=32){super(64,e,8,!1),this.A=0|d$[0],this.B=0|d$[1],this.C=0|d$[2],this.D=0|d$[3],this.E=0|d$[4],this.F=0|d$[5],this.G=0|d$[6],this.H=0|d$[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:l,G:s,H:o}=this;return[e,t,r,n,i,l,s,o]}set(e,t,r,n,i,l,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|l,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)dG[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=dG[e-15],r=dG[e-2],n=dz(t,7)^dz(t,18)^t>>>3,i=dz(r,17)^dz(r,19)^r>>>10;dG[e]=i+dG[e-7]+n+dG[e-16]|0}let{A:r,B:n,C:i,D:l,E:s,F:o,G:a,H:u}=this;for(let e=0;e<64;e++){var c,d,h,f;let t=u+(dz(s,6)^dz(s,11)^dz(s,25))+((c=s)&o^~c&a)+dJ[e]+dG[e]|0,p=(dz(r,2)^dz(r,13)^dz(r,22))+((d=r)&(h=n)^d&(f=i)^h&f)|0;u=a,a=o,o=s,s=l+t|0,l=i,i=n,n=r,r=t+p|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,l=l+this.D|0,s=s+this.E|0,o=o+this.F|0,a=a+this.G|0,u=u+this.H|0,this.set(r,n,i,l,s,o,a,u)}roundClean(){dB(dG)}destroy(){this.set(0,0,0,0,0,0,0,0),dB(this.buffer)}}!function(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let l=0;l<r;l++){let{h:r,l:s}=function(e,t=!1){return t?{h:Number(e&dX),l:Number(e>>dq&dX)}:{h:0|Number(e>>dq&dX),l:0|Number(e&dX)}}(e[l],t);[n[l],i[l]]=[r,s]}}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e)));let dQ=function(e){let t=t=>e().update(dH(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new dY);var dZ=()=>new Map,d0=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},d1=()=>new Set,d2=Array.from,d4=class{constructor(){this._observers=dZ()}on(e,t){d0(this._observers,e,d1).add(t)}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return d2((this._observers.get(e)||dZ()).values()).forEach(e=>e(...t))}destroy(){this._observers=dZ()}},d8="__yjs",d3="__yjs_clientid",d5=class extends d4{room;doc;states=new Map;actorToClientMap=new Map;meta=new Map;_checkInterval=0;othersUnsub;constructor(e,t){super(),this.doc=e,this.room=t,this.room.updatePresence({[d3]:this.doc.clientID}),this.othersUnsub=this.room.events.others.subscribe(e=>{let t;if("leave"===e.type){let r=this.actorToClientMap.get(e.user.connectionId);void 0!==r&&(t={added:[],updated:[],removed:[r]}),this.rebuildActorToClientMap(e.others)}if("enter"===e.type||"update"===e.type){this.rebuildActorToClientMap(e.others);let r=this.actorToClientMap.get(e.user.connectionId);void 0!==r&&(t={added:"enter"===e.type?[r]:[],updated:"update"===e.type?[r]:[],removed:[]})}"reset"===e.type&&this.rebuildActorToClientMap(e.others),void 0!==t&&(this.emit("change",[t,"presence"]),this.emit("update",[t,"presence"]))})}rebuildActorToClientMap(e){this.actorToClientMap.clear(),e.forEach(e=>{void 0!==e.presence[d3]&&this.actorToClientMap.set(e.connectionId,e.presence[d3])})}destroy(){this.emit("destroy",[this]),this.othersUnsub(),this.setLocalState(null),super.destroy()}getLocalState(){let e=this.room.getPresence();return 0===Object.keys(e).length||void 0===e[d8]?null:e[d8]}setLocalState(e){let t=this.room.getSelf()?.presence;if(null===e){if(void 0===t)return;this.room.updatePresence({...t,[d8]:null}),this.emit("update",[{added:[],updated:[],removed:[this.doc.clientID]},"local"]);return}let r=t?.[d8],n=void 0===r?[this.doc.clientID]:[],i=void 0===r?[]:[this.doc.clientID];this.room.updatePresence({[d8]:{...r||{},...e||{}}}),this.emit("update",[{added:n,updated:i,removed:[]},"local"])}setLocalStateField(e,t){let r=this.room.getSelf()?.presence[d8];this.room.updatePresence({[d8]:{...r||{},...{[e]:t}}})}getStates(){let e=this.room.getOthers().reduce((e,t)=>{let r=t.presence[d8],n=t.presence[d3];return void 0!==r&&void 0!==n&&e.set(n,r||{}),e},new Map),t=this.room.getSelf()?.presence[d8];return void 0!==t&&e.set(this.doc.clientID,t),e}},d6=class e extends d4{unsubscribers=[];_synced=!1;doc;updateRoomDoc;fetchRoomDoc;useV2Encoding;localSnapshotHashΣ;remoteSnapshotHashΣ;debounceTimer=null;static DEBOUNCE_INTERVAL_MS=200;isLocalAndRemoteSnapshotEqualΣ;constructor({doc:e,isRoot:t,updateDoc:r,fetchDoc:n,useV2Encoding:i}){super(),this.doc=e,this.useV2Encoding=i,this.doc.on(i?"updateV2":"update",this.updateHandler),this.updateRoomDoc=e=>{r(e,t?void 0:this.doc.guid)},this.fetchRoomDoc=e=>{n(e,t?void 0:this.doc.guid)},this.syncDoc();let l=this.useV2Encoding?ad(ap(this.doc)):ah(ap(this.doc));this.localSnapshotHashΣ=new lh.HN(df.fromUint8Array(dQ(l))),this.remoteSnapshotHashΣ=new lh.HN(null),this.isLocalAndRemoteSnapshotEqualΣ=lh.ez.from(()=>{let e=this.remoteSnapshotHashΣ.get();return null!==e&&this.localSnapshotHashΣ.get()===e})}handleServerUpdate=({update:e,stateVector:t,readOnly:r,v2:n,remoteSnapshotHash:i})=>{if((n?oK:oV)(this.doc,e,"backend"),t){if(!r)try{let e=(this.useV2Encoding?oX:oq)(this.doc,df.toUint8Array(t));this.updateRoomDoc(e)}catch(e){console.warn(e)}this.synced=!0}this.remoteSnapshotHashΣ.set(i)};syncDoc=()=>{this.synced=!1;let e=df.fromUint8Array(o0(this.doc));this.fetchRoomDoc(e)};get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}debounced_updateLocalSnapshot(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{let e=this.useV2Encoding?ad(ap(this.doc)):ah(ap(this.doc));this.localSnapshotHashΣ.set(df.fromUint8Array(dQ(e))),this.debounceTimer=null},e.DEBOUNCE_INTERVAL_MS)}updateHandler=(e,t)=>{this.debounced_updateLocalSnapshot(),"backend"===t||t instanceof dM||this.updateRoomDoc(e)};experimental_getSyncStatus(){return null===this.remoteSnapshotHashΣ.get()?"loading":this.isLocalAndRemoteSnapshotEqualΣ.get()?"synchronized":"synchronizing"}destroy(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.doc.off("update",this.updateHandler),this.unsubscribers.forEach(e=>e()),this._observers=new Map,this.doc.destroy()}},d9=class extends d4{room;rootDoc;options;indexeddbProvider=null;isPaused=!1;unsubscribers=[];awareness;rootDocHandler;subdocHandlersΣ=new lh.Xf(new Map);syncStatusΣ;permanentUserData;constructor(e,t,r={}){super(),this.rootDoc=t,this.room=e,this.options=r,this.rootDocHandler=new d6({doc:t,isRoot:!0,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc,useV2Encoding:this.options.useV2Encoding_experimental??!1}),this.options.enablePermanentUserData&&(this.permanentUserData=new at(t)),e[lh.HM].setYjsProvider(this),this.awareness=new d5(this.rootDoc,this.room),this.unsubscribers.push(this.room.events.status.subscribe(e=>{"connected"===e?this.rootDocHandler.syncDoc():this.rootDocHandler.synced=!1})),this.unsubscribers.push(this.room.events.ydoc.subscribe(e=>{let{type:t}=e;if(t===lh.oK.UPDATE_YDOC)return;let{stateVector:r,update:n,guid:i,v2:l,remoteSnapshotHash:s}=e,o=this.room.getSelf()?.canWrite??!0,a=df.toUint8Array(n);void 0!==i?this.subdocHandlersΣ.get().get(i)?.handleServerUpdate({update:a,stateVector:r,readOnly:!o,v2:l,remoteSnapshotHash:s}):this.rootDocHandler.handleServerUpdate({update:a,stateVector:r,readOnly:!o,v2:l,remoteSnapshotHash:s})})),r.offlineSupport_experimental&&this.setupOfflineSupport(),this.rootDocHandler.on("synced",()=>{let e=this.rootDocHandler.synced;for(let[e,t]of this.subdocHandlersΣ.get())t.syncDoc();this.emit("synced",[e]),this.emit("sync",[e])}),this.rootDoc.on("subdocs",this.handleSubdocs),this.syncDoc(),this.syncStatusΣ=lh.ez.from(()=>{let e=this.rootDocHandler.experimental_getSyncStatus();return"loading"===e||"synchronizing"===e?e:Array.from(this.subdocHandlersΣ.get().values()).map(e=>e.experimental_getSyncStatus()).some(e=>"synchronized"!==e)?"synchronizing":"synchronized"}),this.emit("status",[this.getStatus()]),this.unsubscribers.push(this.syncStatusΣ.subscribe(()=>{this.emit("status",[this.getStatus()])}))}setupOfflineSupport=()=>{this.indexeddbProvider=new dM(this.room.id,this.rootDoc);let e=()=>{this.rootDocHandler.synced=!0};this.indexeddbProvider.on("synced",e),this.unsubscribers.push(()=>{this.indexeddbProvider?.off("synced",e)})};handleSubdocs=({loaded:e,removed:t,added:r})=>{e.forEach(this.createSubdocHandler);let n=this.subdocHandlersΣ.get();if(this.options.autoloadSubdocs)for(let e of r)n.has(e.guid)||e.load();for(let e of t)n.has(e.guid)&&(n.get(e.guid)?.destroy(),n.delete(e.guid))};updateDoc=(e,t)=>{(this.room.getSelf()?.canWrite??!0)&&!this.isPaused&&this.room.updateYDoc(df.fromUint8Array(e),t,this.useV2Encoding)};fetchDoc=(e,t)=>{this.room.fetchYDoc(e,t,this.useV2Encoding)};createSubdocHandler=e=>{let t=this.subdocHandlersΣ.get();if(t.has(e.guid))return void t.get(e.guid)?.syncDoc();let r=new d6({doc:e,isRoot:!1,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc,useV2Encoding:this.options.useV2Encoding_experimental??!1});t.set(e.guid,r)};loadSubdoc=e=>{for(let t of this.rootDoc.subdocs)if(t.guid===e)return t.load(),!0;return!1};syncDoc=()=>{for(let[e,t]of(this.rootDocHandler.syncDoc(),this.subdocHandlersΣ.get()))t.syncDoc()};get useV2Encoding(){return this.options.useV2Encoding_experimental??!1}get synced(){return this.rootDocHandler.synced}async pause(){await this.indexeddbProvider?.destroy(),this.indexeddbProvider=null,this.isPaused=!0}unpause(){this.isPaused=!1,this.options.offlineSupport_experimental&&this.setupOfflineSupport(),this.rootDocHandler.syncDoc()}getStatus(){return this.syncStatusΣ.get()}destroy(){for(let[e,t]of(this.unsubscribers.forEach(e=>e()),this.awareness.destroy(),this.rootDocHandler.destroy(),this._observers=new Map,this.subdocHandlersΣ.get()))t.destroy();this.subdocHandlersΣ.get().clear(),super.destroy()}async clearOfflineData(){if(this.indexeddbProvider)return this.indexeddbProvider.clearData()}getYDoc(){return this.rootDoc}disconnect(){}connect(){}get subdocHandlers(){return this.subdocHandlersΣ.get()}set subdocHandlers(e){this.subdocHandlersΣ.mutate(t=>{for(let[r,n]of(t.clear(),e))t.set(r,n)})}},d7=new WeakMap,he=(e,t={})=>{let r=d7.get(e);if(void 0!==r)return r;let n=new d9(e,new oN,t);return e.events.roomWillDestroy.subscribeOnce(()=>{n.destroy()}),d7.set(e,n),n};(0,lh.js)("@liveblocks/yjs","3.2.1","esm");let ht=(0,a.createContext)(null),hr=(0,a.createContext)(null),hn=(0,a.createContext)(null),hi=(0,a.createContext)(null);function hl({children:e}){let[t,r]=h(),[n,s]=(0,a.useState)(new Map),[o,u]=(0,a.useState)([]),c=(0,l.tH)(),d=(0,l.yh)(),f=(0,a.useCallback)(e=>o.includes(e),[o]),p=(0,a.useCallback)(e=>{t.update(()=>{let t=n.get(e);if(void 0!==t)for(let r of t){let t=e0(r);ld(t)&&(t.deleteID(e),0===t.getIDs().length&&function(e){let t=e.getChildren(),r=null;for(let n=0;n<t.length;n++){let i=t[n];null===r?e.insertBefore(i):r.insertAfter(i),r=i}e.remove()}(t))}})},[t,n]);(0,l.oY)(e=>{"CREATE_THREAD_ERROR"===e.context.type&&e.context.roomId===d.id&&p(e.context.threadId)});let g=(0,l.sX)(c),m=d.id;return(0,l.Ul)(g.outputs.threads,(0,a.useCallback)(e=>e.findMany(m,{resolved:!1},"asc").map(e=>e.id),[m]),lh.x7),(0,i.jsx)(ht.Provider,{value:p,children:(0,i.jsx)(hr.Provider,{value:o,children:(0,i.jsx)(hn.Provider,{value:f,children:(0,i.jsx)(hi.Provider,{value:n,children:e})})})})}var hs=r(98305);let ho=(0,a.createContext)(null),ha=(0,a.createContext)(null),hu=(0,a.createContext)(null),hc=(0,a.createContext)(null),hd=(0,a.forwardRef)(function(e,t){let{children:r,...n}=e,[l]=h(),[s,o]=(0,a.useState)(0),u=hf(),c=hp(),d=function(){let e=(0,a.useContext)(hu);if(null===e)throw Error("useOnResetMatchCallback: OnResetMatchContext not found");return e}();return(0,a.useEffect)(()=>l.registerCommand(A,function(e){return 0===u.length||null===s||(o(s===u.length-1?0:s+1),e.preventDefault(),e.stopImmediatePropagation(),!0)},1),[l,s,u]),(0,a.useEffect)(()=>l.registerCommand(D,function(e){return 0===u.length||null===s||(o(0===s?u.length-1:s-1),e.preventDefault(),e.stopImmediatePropagation(),!0)},1),[l,s,u]),(0,a.useEffect)(()=>l.registerCommand(L,function(e){return e.preventDefault(),e.stopImmediatePropagation(),d(),!0},1),[l,d]),(0,a.useEffect)(()=>l.registerCommand(j,function(e){return 0===u.length||(c(u[s]),null===e||(e.preventDefault(),e.stopImmediatePropagation(),!0))},1),[l,c,s,u]),(0,a.useEffect)(()=>{let e=l.getRootElement();if(null!==e)return e.setAttribute("aria-activedescendant",`typeahead-item-${s}`),()=>{e.removeAttribute("aria-activedescendant")}},[l,s]),(0,i.jsx)(hc.Provider,{value:[s,o],children:(0,i.jsx)("div",{role:"listbox",...n,ref:t,children:r})})}),hh=(0,a.forwardRef)(function(e,t){let{children:r,value:n,onMouseEnter:l,onClick:s,...o}=e,u=(0,a.useRef)(null),[c,d]=function(){let e=(0,a.useContext)(hc);if(null===e)throw Error("useHighlightedIndex must be used within a HighlightedIndexProvider");return e}(),h=hf(),f=hp(),p=h[c].id===n;return(0,a.useImperativeHandle)(t,()=>u.current),(0,a.useEffect)(()=>{if(!p)return;let e=u.current;null!==e&&e.scrollIntoView({block:"nearest"})},[p]),(0,i.jsx)("div",{role:"option","data-highlighted":p||void 0,onMouseEnter:function(e){if(l?.(e),e.isDefaultPrevented())return;let t=h.findIndex(e=>e.id===n);-1!==t&&d(t)},onClick:function(e){s?.(e),e.isDefaultPrevented()||f(h[c])},...o,ref:u,children:r})});function hf(){let e=(0,a.useContext)(ho);if(null===e)throw Error("useSuggestions: SuggestionsContext not found");return e}function hp(){let e=(0,a.useContext)(ha);if(null===e)throw Error("useOnSuggestionSelectCallback: OnSuggestionSelectContext not found");return e}let hg="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";function hm(){let[e]=h(),t=(0,l.yh)(),[r,n]=(0,a.useState)(null),s=r?.[3],o=(0,cX.P4)(t.id,s);(0,l.N5)(),(0,l.Q2)();let u=(0,a.useCallback)(t=>{e.update(function(){let e;if(null===r)return;n(null);let i=ng();if(!nt(i)||!i.isCollapsed())return;let l=i.anchor;if("text"!==l.type)return;let s=l.getNode();if(!s.isSimpleText())return;let o=l.offset,a=s.getTextContent().slice(0,o),u=r[2].length,c=o-function(e,t,r){let n=r;for(let r=n;r<=t.length;r++)e.substr(-r)===t.substr(0,r)&&(n=r);return n}(a,r[2],u);if(!(c<0)){if("user"!==t.kind)return(0,lh.xb)(t.kind,"Unhandled mention kind");if(e=lm(t.id),0===c){let[t]=s.splitText(o);t.replace(e)}else{let[,t]=s.splitText(c,o);t.replace(e)}}})},[e,r]);if(null===r||void 0===s||void 0===o||0===o.length)return null;let c=e.getEditorState().read(()=>(function(e){let t=e.index+e[1].length;if(function(e){if(0!==e)return!1;let t=ng();if(!nt(t))return!1;let r=t.anchor.getNode().getPreviousSibling();return!!r2(r)&&!!r.isTextEntity()}(t))return null;let r=window.getSelection();if(null===r||!r.isCollapsed)return null;let n=r.anchorNode;if(null===n)return null;let i=r.anchorOffset;if(null===i)return null;let l=document.createRange();try{return l.setStart(n,t),l.setEnd(n,i),l}catch(e){return null}})(r));return null===c?null:(0,i8.createPortal)((0,i.jsx)(ho.Provider,{value:o,children:(0,i.jsx)(ha.Provider,{value:u,children:(0,i.jsx)(hu.Provider,{value:()=>n(null),children:(0,i.jsx)(h_,{range:c,container:document.body,children:(0,i.jsx)(hd,{className:"lb-lexical-suggestions-list lb-lexical-mention-suggestions-list",children:o.map(e=>"user"===e.kind?(0,i.jsxs)(hh,{value:e.id,className:"lb-lexical-suggestions-list-item lb-lexical-mention-suggestion",children:[(0,i.jsx)(hs.e,{userId:e.id,className:"lb-lexical-mention-suggestion-avatar"}),(0,i.jsx)(lf.K,{userId:e.id,className:"lb-lexical-mention-suggestion-user"})]},e.id):(0,lh.xb)(e.kind,"Unhandled mention kind"))})},s)})})}),document.body)}function h_({children:e,range:t,container:r}){let{refs:{setReference:n,setFloating:l},strategy:s,x:o,y:a}=(0,l_.we)({strategy:"fixed",placement:"top-start",middleware:[(0,l_.UU)({padding:10,crossAxis:!1}),(0,l_.cY)(10),(0,l_.jD)({padding:10}),(0,l_.BN)({padding:10,limiter:(0,l_.ER)()}),(0,l_.Ej)({padding:10})],whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});return(0,cX.Nf)(()=>{n({getBoundingClientRect:()=>t.getBoundingClientRect()})},[n,t]),(0,i8.createPortal)((0,i.jsx)("div",{ref:l,style:{position:s,top:0,left:0,transform:`translate3d(${Math.round(o)}px, ${Math.round(a)}px, 0)`,minWidth:"max-content"},className:"lb-root lb-portal lb-elevation lb-lexical-suggestions lb-lexical-mention-suggestions",children:e}),r)}RegExp("(^|\\s|\\()([@]((?:[^@"+hg+"\\s](?:\\.[ |$]| |["+hg+"]|)){0,75}))$");let hy=({children:e})=>{let t=void 0!==(0,l.Nv)(),[r]=h(),n=(0,l.yh)();if(!r.hasNodes([lu,lg]))throw Error("LiveblocksPlugin requires Lexical configuration to be wrapped in the `liveblocksConfig(options)` function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-react-lexical#liveblocksConfig");let[s,o]=(0,a.useState)(void 0),{refs:{setReference:u,setFloating:c},strategy:d,x:f,y:p}=(0,l_.we)({strategy:"fixed",placement:"bottom",whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});(0,a.useEffect)(()=>{},[]),(0,l.cr)(lh.N1.Lexical,"root");let g=(0,l.bK)(),m=(0,a.useCallback)((e,t)=>{let r=he(n);return t.set(e,r.getYDoc()),r},[n]),_=function(){let[e]=h(),t=(0,a.useCallback)(t=>e.registerRootListener(t),[e]),r=(0,a.useCallback)(()=>e.getRootElement(),[e]);return(0,a.useSyncExternalStore)(t,r,r)}();(0,cX.Nf)(()=>{null!==_&&u({getBoundingClientRect:()=>_.getBoundingClientRect()})},[u,_]);let y=(0,a.useCallback)(e=>{c(e),o({current:e})},[c,o]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:y,className:"lb-root lb-lexical-cursors",style:{position:d,top:0,left:0,transform:`translate3d(${Math.round(f)}px, ${Math.round(p)}px, 0)`,minWidth:"max-content"}}),g&&(0,i.jsx)(cV,{id:n.id,providerFactory:m,username:g.info?.name??"",cursorColor:g.info?.color,cursorsContainerRef:s,shouldBootstrap:!0},n.id),t&&(0,i.jsx)(hm,{}),(0,i.jsx)(hl,{children:e})]})};var hb=r(34357);function hx(e){let t=e;for(;null!==t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function hv(e){let t=e.parentNode;if(null===t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function hw(e,t,r,n,i){let l=t.getKey(),s=n.getKey(),o=document.createRange(),a=e.getElementByKey(l),u=e.getElementByKey(s),c=r,d=i;if(r2(t)&&(a=hx(a)),r2(n)&&(u=hx(u)),void 0===t||void 0===n||null===a||null===u)return null;"BR"===a.nodeName&&([a,c]=hv(a)),"BR"===u.nodeName&&([u,d]=hv(u));let h=a.firstChild;a===u&&null!==h&&"BR"===h.nodeName&&0===c&&0===d&&(d=1);try{o.setStart(a,c),o.setEnd(u,d)}catch(e){return null}return o.collapsed&&(c!==d||l!==s)&&(o.setStart(u,d),o.setEnd(a,c)),o}let hS={},hE=(0,a.forwardRef)(function(e,t){let[r,n]=(0,a.useState)(null),[l]=h();return((0,a.useEffect)(()=>l.registerCommand(hS,()=>{let e=ng();if(!nt(e)||e.isCollapsed())return!1;let{anchor:t,focus:r}=e;return n(hw(l,t.getNode(),t.offset,r.getNode(),r.offset)),!0},0),[l]),null===r)?null:(0,i.jsx)(hC,{ref:t,...e,range:r,onRangeChange:n})}),hC=(0,a.forwardRef)(function(e,t){let{range:r,onRangeChange:n,onKeyDown:s,onComposerSubmit:o,...u}=e,[c]=h(),d=(0,l.PD)(),f=(0,a.useCallback)(()=>{let e=ng();if(!nt(e)||e.isCollapsed())return null;let{anchor:t,focus:r}=e;return hw(c,t.getNode(),t.offset,r.getNode(),r.offset)},[c]);(0,a.useEffect)(()=>c.registerUpdateListener(({editorState:e,tags:t})=>{if(!t.has("collaboration"))return void n(null);n(e.read(()=>f()))}),[c,r,n,f]);let p=(0,a.useCallback)(e=>{c.update(()=>{let t=ng();if(!nt(t)||t.isCollapsed())return;let r=t.isBackward();!function(e,t,r,n){let i,l,s=e.getNodes(),o=e.anchor.offset,a=e.focus.offset,u=s.length,c=t?a:o,d=t?o:a;for(let e=0;e<u;e++){let t=s[e];if(nq(l)&&l.isParentOf(t))continue;let n=0===e,o=e===u-1,a=null;if(r2(t)){let e=t.getTextContentSize(),r=n?c:0,i=o?d:e;if(0===r&&0===i)continue;let l=t.splitText(r,i);a=l.length>1&&(3===l.length||n&&!o||i===e)?l[1]:l[0]}else{if(ld(t))continue;nq(t)&&t.isInline()&&(a=t)}if(null!==a){if(a&&a.is(i))continue;let e=a.getParent();null!==e&&e.is(i)||(l=void 0),i=e,void 0===l&&(l=lc([r]),a.insertBefore(l)),l.append(a)}else i=void 0,l=void 0}nq(l)&&(t?l.selectStart():l.selectEnd())}(t,r,e),e9(null)})},[c]),g=(0,a.useCallback)((t,r)=>{o?.(t,r),r.defaultPrevented||(r.preventDefault(),p(d({body:t.body,attachments:t.attachments,metadata:e.metadata??{}}).id))},[p,o,e.metadata,d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(hk,{range:r,container:document.body}),(0,i.jsx)(hT,{range:r,container:document.body,children:(0,i.jsx)(hb.D,{autoFocus:!0,...u,onKeyDown:function(e){s?.(e),e.isDefaultPrevented()||"Escape"===e.key&&(n(null),c.focus())},onComposerSubmit:g,ref:t})})]})});function hk({range:e,container:t}){let{refs:{setReference:r,setFloating:n},strategy:l,x:s,y:o}=(0,l_.we)({strategy:"fixed",placement:"bottom",middleware:[(0,l_.cY)(-e.getBoundingClientRect().height)],whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});(0,cX.Nf)(()=>{r(e)},[r,e]);let[a]=h(),u=function(e,t){let r,n=e.getRootElement();if(null===n)return[];let i=n.getBoundingClientRect(),l=getComputedStyle(n),s=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight),o=Array.from(t.getClientRects()),a=o.length;o.sort((e,t)=>{let r=e.top-t.top;return 3>=Math.abs(r)?e.left-t.left:r});for(let e=0;e<a;e++){let t=o[e],n=r&&r.top<=t.top&&r.top+r.height>t.top&&r.left+r.width>t.left,l=t.width+s===i.width;if(n||l){o.splice(e--,1),a--;continue}r=t}return o}(a,e);return(0,i8.createPortal)((0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{ref:n,style:{position:l,top:0,left:0,transform:`translate3d(${Math.round(s)}px, ${Math.round(o)}px, 0)`,minWidth:"max-content",width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height,pointerEvents:"none"},className:"lb-root lb-portal",children:u.map(t=>(0,i.jsx)("span",{style:{position:"absolute",top:t.top-e.getBoundingClientRect().top,left:t.left-e.getBoundingClientRect().left,width:t.width,height:t.height,backgroundColor:"var(--lb-selection, rgba(0, 0, 255, 0.2))",pointerEvents:"none"},className:"lb-selection lb-lexical-active-selection"},JSON.stringify(t)))})}),t)}function hT({container:e,range:t,children:r}){let{refs:{setReference:n,setFloating:l},strategy:s,x:o,y:a}=(0,l_.we)({strategy:"fixed",placement:"bottom",middleware:[(0,l_.mG)({padding:10}),(0,l_.UU)({padding:10,crossAxis:!1}),(0,l_.cY)(10),(0,l_.jD)({padding:10}),(0,l_.BN)({padding:10,limiter:(0,l_.ER)()}),(0,l_.Ej)({padding:10})],whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});return(0,cX.Nf)(()=>{n(t)},[t,n]),(0,i8.createPortal)((0,i.jsx)("div",{ref:l,style:{position:s,top:0,left:0,transform:`translate3d(${Math.round(o)}px, ${Math.round(a)}px, 0)`,minWidth:"max-content"},className:"lb-root lb-portal lb-elevation lb-lexical-floating lb-lexical-floating-composer",children:r}),e)}var hP=r(8686),hN=r(58412);function hR(e){return(0,i.jsx)(hN.In,{...e,children:(0,i.jsx)("path",{d:"M10 4v12m6-6-6 6-6-6"})})}var hO=r(50082),hD=r(49301);function hA(e){return(0,i.jsxs)(hN.In,{...e,children:[(0,i.jsx)("circle",{cx:10,cy:10,r:7}),(0,i.jsx)("path",{d:"m13 8-4 4-2-2"})]})}function hj(e){return(0,i.jsxs)(hN.In,{...e,children:[(0,i.jsx)("circle",{cx:10,cy:10,r:7,fill:"currentColor"}),(0,i.jsx)("path",{d:"m13 8-4 4-2-2",stroke:"var(--lb-icon-background)"})]})}var hI=r(84941),hM=r(14059),hL=r(39522),hF=r(8557),hB=r(92384),hU=r(85494),hz=r(9989);let hW=(0,a.forwardRef)(({thread:e,indentCommentContent:t=!0,showActions:r="hover",showDeletedComments:n,showResolveAction:s=!0,showReactions:o=!0,showComposer:u="collapsed",showAttachments:c=!0,showComposerFormattingControls:d=!0,onResolvedChange:h,onCommentEdit:f,onCommentDelete:p,onThreadDelete:g,onAuthorClick:m,onMentionClick:_,onAttachmentClick:y,onComposerSubmit:b,blurComposerOnSubmit:x,overrides:v,components:w,className:S,...E},C)=>{let k=(0,l.eJ)(e.roomId),T=(0,l.$n)(e.roomId),P=(0,hI.Pv)(v),N=(0,a.useMemo)(()=>n?0:e.comments.findIndex(e=>e.body),[n,e.comments]),R=(0,a.useMemo)(()=>n?e.comments.length-1:function(e,t){let r=e.length-1;for(;r>=0;){let n=e[r];if(n&&t(n))return r;r--}return -1}(e.comments,e=>e.body),[n,e.comments]),{status:O,unreadSince:D,subscribe:A,unsubscribe:j}=(0,l.mp)(e.roomId,e.id),I=(0,a.useMemo)(()=>{if("subscribed"!==O)return;if(null===D)return N;let t=e.comments.findIndex(e=>(!!n||e.body)&&e.createdAt>D);return t>=0&&t<e.comments.length?t:void 0},[N,n,O,e.comments,D]),[M,L]=(0,a.useState)(),F=void 0===M?I:M;(0,a.useEffect)(()=>{I&&L(e=>Math.min(e??1/0,I))},[I]);let B=(0,l.tK)(e.roomId),U=!(B.size>0)||B.has(lh.aX.CommentsWrite)||B.has(lh.aX.Write),z=(0,a.useCallback)(e=>{e.stopPropagation()},[]),W=(0,a.useCallback)(t=>{h?.(t),t?k(e.id):T(e.id)},[k,T,h,e.id]),H=(0,a.useCallback)(t=>{p?.(t),e.comments.filter(e=>e.body).length<=1&&g?.(e)},[p,g,e]),K=(0,a.useCallback)(()=>{"subscribed"===O?j():A()},[O,A,j]);return(0,i.jsx)(hz.Bc,{children:(0,i.jsxs)("div",{className:(0,hM.cn)("lb-root lb-thread","hover"===r&&"lb-thread:show-actions-hover",S),"data-resolved":e.resolved?"":void 0,"data-unread":void 0!==I?"":void 0,dir:P.dir,...E,ref:C,children:[(0,i.jsx)("div",{className:"lb-thread-comments",children:e.comments.map((l,u)=>{let h=u===N,p=void 0!==I&&u>=I,g=(0,i.jsx)(hL.Mw,{overrides:v,className:"lb-thread-comment","data-unread":p?"":void 0,comment:l,indentContent:t,showDeleted:n,showActions:r,showReactions:o,showAttachments:c,showComposerFormattingControls:d,onCommentEdit:f,onCommentDelete:H,onAuthorClick:m,onMentionClick:_,onAttachmentClick:y,components:w,autoMarkReadThreadId:u===R&&p?e.id:void 0,additionalActionsClassName:h?"lb-thread-actions":void 0,additionalActions:h&&s?(0,i.jsx)(hU.m_,{content:e.resolved?P.THREAD_UNRESOLVE:P.THREAD_RESOLVE,children:(0,i.jsx)(hP.b,{pressed:e.resolved,onPressedChange:W,asChild:!0,children:(0,i.jsx)(hF.$n,{className:"lb-comment-action",onClick:z,"aria-label":e.resolved?P.THREAD_UNRESOLVE:P.THREAD_RESOLVE,icon:e.resolved?(0,i.jsx)(hj,{}):(0,i.jsx)(hA,{}),disabled:!U})})}):null,additionalDropdownItemsBefore:h?(0,i.jsx)(hB.tJ,{onSelect:K,onClick:z,icon:"subscribed"===O?(0,i.jsx)(hD.w,{}):(0,i.jsx)(hO.X,{}),children:"subscribed"===O?P.THREAD_UNSUBSCRIBE:P.THREAD_SUBSCRIBE}):null},l.id);return u===F&&F!==N&&F<=R?(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:"lb-thread-new-indicator","aria-label":P.THREAD_NEW_INDICATOR_DESCRIPTION,children:(0,i.jsxs)("span",{className:"lb-thread-new-indicator-label",children:[(0,i.jsx)(hR,{className:"lb-thread-new-indicator-label-icon"}),P.THREAD_NEW_INDICATOR]})}),g]},l.id):g})}),u&&(0,i.jsx)(hb.D,{className:"lb-thread-composer",threadId:e.id,defaultCollapsed:"collapsed"===u||void 0,showAttachments:c,showFormattingControls:d,onComposerSubmit:b,blurOnSubmit:x,overrides:{COMPOSER_PLACEHOLDER:P.THREAD_COMPOSER_PLACEHOLDER,COMPOSER_SEND:P.THREAD_COMPOSER_SEND,...v},roomId:e.roomId})]})})});function hH(e,t){let r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0}function hK({threads:e,components:t,...r}){let n=function(){let e=(0,a.useContext)(hr);if(null===e)throw Error("FloatingThreads component must be used within LiveblocksPlugin.");return e}(),l=t?.Thread??hW,[s]=h(),o=function(){let e=(0,a.useContext)(hi);if(null===e)throw Error("FloatingThreads component must be used within a LiveblocksPlugin component.");return e}(),[u,c]=(0,a.useState)(null);(0,a.useCallback)(()=>{let t=(e??[]).filter(e=>n.includes(e.id)),r=function(){let e=Array.from(function(){let e=new Set;for(let t of n){let r=o.get(t);if(void 0!==r)for(let t of r){let r=s.getElementByKey(t);null!==r&&e.add(r)}}return e}()).sort(hH);if(0===e.length)return null;let t=document.createRange();return t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1]),t}();if(null===r)return void c(null);c({range:r,threads:t})},[n,o,s,e]);let d=(0,a.useCallback)(()=>null!==u&&(c(null),!0),[u]),f=function(){let[e]=h(),t=(0,a.useCallback)(t=>e.registerUpdateListener(t),[e]),r=(0,a.useCallback)(()=>e.getEditorState().read(()=>{let e=ng();return null===e?null:e.isCollapsed()}),[e]);return(0,a.useSyncExternalStore)(t,r,r)}();return null!==u&&null!==f&&f?(0,i.jsx)(hV,{range:u.range,container:document.body,...r,children:u.threads.map(e=>(0,i.jsx)(h$,{thread:e,Thread:l,onEscapeKeydown:d,className:"lb-lexical-floating-threads-thread"},e.id))}):null}function hV({container:e,range:t,children:r,className:n,style:l,...s}){let{refs:{setReference:o,setFloating:a},strategy:u,x:c,y:d}=(0,l_.we)({strategy:"absolute",placement:"bottom",middleware:[(0,l_.UU)({padding:10,crossAxis:!1}),(0,l_.cY)(10),(0,l_.jD)({padding:10}),(0,l_.BN)({padding:10,limiter:(0,l_.ER)()}),(0,l_.Ej)({padding:10,apply({availableWidth:e,availableHeight:t,elements:r}){r.floating.style.setProperty("--lb-lexical-floating-threads-available-width",`${e}px`),r.floating.style.setProperty("--lb-lexical-floating-threads-available-height",`${t}px`)}})],whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});return(0,cX.Nf)(()=>{o({getBoundingClientRect:()=>t.getBoundingClientRect()})},[o,t]),(0,i8.createPortal)((0,i.jsx)("div",{ref:a,...s,style:{...l,position:u,top:0,left:0,transform:`translate3d(${Math.round(c)}px, ${Math.round(d)}px, 0)`,minWidth:"max-content"},className:(0,hM.cn)("lb-root lb-portal lb-elevation lb-lexical-floating lb-lexical-floating-threads",n),children:r}),e)}function h$({thread:e,Thread:t,onEscapeKeydown:r,onKeyDown:n,...l}){let s=(0,a.useCallback)(e=>{n?.(e),"Escape"===e.key&&r()},[r,n]);return(0,i.jsx)(t,{thread:e,onKeyDown:s,...l})}var hX=r(30474);function hq(){let[e]=h(),[t,r]=(0,a.useState)(null);return null===t?null:(0,i.jsx)(hJ,{range:t,onRangeChange:r,container:document.body})}function hJ({range:e,onRangeChange:t,container:r}){let[n]=h(),{refs:{setReference:l,setFloating:s},strategy:o,x:a,y:u}=(0,l_.we)({strategy:"fixed",placement:"bottom",middleware:[(0,l_.UU)({padding:20,crossAxis:!1}),(0,l_.cY)(10),(0,l_.jD)({padding:20}),(0,l_.BN)({padding:20,limiter:(0,l_.ER)()}),(0,l_.Ej)({padding:20})],whileElementsMounted:(...e)=>(0,ly.ll)(...e,{animationFrame:!0})});return(0,i8.createPortal)((0,i.jsx)("div",{ref:s,style:{position:o,top:0,left:0,transform:`translate3d(${Math.round(a)}px, ${Math.round(u)}px, 0)`,minWidth:"max-content"},children:(0,i.jsx)("div",{className:"floating-toolbar",children:(0,i.jsx)("button",{onClick:()=>{n.dispatchCommand(hS,void 0)&&t(null)},className:"floating-toolbar-btn",children:(0,i.jsx)(hX.default,{src:"/assets/icons/comment.svg",alt:"comment",width:24,height:24})})})}),r)}var hG=r(96241);let hY=({thread:e})=>{let t=function(e){let t=(0,a.useContext)(hn);if(null===t)throw Error("useIsThreadActive must be used within LiveblocksPlugin. For more information: https://liveblocks.io/docs/api-reference/liveblocks-react-lexical#useIsThreadActive");return t(e)}(e.id);return(0,i.jsx)(hW,{thread:e,"data-state":t?"active":null,className:(0,hG.cn)("comment-thread border",t&&"!border-blue-500 shadow-md",e.resolved&&"opacity-40")})},hQ=()=>{let{threads:e}=(0,l._j)();return(0,i.jsxs)("div",{className:"comments-container",children:[(0,i.jsx)(hb.D,{className:"comment-composer"}),e.map(e=>(0,i.jsx)(hY,{thread:e},e.id))]})};var hZ=r(60443);function h0(){return(0,i.jsx)("div",{className:"editor-placeholder",children:"Enter some rich text..."})}function h1({roomId:e,currentUserType:t}){(0,l.dW)();let{threads:r}=(0,l.q9)(),n=function(e){let t=[...e.nodes??[]];return t.push(lu,lg),{...e,nodes:t,editorState:null}}({namespace:"Editor",nodes:[iz],onError:e=>{throw e},theme:o,editable:"editor"===t});return(0,i.jsx)(i0,{initialConfig:n,children:(0,i.jsxs)("div",{className:"editor-container size-full",children:[(0,i.jsxs)("div",{className:"toolbar-wrapper flex min-w-full justify-between",children:[(0,i.jsx)(iG,{}),"editor"===t&&(0,i.jsx)(hZ.DeleteModal,{roomId:e})]}),(0,i.jsxs)("div",{className:"editor-wrapper flex flex-col items-center justify-start",children:[(0,i.jsxs)("div",{className:"editor-inner min-h-[1100px] relative mb-5 h-fit w-full max-w-[800px] shadow-md lg:mb-10",children:[(0,i.jsx)(i6,{contentEditable:(0,i.jsx)(lr,{className:"editor-input h-full"}),placeholder:(0,i.jsx)(h0,{}),ErrorBoundary:la}),"editor"===t&&(0,i.jsx)(hq,{}),(0,i.jsx)(li,{}),(0,i.jsx)(iY,{})]}),(0,i.jsxs)(hy,{children:[(0,i.jsx)(hE,{className:"w-[350px]"}),(0,i.jsx)(hK,{threads:r}),(0,i.jsx)(hQ,{})]})]})]})})}var h2=r(85814),h4=r.n(h2);let h8=({children:e,className:t})=>(0,i.jsxs)("div",{className:(0,hG.cn)("header",t),children:[(0,i.jsxs)(h4(),{href:"/",className:"md:flex-1",children:[(0,i.jsx)(hX.default,{src:"/assets/icons/logo.svg",alt:"Logo with name",width:120,height:32,className:"hidden md:block"}),(0,i.jsx)(hX.default,{src:"/assets/icons/logo-icon.svg",alt:"Logo",width:32,height:32,className:"mr-2 md:hidden"})]}),e]});r(26293),r(93596);var h3=r(84238),h5=r(41236),h6=r(91953),h9=r(16202),h7=r(95486),fe=r(74159);let ft=()=>{};var fr=r(3870),fn=r(69591),fi=r(20718);(0,h5.wV)({packageName:"@clerk/nextjs"}),(0,h5.kX)("@clerk/nextjs");let fl=h3.iB,fs=h3.Bl;h3.EH;let fo=()=>{let e=(0,l.Ac)().map(e=>e.info);return(0,i.jsx)("ul",{className:"collaborators-list",children:e.map(({id:e,avatar:t,name:r,color:n})=>(0,i.jsx)("li",{children:(0,i.jsx)(hX.default,{src:t,alt:r,width:100,height:100,className:"inline-block size-8 rounded-full ring-2 ring-dark-100",style:{border:`3px solid ${n}`}})},e))})};function fa({className:e,type:t,...r}){return(0,i.jsx)("input",{type:t,"data-slot":"input",className:(0,hG.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var fu=r(6475);let fc=(0,fu.createServerReference)("7f8a223d93f0a8b6822911a8cf71287b123a2dfa2d",fu.callServer,void 0,fu.findSourceMapURL,"updateDocument");var fd=r(51146),fh=r(37826),ff=r(24934),fp=r(14163),fg=a.forwardRef((e,t)=>(0,i.jsx)(fp.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function fm({className:e,...t}){return(0,i.jsx)(fg,{"data-slot":"label",className:(0,hG.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function f_(e,[t,r]){return Math.min(r,Math.max(t,e))}fg.displayName="Label";var fy=r(70569),fb=r(9510),fx=r(98599),fv=r(11273),fw=r(43),fS=r(31355),fE=r(1359),fC=r(32547),fk=r(96963),fT=r(29172),fP=r(25028),fN=r(8730),fR=r(13495),fO=r(65551),fD=r(66156),fA=r(69024),fj=r(63376),fI=r(42247),fM=[" ","Enter","ArrowUp","ArrowDown"],fL=[" ","Enter"],fF="Select",[fB,fU,fz]=(0,fb.N)(fF),[fW,fH]=(0,fv.A)(fF,[fz,fT.Bk]),fK=(0,fT.Bk)(),[fV,f$]=fW(fF),[fX,fq]=fW(fF),fJ=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:l,onOpenChange:s,value:o,defaultValue:u,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:g,form:m}=e,_=fK(t),[y,b]=a.useState(null),[x,v]=a.useState(null),[w,S]=a.useState(!1),E=(0,fw.jH)(d),[C,k]=(0,fO.i)({prop:n,defaultProp:l??!1,onChange:s,caller:fF}),[T,P]=(0,fO.i)({prop:o,defaultProp:u,onChange:c,caller:fF}),N=a.useRef(null),R=!y||m||!!y.closest("form"),[O,D]=a.useState(new Set),A=Array.from(O).map(e=>e.props.value).join(";");return(0,i.jsx)(fT.bL,{..._,children:(0,i.jsxs)(fV,{required:g,scope:t,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:S,contentId:(0,fk.B)(),value:T,onValueChange:P,open:C,onOpenChange:k,dir:E,triggerPointerDownPosRef:N,disabled:p,children:[(0,i.jsx)(fB.Provider,{scope:t,children:(0,i.jsx)(fX,{scope:e.__scopeSelect,onNativeOptionAdd:a.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:a.useCallback(e=>{D(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),R?(0,i.jsxs)(pw,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:e=>P(e.target.value),disabled:p,form:m,children:[void 0===T?(0,i.jsx)("option",{value:""}):null,Array.from(O)]},A):null]})})};fJ.displayName=fF;var fG="SelectTrigger",fY=a.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...l}=e,s=fK(r),o=f$(fG,r),u=o.disabled||n,c=(0,fx.s)(t,o.onTriggerChange),d=fU(r),h=a.useRef("touch"),[f,p,g]=pE(e=>{let t=d().filter(e=>!e.disabled),r=t.find(e=>e.value===o.value),n=pC(t,e,r);void 0!==n&&o.onValueChange(n.value)}),m=e=>{u||(o.onOpenChange(!0),g()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,i.jsx)(fT.Mz,{asChild:!0,...s,children:(0,i.jsx)(fp.sG.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":pS(o.value)?"":void 0,...l,ref:c,onClick:(0,fy.m)(l.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&m(e)}),onPointerDown:(0,fy.m)(l.onPointerDown,e=>{h.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())}),onKeyDown:(0,fy.m)(l.onKeyDown,e=>{let t=""!==f.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),(!t||" "!==e.key)&&fM.includes(e.key)&&(m(),e.preventDefault())})})})});fY.displayName=fG;var fQ="SelectValue",fZ=a.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:l,children:s,placeholder:o="",...a}=e,u=f$(fQ,r),{onValueNodeHasChildrenChange:c}=u,d=void 0!==s,h=(0,fx.s)(t,u.onValueNodeChange);return(0,fD.N)(()=>{c(d)},[c,d]),(0,i.jsx)(fp.sG.span,{...a,ref:h,style:{pointerEvents:"none"},children:pS(u.value)?(0,i.jsx)(i.Fragment,{children:o}):s})});fZ.displayName=fQ;var f0=a.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...l}=e;return(0,i.jsx)(fp.sG.span,{"aria-hidden":!0,...l,ref:t,children:n||"▼"})});f0.displayName="SelectIcon";var f1=e=>(0,i.jsx)(fP.Z,{asChild:!0,...e});f1.displayName="SelectPortal";var f2="SelectContent",f4=a.forwardRef((e,t)=>{let r=f$(f2,e.__scopeSelect),[n,l]=a.useState();return((0,fD.N)(()=>{l(new DocumentFragment)},[]),r.open)?(0,i.jsx)(f6,{...e,ref:t}):n?i8.createPortal((0,i.jsx)(f8,{scope:e.__scopeSelect,children:(0,i.jsx)(fB.Slot,{scope:e.__scopeSelect,children:(0,i.jsx)("div",{children:e.children})})}),n):null});f4.displayName=f2;var[f8,f3]=fW(f2),f5=(0,fN.TL)("SelectContent.RemoveScroll"),f6=a.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:s,onPointerDownOutside:o,side:u,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:m,hideWhenDetached:_,avoidCollisions:y,...b}=e,x=f$(f2,r),[v,w]=a.useState(null),[S,E]=a.useState(null),C=(0,fx.s)(t,e=>w(e)),[k,T]=a.useState(null),[P,N]=a.useState(null),R=fU(r),[O,D]=a.useState(!1),A=a.useRef(!1);a.useEffect(()=>{if(v)return(0,fj.Eq)(v)},[v]),(0,fE.Oh)();let j=a.useCallback(e=>{let[t,...r]=R().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let r of e)if(r===i||(r?.scrollIntoView({block:"nearest"}),r===t&&S&&(S.scrollTop=0),r===n&&S&&(S.scrollTop=S.scrollHeight),r?.focus(),document.activeElement!==i))return},[R,S]),I=a.useCallback(()=>j([k,v]),[j,k,v]);a.useEffect(()=>{O&&I()},[O,I]);let{onOpenChange:M,triggerPointerDownPosRef:L}=x;a.useEffect(()=>{if(v){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(L.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():v.contains(r.target)||M(!1),document.removeEventListener("pointermove",t),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[v,M,L]),a.useEffect(()=>{let e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[M]);let[F,B]=pE(e=>{let t=R().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=pC(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),U=a.useCallback((e,t,r)=>{let n=!A.current&&!r;(void 0!==x.value&&x.value===t||n)&&(T(e),n&&(A.current=!0))},[x.value]),z=a.useCallback(()=>v?.focus(),[v]),W=a.useCallback((e,t,r)=>{let n=!A.current&&!r;(void 0!==x.value&&x.value===t||n)&&N(e)},[x.value]),H="popper"===n?f7:f9,K=H===f7?{side:u,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:m,hideWhenDetached:_,avoidCollisions:y}:{};return(0,i.jsx)(f8,{scope:r,content:v,viewport:S,onViewportChange:E,itemRefCallback:U,selectedItem:k,onItemLeave:z,itemTextRefCallback:W,focusSelectedItem:I,selectedItemText:P,position:n,isPositioned:O,searchRef:F,children:(0,i.jsx)(fI.A,{as:f5,allowPinchZoom:!0,children:(0,i.jsx)(fC.n,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,fy.m)(l,e=>{x.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,i.jsx)(fS.qW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:(0,i.jsx)(H,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault(),...b,...K,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:(0,fy.m)(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>j(t)),e.preventDefault()}})})})})})})});f6.displayName="SelectContentImpl";var f9=a.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...l}=e,s=f$(f2,r),o=f3(f2,r),[u,c]=a.useState(null),[d,h]=a.useState(null),f=(0,fx.s)(t,e=>h(e)),p=fU(r),g=a.useRef(!1),m=a.useRef(!0),{viewport:_,selectedItem:y,selectedItemText:b,focusSelectedItem:x}=o,v=a.useCallback(()=>{if(s.trigger&&s.valueNode&&u&&d&&_&&y&&b){let e=s.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),i=b.getBoundingClientRect();if("rtl"!==s.dir){let n=i.left-t.left,l=r.left-n,s=e.left-l,o=e.width+s,a=Math.max(o,t.width),c=f_(l,[10,Math.max(10,window.innerWidth-10-a)]);u.style.minWidth=o+"px",u.style.left=c+"px"}else{let n=t.right-i.right,l=window.innerWidth-r.right-n,s=window.innerWidth-e.right-l,o=e.width+s,a=Math.max(o,t.width),c=f_(l,[10,Math.max(10,window.innerWidth-10-a)]);u.style.minWidth=o+"px",u.style.right=c+"px"}let l=p(),o=window.innerHeight-20,a=_.scrollHeight,c=window.getComputedStyle(d),h=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),m=parseInt(c.borderBottomWidth,10),x=h+f+a+parseInt(c.paddingBottom,10)+m,v=Math.min(5*y.offsetHeight,x),w=window.getComputedStyle(_),S=parseInt(w.paddingTop,10),E=parseInt(w.paddingBottom,10),C=e.top+e.height/2-10,k=y.offsetHeight/2,T=h+f+(y.offsetTop+k);if(T<=C){let e=l.length>0&&y===l[l.length-1].ref.current;u.style.bottom="0px";let t=Math.max(o-C,k+(e?E:0)+(d.clientHeight-_.offsetTop-_.offsetHeight)+m);u.style.height=T+t+"px"}else{let e=l.length>0&&y===l[0].ref.current;u.style.top="0px";let t=Math.max(C,h+_.offsetTop+(e?S:0)+k);u.style.height=t+(x-T)+"px",_.scrollTop=T-C+_.offsetTop}u.style.margin="10px 0",u.style.minHeight=v+"px",u.style.maxHeight=o+"px",n?.(),requestAnimationFrame(()=>g.current=!0)}},[p,s.trigger,s.valueNode,u,d,_,y,b,s.dir,n]);(0,fD.N)(()=>v(),[v]);let[w,S]=a.useState();(0,fD.N)(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);let E=a.useCallback(e=>{e&&!0===m.current&&(v(),x?.(),m.current=!1)},[v,x]);return(0,i.jsx)(pe,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:(0,i.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,i.jsx)(fp.sG.div,{...l,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});f9.displayName="SelectItemAlignedPosition";var f7=a.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:l=10,...s}=e,o=fK(r);return(0,i.jsx)(fT.UC,{...o,...s,ref:t,align:n,collisionPadding:l,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});f7.displayName="SelectPopperPosition";var[pe,pt]=fW(f2,{}),pr="SelectViewport",pn=a.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...l}=e,s=f3(pr,r),o=pt(pr,r),u=(0,fx.s)(t,s.onViewportChange),c=a.useRef(0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,i.jsx)(fB.Slot,{scope:r,children:(0,i.jsx)(fp.sG.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:(0,fy.m)(l.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=o;if(n?.current&&r){let e=Math.abs(c.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,i=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(i<n){let l=i+e,s=Math.min(n,l),o=l-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}c.current=t.scrollTop})})})]})});pn.displayName=pr;var pi="SelectGroup",[pl,ps]=fW(pi);a.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=(0,fk.B)();return(0,i.jsx)(pl,{scope:r,id:l,children:(0,i.jsx)(fp.sG.div,{role:"group","aria-labelledby":l,...n,ref:t})})}).displayName=pi;var po="SelectLabel";a.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=ps(po,r);return(0,i.jsx)(fp.sG.div,{id:l.id,...n,ref:t})}).displayName=po;var pa="SelectItem",[pu,pc]=fW(pa),pd=a.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:l=!1,textValue:s,...o}=e,u=f$(pa,r),c=f3(pa,r),d=u.value===n,[h,f]=a.useState(s??""),[p,g]=a.useState(!1),m=(0,fx.s)(t,e=>c.itemRefCallback?.(e,n,l)),_=(0,fk.B)(),y=a.useRef("touch"),b=()=>{l||(u.onValueChange(n),u.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,i.jsx)(pu,{scope:r,value:n,disabled:l,textId:_,isSelected:d,onItemTextChange:a.useCallback(e=>{f(t=>t||(e?.textContent??"").trim())},[]),children:(0,i.jsx)(fB.ItemSlot,{scope:r,value:n,disabled:l,textValue:h,children:(0,i.jsx)(fp.sG.div,{role:"option","aria-labelledby":_,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...o,ref:m,onFocus:(0,fy.m)(o.onFocus,()=>g(!0)),onBlur:(0,fy.m)(o.onBlur,()=>g(!1)),onClick:(0,fy.m)(o.onClick,()=>{"mouse"!==y.current&&b()}),onPointerUp:(0,fy.m)(o.onPointerUp,()=>{"mouse"===y.current&&b()}),onPointerDown:(0,fy.m)(o.onPointerDown,e=>{y.current=e.pointerType}),onPointerMove:(0,fy.m)(o.onPointerMove,e=>{y.current=e.pointerType,l?c.onItemLeave?.():"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,fy.m)(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:(0,fy.m)(o.onKeyDown,e=>{(c.searchRef?.current===""||" "!==e.key)&&(fL.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});pd.displayName=pa;var ph="SelectItemText",pf=a.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:l,...s}=e,o=f$(ph,r),u=f3(ph,r),c=pc(ph,r),d=fq(ph,r),[h,f]=a.useState(null),p=(0,fx.s)(t,e=>f(e),c.onItemTextChange,e=>u.itemTextRefCallback?.(e,c.value,c.disabled)),g=h?.textContent,m=a.useMemo(()=>(0,i.jsx)("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:_,onNativeOptionRemove:y}=d;return(0,fD.N)(()=>(_(m),()=>y(m)),[_,y,m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(fp.sG.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?i8.createPortal(s.children,o.valueNode):null]})});pf.displayName=ph;var pp="SelectItemIndicator",pg=a.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return pc(pp,r).isSelected?(0,i.jsx)(fp.sG.span,{"aria-hidden":!0,...n,ref:t}):null});pg.displayName=pp;var pm="SelectScrollUpButton",p_=a.forwardRef((e,t)=>{let r=f3(pm,e.__scopeSelect),n=pt(pm,e.__scopeSelect),[l,s]=a.useState(!1),o=(0,fx.s)(t,n.onScrollButtonChange);return(0,fD.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){s(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),l?(0,i.jsx)(px,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});p_.displayName=pm;var py="SelectScrollDownButton",pb=a.forwardRef((e,t)=>{let r=f3(py,e.__scopeSelect),n=pt(py,e.__scopeSelect),[l,s]=a.useState(!1),o=(0,fx.s)(t,n.onScrollButtonChange);return(0,fD.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;s(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),l?(0,i.jsx)(px,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});pb.displayName=py;var px=a.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...l}=e,s=f3("SelectScrollButton",r),o=a.useRef(null),u=fU(r),c=a.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return a.useEffect(()=>()=>c(),[c]),(0,fD.N)(()=>{let e=u().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[u]),(0,i.jsx)(fp.sG.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:(0,fy.m)(l.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:(0,fy.m)(l.onPointerMove,()=>{s.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:(0,fy.m)(l.onPointerLeave,()=>{c()})})});a.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,i.jsx)(fp.sG.div,{"aria-hidden":!0,...n,ref:t})}).displayName="SelectSeparator";var pv="SelectArrow";a.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=fK(r),s=f$(pv,r),o=f3(pv,r);return s.open&&"popper"===o.position?(0,i.jsx)(fT.i3,{...l,...n,ref:t}):null}).displayName=pv;var pw=a.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let l=a.useRef(null),s=(0,fx.s)(n,l),o=function(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return a.useEffect(()=>{let e=l.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(o!==t&&r){let n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[o,t]),(0,i.jsx)(fp.sG.select,{...r,style:{...fA.Qg,...r.style},ref:s,defaultValue:t})});function pS(e){return""===e||void 0===e}function pE(e){let t=(0,fR.c)(e),r=a.useRef(""),n=a.useRef(0),i=a.useCallback(e=>{let i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),l=a.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,l]}function pC(e,t,r){var n,i;let l=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1,o=(n=e,i=Math.max(s,0),n.map((e,t)=>n[(i+t)%n.length]));1===l.length&&(o=o.filter(e=>e!==r));let a=o.find(e=>e.textValue.toLowerCase().startsWith(l.toLowerCase()));return a!==r?a:void 0}pw.displayName="SelectBubbleInput";var pk=r(62688);let pT=(0,pk.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pP=(0,pk.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),pN=(0,pk.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function pR({...e}){return(0,i.jsx)(fJ,{"data-slot":"select",...e})}function pO({...e}){return(0,i.jsx)(fZ,{"data-slot":"select-value",...e})}function pD({className:e,size:t="default",children:r,...n}){return(0,i.jsxs)(fY,{"data-slot":"select-trigger","data-size":t,className:(0,hG.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[r,(0,i.jsx)(f0,{asChild:!0,children:(0,i.jsx)(pT,{className:"size-4 opacity-50"})})]})}function pA({className:e,children:t,position:r="popper",...n}){return(0,i.jsx)(f1,{children:(0,i.jsxs)(f4,{"data-slot":"select-content",className:(0,hG.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,i.jsx)(pI,{}),(0,i.jsx)(pn,{className:(0,hG.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,i.jsx)(pM,{})]})})}function pj({className:e,children:t,...r}){return(0,i.jsxs)(pd,{"data-slot":"select-item",className:(0,hG.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[(0,i.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,i.jsx)(pg,{children:(0,i.jsx)(pP,{className:"size-4"})})}),(0,i.jsx)(pf,{children:t})]})}function pI({className:e,...t}){return(0,i.jsx)(p_,{"data-slot":"select-scroll-up-button",className:(0,hG.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,i.jsx)(pN,{className:"size-4"})})}function pM({className:e,...t}){return(0,i.jsx)(pb,{"data-slot":"select-scroll-down-button",className:(0,hG.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,i.jsx)(pT,{className:"size-4"})})}let pL=({userType:e,setUserType:t,onClickHandler:r})=>{let n=e=>{t(e),r&&r(e)};return(0,i.jsxs)(pR,{value:e,onValueChange:e=>n(e),children:[(0,i.jsx)(pD,{className:"shad-select",children:(0,i.jsx)(pO,{})}),(0,i.jsxs)(pA,{className:"border-none bg-dark-200",children:[(0,i.jsx)(pj,{value:"viewer",className:"shad-select-item",children:"can view"}),(0,i.jsx)(pj,{value:"editor",className:"shad-select-item",children:"can edit"})]})]})},pF=(0,fu.createServerReference)("7f154f2f9d537a74661ac1aa4bfa2f4df16a871ee1",fu.callServer,void 0,fu.findSourceMapURL,"updateDocumentAccess"),pB=(0,fu.createServerReference)("7fe6650757c6640eec35a4afd9b406f5658a53bd46",fu.callServer,void 0,fu.findSourceMapURL,"removeCollaborator"),pU=({roomId:e,creatorId:t,collaborator:r,email:n,user:l})=>{let[s,o]=(0,a.useState)(r.userType||"viewer"),[u,c]=(0,a.useState)(!1),d=async t=>{c(!0),await pF({roomId:e,email:n,userType:t,updatedBy:l}),c(!1)},h=async t=>{c(!0),await pB({roomId:e,email:t}),c(!1)};return(0,i.jsxs)("li",{className:"flex items-center justify-between gap-2 py-3",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(hX.default,{src:r.avatar,alt:r.name,width:36,height:36,className:"size-9 rounded-full"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"line-clamp-1 text-sm font-semibold leading-4 text-white",children:[r.name,(0,i.jsx)("span",{className:"text-10-regular pl-2 text-blue-100",children:u&&"updating..."})]}),(0,i.jsx)("p",{className:"text-sm font-light text-blue-100",children:r.email})]})]}),t===r.id?(0,i.jsx)("p",{className:"text-sm text-blue-100",children:"Owner"}):(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(pL,{userType:s,setUserType:o||"viewer",onClickHandler:d}),(0,i.jsx)(ff.$,{type:"button",onClick:()=>h(r.email),children:"Remove"})]})]})},pz=({roomId:e,collaborators:t,creatorId:r,currentUserType:n})=>{let s=(0,l.Z5)(),[o,u]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[p,g]=(0,a.useState)("viewer"),m=async()=>{d(!0),await pF({roomId:e,email:h,userType:p,updatedBy:s.info}),d(!1)};return(0,i.jsxs)(fh.lG,{open:o,onOpenChange:u,children:[(0,i.jsx)(fh.zM,{children:(0,i.jsxs)(ff.$,{className:"gradient-blue flex h-9 gap-1 px-4",disabled:"editor"!==n,children:[(0,i.jsx)(hX.default,{src:"/assets/icons/share.svg",alt:"share",width:20,height:20,className:"min-w-4 md:size-5"}),(0,i.jsx)("p",{className:"mr-1 hidden sm:block",children:"Share"})]})}),(0,i.jsxs)(fh.Cf,{className:"shad-dialog",children:[(0,i.jsxs)(fh.c7,{children:[(0,i.jsx)(fh.L3,{children:"Manage who can view this project"}),(0,i.jsx)(fh.rr,{children:"Select which users can view and edit this document"})]}),(0,i.jsx)(fm,{htmlFor:"email",className:"mt-6 text-blue-100",children:"Email address"}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex flex-1 rounded-md bg-dark-400",children:[(0,i.jsx)(fa,{id:"email",placeholder:"Enter email address",value:h,onChange:e=>f(e.target.value),className:"share-input"}),(0,i.jsx)(pL,{userType:p,setUserType:g})]}),(0,i.jsx)(ff.$,{type:"submit",onClick:m,className:"gradient-blue flex h-full gap-1 px-5",disabled:c,children:c?"Sending...":"Invite"})]}),(0,i.jsx)("div",{className:"my-2 space-y-2",children:(0,i.jsx)("ul",{className:"flex flex-col",children:t?.map(t=>(0,i.jsx)(pU,{roomId:e,creatorId:r,email:t.email,collaborator:t,user:s.info},t.id))})})]})]})},pW=({roomId:e,roomMetadata:t,users:r,currentUserType:n})=>{let[o,u]=(0,a.useState)(t.title),[c,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),p=(0,a.useRef)(null),g=(0,a.useRef)(null),m=async r=>{if("Enter"===r.key){f(!0);try{o!==t.title&&await fc(e,o)&&d(!1)}catch(e){}f(!1)}};return(0,a.useEffect)(()=>{let t=t=>{p.current&&!p.current.contains(t.target)&&(d(!1),fc(e,o))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e,o]),(0,a.useEffect)(()=>{c&&g.current&&g.current.focus()},[c]),(0,i.jsx)(l.qo,{id:e,children:(0,i.jsx)(s.zf,{fallback:(0,i.jsx)(fd.A,{}),children:(0,i.jsxs)("div",{className:"collaborative-room",children:[(0,i.jsxs)(h8,{children:[(0,i.jsxs)("div",{ref:p,className:"flex w-fit items-center justify-center gap-2",children:[c&&!h?(0,i.jsx)(fa,{type:"text",value:o,ref:g,placeholder:"Enter title",onChange:e=>u(e.target.value),onKeyDown:m,disable:!c,className:"document-title-input"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("p",{className:"document-title",children:o})}),"editor"===n&&!c&&(0,i.jsx)(hX.default,{src:"/assets/icons/edit.svg",alt:"edit",width:24,height:24,onClick:()=>d(!0),className:"pointer"}),"editor"!==n&&!c&&(0,i.jsx)("p",{className:"view-only-tag",children:"View only"}),h&&(0,i.jsx)("p",{className:"text-sm text-gray-400",children:"saving..."})]}),(0,i.jsxs)("div",{className:"flex w-full flex-1 justify-end gap-2 sm:gap-3",children:[(0,i.jsx)(fo,{}),(0,i.jsx)(pz,{roomId:e,collaborators:r,creatorId:t.creatorId,currentUserType:n}),(0,i.jsx)(fs,{children:(0,i.jsx)(h3.hZ,{})}),(0,i.jsx)(fl,{children:(0,i.jsx)(h3.uF,{})})]})]}),(0,i.jsx)(h1,{roomId:e,currentUserType:n})]})})})}},78435:(e,t,r)=>{"use strict";function n(e,t){return e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeLocale",{enumerable:!0,get:function(){return n}}),r(19169),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},79171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createKey:function(){return H},default:function(){return $},matchesMiddleware:function(){return I}});let n=r(14985),i=r(40740),l=r(84949),s=r(79772),o=r(79167),a=i._(r(98557)),u=r(41292),c=r(16493),d=n._(r(6584)),h=r(79289),f=r(45044),p=r(65430);r(19170);let g=r(12352),m=r(33645),_=r(30195);r(25779);let y=r(19169),b=r(23640),x=r(78435),v=r(25942),w=r(96127),S=r(26736),E=r(45346),C=r(53403),k=r(32532),T=r(87331),P=r(38848),N=r(61794);r(35416);let R=r(25117),O=r(84530),D=r(86719),A=r(13985);function j(){return Object.assign(Object.defineProperty(Error("Route Cancelled"),"__NEXT_ERROR_CODE",{value:"E315",enumerable:!1,configurable:!0}),{cancelled:!0})}async function I(e){let t=await Promise.resolve(e.router.pageLoader.getMiddleware());if(!t)return!1;let{pathname:r}=(0,y.parsePath)(e.asPath),n=(0,S.hasBasePath)(r)?(0,v.removeBasePath)(r):r,i=(0,w.addBasePath)((0,b.addLocale)(n,e.locale));return t.some(e=>new RegExp(e.regexp).test(i))}function M(e){let t=(0,h.getLocationOrigin)();return e.startsWith(t)?e.substring(t.length):e}function L(e,t,r){let[n,i]=(0,E.resolveHref)(e,t,!0),l=(0,h.getLocationOrigin)(),s=n.startsWith(l),o=i&&i.startsWith(l);n=M(n),i=i?M(i):i;let a=s?n:(0,w.addBasePath)(n),u=r?M((0,E.resolveHref)(e,r)):i||n;return{url:a,as:o?u:(0,w.addBasePath)(u)}}function F(e,t){let r=(0,l.removeTrailingSlash)((0,u.denormalizePagePath)(e));return"/404"===r||"/_error"===r?e:(t.includes(r)||t.some(t=>{if((0,f.isDynamicRoute)(t)&&(0,m.getRouteRegex)(t).re.test(r))return e=t,!0}),(0,l.removeTrailingSlash)(e))}async function B(e){if(!await I(e)||!e.fetchData)return null;let t=await e.fetchData(),r=await function(e,t,r){let n={basePath:r.router.basePath,i18n:{locales:r.router.locales},trailingSlash:!1},i=t.headers.get("x-nextjs-rewrite"),o=i||t.headers.get("x-nextjs-matched-path"),a=t.headers.get(A.MATCHED_PATH_HEADER);if(!a||o||a.includes("__next_data_catchall")||a.includes("/_error")||a.includes("/404")||(o=a),o){if(o.startsWith("/")){let t=(0,p.parseRelativeUrl)(o),a=(0,k.getNextPathnameInfo)(t.pathname,{nextConfig:n,parseData:!0}),u=(0,l.removeTrailingSlash)(a.pathname);return Promise.all([r.router.pageLoader.getPageList(),(0,s.getClientBuildManifest)()]).then(l=>{let[s,{__rewrites:o}]=l,d=(0,b.addLocale)(a.pathname,a.locale);if((0,f.isDynamicRoute)(d)||!i&&s.includes((0,c.normalizeLocalePath)((0,v.removeBasePath)(d),r.router.locales).pathname)){let r=(0,k.getNextPathnameInfo)((0,p.parseRelativeUrl)(e).pathname,{nextConfig:n,parseData:!0});t.pathname=d=(0,w.addBasePath)(r.pathname)}if(!s.includes(u)){let e=F(u,s);e!==u&&(u=e)}let h=s.includes(u)?u:F((0,c.normalizeLocalePath)((0,v.removeBasePath)(t.pathname),r.router.locales).pathname,s);if((0,f.isDynamicRoute)(h)){let e=(0,g.getRouteMatcher)((0,m.getRouteRegex)(h))(d);Object.assign(t.query,e||{})}return{type:"rewrite",parsedAs:t,resolvedHref:h}})}let t=(0,y.parsePath)(e);return Promise.resolve({type:"redirect-external",destination:""+(0,T.formatNextPathnameInfo)({...(0,k.getNextPathnameInfo)(t.pathname,{nextConfig:n,parseData:!0}),defaultLocale:r.router.defaultLocale,buildId:""})+t.query+t.hash})}let u=t.headers.get("x-nextjs-redirect");if(u){if(u.startsWith("/")){let e=(0,y.parsePath)(u),t=(0,T.formatNextPathnameInfo)({...(0,k.getNextPathnameInfo)(e.pathname,{nextConfig:n,parseData:!0}),defaultLocale:r.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-internal",newAs:""+t+e.query+e.hash,newUrl:""+t+e.query+e.hash})}return Promise.resolve({type:"redirect-external",destination:u})}return Promise.resolve({type:"next"})}(t.dataHref,t.response,e);return{dataHref:t.dataHref,json:t.json,response:t.response,text:t.text,cacheKey:t.cacheKey,effect:r}}let U=Symbol("SSG_DATA_NOT_FOUND");function z(e){try{return JSON.parse(e)}catch(e){return null}}function W(e){let{dataHref:t,inflightCache:r,isPrefetch:n,hasMiddleware:i,isServerRender:l,parseJSON:o,persistCache:a,isBackground:u,unstable_skipClientCache:c}=e,{href:d}=new URL(t,window.location.href),h=e=>{var u;return(function e(t,r,n){return fetch(t,{credentials:"same-origin",method:n.method||"GET",headers:Object.assign({},n.headers,{"x-nextjs-data":"1"})}).then(i=>!i.ok&&r>1&&i.status>=500?e(t,r-1,n):i)})(t,l?3:1,{headers:Object.assign({},n?{purpose:"prefetch"}:{},n&&i?{"x-middleware-prefetch":"1"}:{},{}),method:null!=(u=null==e?void 0:e.method)?u:"GET"}).then(r=>r.ok&&(null==e?void 0:e.method)==="HEAD"?{dataHref:t,response:r,text:"",json:{},cacheKey:d}:r.text().then(e=>{if(!r.ok){if(i&&[301,302,307,308].includes(r.status))return{dataHref:t,response:r,text:e,json:{},cacheKey:d};if(404===r.status){var n;if(null==(n=z(e))?void 0:n.notFound)return{dataHref:t,json:{notFound:U},response:r,text:e,cacheKey:d}}let o=Object.defineProperty(Error("Failed to load static props"),"__NEXT_ERROR_CODE",{value:"E124",enumerable:!1,configurable:!0});throw l||(0,s.markAssetError)(o),o}return{dataHref:t,json:o?z(e):null,response:r,text:e,cacheKey:d}})).then(e=>(a&&"no-cache"!==e.response.headers.get("x-middleware-cache")||delete r[d],e)).catch(e=>{throw c||delete r[d],("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message||"Load failed"===e.message)&&(0,s.markAssetError)(e),e})};return c&&a?h({}).then(e=>("no-cache"!==e.response.headers.get("x-middleware-cache")&&(r[d]=Promise.resolve(e)),e)):void 0!==r[d]?r[d]:r[d]=h(u?{method:"HEAD"}:{})}function H(){return Math.random().toString(36).slice(2,10)}function K(e){let{url:t,router:r}=e;if(t===(0,w.addBasePath)((0,b.addLocale)(r.asPath,r.locale)))throw Object.defineProperty(Error("Invariant: attempted to hard navigate to the same URL "+t+" "+location.href),"__NEXT_ERROR_CODE",{value:"E282",enumerable:!1,configurable:!0});window.location.href=t}let V=e=>{let{route:t,router:r}=e,n=!1,i=r.clc=()=>{n=!0};return()=>{if(n){let e=Object.defineProperty(Error('Abort fetching component for route: "'+t+'"'),"__NEXT_ERROR_CODE",{value:"E483",enumerable:!1,configurable:!0});throw e.cancelled=!0,e}i===r.clc&&(r.clc=null)}};class ${reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(e,t,r){return void 0===r&&(r={}),{url:e,as:t}=L(this,e,t),this.change("pushState",e,t,r)}replace(e,t,r){return void 0===r&&(r={}),{url:e,as:t}=L(this,e,t),this.change("replaceState",e,t,r)}async _bfl(e,t,n,i){{if(!this._bfl_s&&!this._bfl_d){let t,l,{BloomFilter:o}=r(27618);try{({__routerFilterStatic:t,__routerFilterDynamic:l}=await (0,s.getClientBuildManifest)())}catch(t){if(i)return!0;return K({url:(0,w.addBasePath)((0,b.addLocale)(e,n||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}(null==t?void 0:t.numHashes)&&(this._bfl_s=new o(t.numItems,t.errorRate),this._bfl_s.import(t)),(null==l?void 0:l.numHashes)&&(this._bfl_d=new o(l.numItems,l.errorRate),this._bfl_d.import(l))}let c=!1,d=!1;for(let{as:r,allowMatchCurrent:s}of[{as:e},{as:t}])if(r){let t=(0,l.removeTrailingSlash)(new URL(r,"http://n").pathname),h=(0,w.addBasePath)((0,b.addLocale)(t,n||this.locale));if(s||t!==(0,l.removeTrailingSlash)(new URL(this.asPath,"http://n").pathname)){var o,a,u;for(let e of(c=c||!!(null==(o=this._bfl_s)?void 0:o.contains(t))||!!(null==(a=this._bfl_s)?void 0:a.contains(h)),[t,h])){let t=e.split("/");for(let e=0;!d&&e<t.length+1;e++){let r=t.slice(0,e).join("/");if(r&&(null==(u=this._bfl_d)?void 0:u.contains(r))){d=!0;break}}}if(c||d){if(i)return!0;return K({url:(0,w.addBasePath)((0,b.addLocale)(e,n||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}}}}return!1}async change(e,t,r,n,i){var u,c,d,E,C,k,T,D,A;let M,B;if(!(0,N.isLocalURL)(t))return K({url:t,router:this}),!1;let z=1===n._h;z||n.shallow||await this._bfl(r,void 0,n.locale);let W=z||n._shouldResolveHref||(0,y.parsePath)(t).pathname===(0,y.parsePath)(r).pathname,H={...this.state},V=!0!==this.isReady;this.isReady=!0;let X=this.isSsr;if(z||(this.isSsr=!1),z&&this.clc)return!1;let q=H.locale;h.ST&&performance.mark("routeChange");let{shallow:J=!1,scroll:G=!0}=n,Y={shallow:J};this._inFlightRoute&&this.clc&&(X||$.events.emit("routeChangeError",j(),this._inFlightRoute,Y),this.clc(),this.clc=null),r=(0,w.addBasePath)((0,b.addLocale)((0,S.hasBasePath)(r)?(0,v.removeBasePath)(r):r,n.locale,this.defaultLocale));let Q=(0,x.removeLocale)((0,S.hasBasePath)(r)?(0,v.removeBasePath)(r):r,H.locale);this._inFlightRoute=r;let Z=q!==H.locale;if(!z&&this.onlyAHashChange(Q)&&!Z){H.asPath=Q,$.events.emit("hashChangeStart",r,Y),this.changeState(e,t,r,{...n,scroll:!1}),G&&this.scrollToHash(Q);try{await this.set(H,this.components[H.route],null)}catch(e){throw(0,a.default)(e)&&e.cancelled&&$.events.emit("routeChangeError",e,Q,Y),e}return $.events.emit("hashChangeComplete",r,Y),!0}let ee=(0,p.parseRelativeUrl)(t),{pathname:et,query:er}=ee;try{[M,{__rewrites:B}]=await Promise.all([this.pageLoader.getPageList(),(0,s.getClientBuildManifest)(),this.pageLoader.getMiddleware()])}catch(e){return K({url:r,router:this}),!1}this.urlIsNew(Q)||Z||(e="replaceState");let en=r;et=et?(0,l.removeTrailingSlash)((0,v.removeBasePath)(et)):et;let ei=(0,l.removeTrailingSlash)(et),el=r.startsWith("/")&&(0,p.parseRelativeUrl)(r).pathname;if(null==(u=this.components[et])?void 0:u.__appRouter)return K({url:r,router:this}),new Promise(()=>{});let es=!!(el&&ei!==el&&(!(0,f.isDynamicRoute)(ei)||!(0,g.getRouteMatcher)((0,m.getRouteRegex)(ei))(el))),eo=!n.shallow&&await I({asPath:r,locale:H.locale,router:this});if(z&&eo&&(W=!1),W&&"/_error"!==et&&(n._shouldResolveHref=!0,ee.pathname=F(et,M),ee.pathname!==et&&(et=ee.pathname,ee.pathname=(0,w.addBasePath)(et),eo||(t=(0,_.formatWithValidation)(ee)))),!(0,N.isLocalURL)(r))return K({url:r,router:this}),!1;en=(0,x.removeLocale)((0,v.removeBasePath)(en),H.locale),ei=(0,l.removeTrailingSlash)(et);let ea=!1;if((0,f.isDynamicRoute)(ei)){let e=(0,p.parseRelativeUrl)(en),n=e.pathname,i=(0,m.getRouteRegex)(ei);ea=(0,g.getRouteMatcher)(i)(n);let l=ei===n,s=l?(0,O.interpolateAs)(ei,n,er):{};if(ea&&(!l||s.result))l?r=(0,_.formatWithValidation)(Object.assign({},e,{pathname:s.result,query:(0,R.omit)(er,s.params)})):Object.assign(er,ea);else{let e=Object.keys(i.groups).filter(e=>!er[e]&&!i.groups[e].optional);if(e.length>0&&!eo)throw Object.defineProperty(Error((l?"The provided `href` ("+t+") value is missing query values ("+e.join(", ")+") to be interpolated properly. ":"The provided `as` value ("+n+") is incompatible with the `href` value ("+ei+"). ")+"Read more: https://nextjs.org/docs/messages/"+(l?"href-interpolation-failed":"incompatible-href-as")),"__NEXT_ERROR_CODE",{value:"E344",enumerable:!1,configurable:!0})}}z||$.events.emit("routeChangeStart",r,Y);let eu="/404"===this.pathname||"/_error"===this.pathname;try{let l=await this.getRouteInfo({route:ei,pathname:et,query:er,as:r,resolvedAs:en,routeProps:Y,locale:H.locale,isPreview:H.isPreview,hasMiddleware:eo,unstable_skipClientCache:n.unstable_skipClientCache,isQueryUpdating:z&&!this.isFallback,isMiddlewareRewrite:es});if(z||n.shallow||await this._bfl(r,"resolvedAs"in l?l.resolvedAs:void 0,H.locale),"route"in l&&eo){ei=et=l.route||ei,Y.shallow||(er=Object.assign({},l.query||{},er));let e=(0,S.hasBasePath)(ee.pathname)?(0,v.removeBasePath)(ee.pathname):ee.pathname;if(ea&&et!==e&&Object.keys(ea).forEach(e=>{ea&&er[e]===ea[e]&&delete er[e]}),(0,f.isDynamicRoute)(et)){let e=!Y.shallow&&l.resolvedAs?l.resolvedAs:(0,w.addBasePath)((0,b.addLocale)(new URL(r,location.href).pathname,H.locale),!0);(0,S.hasBasePath)(e)&&(e=(0,v.removeBasePath)(e));let t=(0,m.getRouteRegex)(et),n=(0,g.getRouteMatcher)(t)(new URL(e,location.href).pathname);n&&Object.assign(er,n)}}if("type"in l)if("redirect-internal"===l.type)return this.change(e,l.newUrl,l.newAs,n);else return K({url:l.destination,router:this}),new Promise(()=>{});let s=l.Component;if(s&&s.unstable_scriptLoader&&[].concat(s.unstable_scriptLoader()).forEach(e=>{(0,o.handleClientScriptLoad)(e.props)}),(l.__N_SSG||l.__N_SSP)&&l.props){if(l.props.pageProps&&l.props.pageProps.__N_REDIRECT){n.locale=!1;let t=l.props.pageProps.__N_REDIRECT;if(t.startsWith("/")&&!1!==l.props.pageProps.__N_REDIRECT_BASE_PATH){let r=(0,p.parseRelativeUrl)(t);r.pathname=F(r.pathname,M);let{url:i,as:l}=L(this,t,t);return this.change(e,i,l,n)}return K({url:t,router:this}),new Promise(()=>{})}if(H.isPreview=!!l.props.__N_PREVIEW,l.props.notFound===U){let e;try{await this.fetchComponent("/404"),e="/404"}catch(t){e="/_error"}if(l=await this.getRouteInfo({route:e,pathname:e,query:er,as:r,resolvedAs:en,routeProps:{shallow:!1},locale:H.locale,isPreview:H.isPreview,isNotFound:!0}),"type"in l)throw Object.defineProperty(Error("Unexpected middleware effect on /404"),"__NEXT_ERROR_CODE",{value:"E158",enumerable:!1,configurable:!0})}}z&&"/_error"===this.pathname&&(null==(d=self.__NEXT_DATA__.props)||null==(c=d.pageProps)?void 0:c.statusCode)===500&&(null==(E=l.props)?void 0:E.pageProps)&&(l.props.pageProps.statusCode=500);let u=n.shallow&&H.route===(null!=(C=l.route)?C:ei),h=null!=(k=n.scroll)?k:!z&&!u,_=null!=i?i:h?{x:0,y:0}:null,y={...H,route:ei,pathname:et,query:er,asPath:Q,isFallback:!1};if(z&&eu){if(l=await this.getRouteInfo({route:this.pathname,pathname:this.pathname,query:er,as:r,resolvedAs:en,routeProps:{shallow:!1},locale:H.locale,isPreview:H.isPreview,isQueryUpdating:z&&!this.isFallback}),"type"in l)throw Object.defineProperty(Error("Unexpected middleware effect on "+this.pathname),"__NEXT_ERROR_CODE",{value:"E225",enumerable:!1,configurable:!0});"/_error"===this.pathname&&(null==(D=self.__NEXT_DATA__.props)||null==(T=D.pageProps)?void 0:T.statusCode)===500&&(null==(A=l.props)?void 0:A.pageProps)&&(l.props.pageProps.statusCode=500);try{await this.set(y,l,_)}catch(e){throw(0,a.default)(e)&&e.cancelled&&$.events.emit("routeChangeError",e,Q,Y),e}return!0}if($.events.emit("beforeHistoryChange",r,Y),this.changeState(e,t,r,n),!(z&&!_&&!V&&!Z&&(0,P.compareRouterStates)(y,this.state))){try{await this.set(y,l,_)}catch(e){if(e.cancelled)l.error=l.error||e;else throw e}if(l.error)throw z||$.events.emit("routeChangeError",l.error,Q,Y),l.error;z||$.events.emit("routeChangeComplete",r,Y),h&&/#.+$/.test(r)&&this.scrollToHash(r)}return!0}catch(e){if((0,a.default)(e)&&e.cancelled)return!1;throw e}}changeState(e,t,r,n){void 0===n&&(n={}),("pushState"!==e||(0,h.getURL)()!==r)&&(this._shallow=n.shallow,window.history[e]({url:t,as:r,options:n,__N:!0,key:this._key="pushState"!==e?this._key:H()},"",r))}async handleRouteInfoError(e,t,r,n,i,l){if(e.cancelled)throw e;if((0,s.isAssetError)(e)||l)throw $.events.emit("routeChangeError",e,n,i),K({url:n,router:this}),j();try{let n,{page:i,styleSheets:l}=await this.fetchComponent("/_error"),s={props:n,Component:i,styleSheets:l,err:e,error:e};if(!s.props)try{s.props=await this.getInitialProps(i,{err:e,pathname:t,query:r})}catch(e){s.props={}}return s}catch(e){return this.handleRouteInfoError((0,a.default)(e)?e:Object.defineProperty(Error(e+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0}),t,r,n,i,!0)}}async getRouteInfo(e){let{route:t,pathname:r,query:n,as:i,resolvedAs:s,routeProps:o,locale:u,hasMiddleware:d,isPreview:h,unstable_skipClientCache:f,isQueryUpdating:p,isMiddlewareRewrite:g,isNotFound:m}=e,y=t;try{var b,x,w,S;let e=this.components[y];if(o.shallow&&e&&this.route===y)return e;let t=V({route:y,router:this});d&&(e=void 0);let a=!e||"initial"in e?void 0:e,E={dataHref:this.pageLoader.getDataHref({href:(0,_.formatWithValidation)({pathname:r,query:n}),skipInterpolation:!0,asPath:m?"/404":s,locale:u}),hasMiddleware:!0,isServerRender:this.isSsr,parseJSON:!0,inflightCache:p?this.sbc:this.sdc,persistCache:!h,isPrefetch:!1,unstable_skipClientCache:f,isBackground:p},k=p&&!g?null:await B({fetchData:()=>W(E),asPath:m?"/404":s,locale:u,router:this}).catch(e=>{if(p)return null;throw e});if(k&&("/_error"===r||"/404"===r)&&(k.effect=void 0),p&&(k?k.json=self.__NEXT_DATA__.props:k={json:self.__NEXT_DATA__.props}),t(),(null==k||null==(b=k.effect)?void 0:b.type)==="redirect-internal"||(null==k||null==(x=k.effect)?void 0:x.type)==="redirect-external")return k.effect;if((null==k||null==(w=k.effect)?void 0:w.type)==="rewrite"){let t=(0,l.removeTrailingSlash)(k.effect.resolvedHref),i=await this.pageLoader.getPageList();if((!p||i.includes(t))&&(y=t,r=k.effect.resolvedHref,n={...n,...k.effect.parsedAs.query},s=(0,v.removeBasePath)((0,c.normalizeLocalePath)(k.effect.parsedAs.pathname,this.locales).pathname),e=this.components[y],o.shallow&&e&&this.route===y&&!d))return{...e,route:y}}if((0,C.isAPIRoute)(y))return K({url:i,router:this}),new Promise(()=>{});let T=a||await this.fetchComponent(y).then(e=>({Component:e.page,styleSheets:e.styleSheets,__N_SSG:e.mod.__N_SSG,__N_SSP:e.mod.__N_SSP})),P=null==k||null==(S=k.response)?void 0:S.headers.get("x-middleware-skip"),N=T.__N_SSG||T.__N_SSP;P&&(null==k?void 0:k.dataHref)&&delete this.sdc[k.dataHref];let{props:R,cacheKey:O}=await this._getData(async()=>{if(N){if((null==k?void 0:k.json)&&!P)return{cacheKey:k.cacheKey,props:k.json};let e=(null==k?void 0:k.dataHref)?k.dataHref:this.pageLoader.getDataHref({href:(0,_.formatWithValidation)({pathname:r,query:n}),asPath:s,locale:u}),t=await W({dataHref:e,isServerRender:this.isSsr,parseJSON:!0,inflightCache:P?{}:this.sdc,persistCache:!h,isPrefetch:!1,unstable_skipClientCache:f});return{cacheKey:t.cacheKey,props:t.json||{}}}return{headers:{},props:await this.getInitialProps(T.Component,{pathname:r,query:n,asPath:i,locale:u,locales:this.locales,defaultLocale:this.defaultLocale})}});return T.__N_SSP&&E.dataHref&&O&&delete this.sdc[O],this.isPreview||!T.__N_SSG||p||W(Object.assign({},E,{isBackground:!0,persistCache:!1,inflightCache:this.sbc})).catch(()=>{}),R.pageProps=Object.assign({},R.pageProps),T.props=R,T.route=y,T.query=n,T.resolvedAs=s,this.components[y]=T,T}catch(e){return this.handleRouteInfoError((0,a.getProperError)(e),r,n,i,o)}}set(e,t,r){return this.state=e,this.sub(t,this.components["/_app"].Component,r)}beforePopState(e){this._bps=e}onlyAHashChange(e){if(!this.asPath)return!1;let[t,r]=this.asPath.split("#",2),[n,i]=e.split("#",2);return!!i&&t===n&&r===i||t===n&&r!==i}scrollToHash(e){let[,t=""]=e.split("#",2);(0,D.handleSmoothScroll)(()=>{if(""===t||"top"===t)return void window.scrollTo(0,0);let e=decodeURIComponent(t),r=document.getElementById(e);if(r)return void r.scrollIntoView();let n=document.getElementsByName(e)[0];n&&n.scrollIntoView()},{onlyHashChange:this.onlyAHashChange(e)})}urlIsNew(e){return this.asPath!==e}async prefetch(e,t,r){void 0===t&&(t=e),void 0===r&&(r={});let n=(0,p.parseRelativeUrl)(e),i=n.pathname,{pathname:s,query:o}=n,a=s,u=await this.pageLoader.getPageList(),c=t,d=void 0!==r.locale?r.locale||void 0:this.locale,h=await I({asPath:t,locale:d,router:this});n.pathname=F(n.pathname,u),(0,f.isDynamicRoute)(n.pathname)&&(s=n.pathname,n.pathname=s,Object.assign(o,(0,g.getRouteMatcher)((0,m.getRouteRegex)(n.pathname))((0,y.parsePath)(t).pathname)||{}),h||(e=(0,_.formatWithValidation)(n)));let b=await B({fetchData:()=>W({dataHref:this.pageLoader.getDataHref({href:(0,_.formatWithValidation)({pathname:a,query:o}),skipInterpolation:!0,asPath:c,locale:d}),hasMiddleware:!0,isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0}),asPath:t,locale:d,router:this});if((null==b?void 0:b.effect.type)==="rewrite"&&(n.pathname=b.effect.resolvedHref,s=b.effect.resolvedHref,o={...o,...b.effect.parsedAs.query},c=b.effect.parsedAs.pathname,e=(0,_.formatWithValidation)(n)),(null==b?void 0:b.effect.type)==="redirect-external")return;let x=(0,l.removeTrailingSlash)(s);await this._bfl(t,c,r.locale,!0)&&(this.components[i]={__appRouter:!0}),await Promise.all([this.pageLoader._isSsg(x).then(t=>!!t&&W({dataHref:(null==b?void 0:b.json)?null==b?void 0:b.dataHref:this.pageLoader.getDataHref({href:e,asPath:c,locale:d}),isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0,unstable_skipClientCache:r.unstable_skipClientCache||r.priority&&!0}).then(()=>!1).catch(()=>!1)),this.pageLoader[r.priority?"loadPage":"prefetch"](x)])}async fetchComponent(e){let t=V({route:e,router:this});try{let r=await this.pageLoader.loadPage(e);return t(),r}catch(e){throw t(),e}}_getData(e){let t=!1,r=()=>{t=!0};return this.clc=r,e().then(e=>{if(r===this.clc&&(this.clc=null),t){let e=Object.defineProperty(Error("Loading initial props cancelled"),"__NEXT_ERROR_CODE",{value:"E405",enumerable:!1,configurable:!0});throw e.cancelled=!0,e}return e})}getInitialProps(e,t){let{Component:r}=this.components["/_app"],n=this._wrapApp(r);return t.AppTree=n,(0,h.loadGetInitialProps)(r,{AppTree:n,Component:e,router:this,ctx:t})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(e,t,r,{initialProps:n,pageLoader:i,App:s,wrapApp:o,Component:a,err:u,subscription:c,isFallback:d,locale:g,locales:m,defaultLocale:y,domainLocales:b,isPreview:x}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=H(),this.onPopState=e=>{let t,{isFirstPopStateEvent:r}=this;this.isFirstPopStateEvent=!1;let n=e.state;if(!n){let{pathname:e,query:t}=this;this.changeState("replaceState",(0,_.formatWithValidation)({pathname:(0,w.addBasePath)(e),query:t}),(0,h.getURL)());return}if(n.__NA)return void window.location.reload();if(!n.__N||r&&this.locale===n.options.locale&&n.as===this.asPath)return;let{url:i,as:l,options:s,key:o}=n;this._key=o;let{pathname:a}=(0,p.parseRelativeUrl)(i);(!this.isSsr||l!==(0,w.addBasePath)(this.asPath)||a!==(0,w.addBasePath)(this.pathname))&&(!this._bps||this._bps(n))&&this.change("replaceState",i,l,Object.assign({},s,{shallow:s.shallow&&this._shallow,locale:s.locale||this.defaultLocale,_h:0}),t)};let v=(0,l.removeTrailingSlash)(e);this.components={},"/_error"!==e&&(this.components[v]={Component:a,initial:!0,props:n,err:u,__N_SSG:n&&n.__N_SSG,__N_SSP:n&&n.__N_SSP}),this.components["/_app"]={Component:s,styleSheets:[]},this.events=$.events,this.pageLoader=i;let S=(0,f.isDynamicRoute)(e)&&self.__NEXT_DATA__.autoExport;this.basePath="",this.sub=c,this.clc=null,this._wrapApp=o,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.isExperimentalCompile||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!S&&!self.location.search),this.state={route:v,pathname:e,query:t,asPath:S?e:r,isPreview:!!x,locale:void 0,isFallback:d},this._initialMatchesMiddlewarePromise=Promise.resolve(!1)}}$.events=(0,d.default)()},79551:e=>{"use strict";e.exports=require("url")},79664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}}),r(14985);let n=r(60687);r(43210);let i=r(91953);function l(e){function t(t){return(0,n.jsx)(e,{router:(0,i.useRouter)(),...t})}return t.getInitialProps=e.getInitialProps,t.origGetInitialProps=e.origGetInitialProps,t}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},79772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createRouteLoader:function(){return m},getClientBuildManifest:function(){return p},isAssetError:function(){return c},markAssetError:function(){return u}}),r(14985),r(52668);let n=r(71025),i=r(40932),l=r(90420),s=r(19587);function o(e,t,r){let n,i=t.get(e);if(i)return"future"in i?i.future:Promise.resolve(i);let l=new Promise(e=>{n=e});return t.set(e,{resolve:n,future:l}),r?r().then(e=>(n(e),e)).catch(r=>{throw t.delete(e),r}):l}let a=Symbol("ASSET_LOAD_ERROR");function u(e){return Object.defineProperty(e,a,{})}function c(e){return e&&a in e}let d=function(e){try{return e=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||e.relList.supports("prefetch")}catch(e){return!1}}(),h=()=>(0,l.getDeploymentIdQueryOrEmptyString)();function f(e,t,r){return new Promise((n,l)=>{let s=!1;e.then(e=>{s=!0,n(e)}).catch(l),(0,i.requestIdleCallback)(()=>setTimeout(()=>{s||l(r)},t))})}function p(){return self.__BUILD_MANIFEST?Promise.resolve(self.__BUILD_MANIFEST):f(new Promise(e=>{let t=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{e(self.__BUILD_MANIFEST),t&&t()}}),3800,u(Object.defineProperty(Error("Failed to load client build manifest"),"__NEXT_ERROR_CODE",{value:"E273",enumerable:!1,configurable:!0})))}function g(e,t){return p().then(r=>{if(!(t in r))throw u(Object.defineProperty(Error("Failed to lookup route: "+t),"__NEXT_ERROR_CODE",{value:"E446",enumerable:!1,configurable:!0}));let i=r[t].map(t=>e+"/_next/"+(0,s.encodeURIPath)(t));return{scripts:i.filter(e=>e.endsWith(".js")).map(e=>(0,n.__unsafeCreateTrustedScriptURL)(e)+h()),css:i.filter(e=>e.endsWith(".css")).map(e=>e+h())}})}function m(e){let t=new Map,r=new Map,n=new Map,l=new Map;function s(e){{var t;let n=r.get(e.toString());return n?n:document.querySelector('script[src^="'+e+'"]')?Promise.resolve():(r.set(e.toString(),n=new Promise((r,n)=>{(t=document.createElement("script")).onload=r,t.onerror=()=>n(u(Object.defineProperty(Error("Failed to load script: "+e),"__NEXT_ERROR_CODE",{value:"E74",enumerable:!1,configurable:!0}))),t.crossOrigin=void 0,t.src=e,document.body.appendChild(t)})),n)}}function a(e){let t=n.get(e);return t||n.set(e,t=fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw Object.defineProperty(Error("Failed to load stylesheet: "+e),"__NEXT_ERROR_CODE",{value:"E189",enumerable:!1,configurable:!0});return t.text().then(t=>({href:e,content:t}))}).catch(e=>{throw u(e)})),t}return{whenEntrypoint:e=>o(e,t),onEntrypoint(e,r){(r?Promise.resolve().then(()=>r()).then(e=>({component:e&&e.default||e,exports:e}),e=>({error:e})):Promise.resolve(void 0)).then(r=>{let n=t.get(e);n&&"resolve"in n?r&&(t.set(e,r),n.resolve(r)):(r?t.set(e,r):t.delete(e),l.delete(e))})},loadRoute(r,n){return o(r,l,()=>{let i;return f(g(e,r).then(e=>{let{scripts:n,css:i}=e;return Promise.all([t.has(r)?[]:Promise.all(n.map(s)),Promise.all(i.map(a))])}).then(e=>this.whenEntrypoint(r).then(t=>({entrypoint:t,styles:e[1]}))),3800,u(Object.defineProperty(Error("Route did not complete loading: "+r),"__NEXT_ERROR_CODE",{value:"E12",enumerable:!1,configurable:!0}))).then(e=>{let{entrypoint:t,styles:r}=e,n=Object.assign({styles:r},t);return"error"in t?t:n}).catch(e=>{if(n)throw e;return{error:e}}).finally(()=>null==i?void 0:i())})},prefetch(t){let r;return(r=navigator.connection)&&(r.saveData||/2g/.test(r.effectiveType))?Promise.resolve():g(e,t).then(e=>Promise.all(d?e.scripts.map(e=>{var t,r,n;return t=e.toString(),r="script",new Promise((e,i)=>{let l='\n      link[rel="prefetch"][href^="'+t+'"],\n      link[rel="preload"][href^="'+t+'"],\n      script[src^="'+t+'"]';if(document.querySelector(l))return e();n=document.createElement("link"),r&&(n.as=r),n.rel="prefetch",n.crossOrigin=void 0,n.onload=e,n.onerror=()=>i(u(Object.defineProperty(Error("Failed to prefetch: "+t),"__NEXT_ERROR_CODE",{value:"E268",enumerable:!1,configurable:!0}))),n.href=t,document.head.appendChild(n)})}):[])).then(()=>{(0,i.requestIdleCallback)(()=>this.loadRoute(t,!0).catch(()=>{}))}).catch(()=>{})}}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81630:e=>{"use strict";e.exports=require("http")},84171:(e,t)=>{"use strict";function r(e){return Object.prototype.toString.call(e)}function n(e){if("[object Object]"!==r(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t.hasOwnProperty("isPrototypeOf")}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getObjectClassLabel:function(){return r},isPlainObject:function(){return n}})},84530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return l}});let n=r(12352),i=r(33645);function l(e,t,r){let l="",s=(0,i.getRouteRegex)(e),o=s.groups,a=(t!==e?(0,n.getRouteMatcher)(s)(t):"")||r;l=e;let u=Object.keys(o);return u.every(e=>{let t=a[e]||"",{repeat:r,optional:n}=o[e],i="["+(r?"...":"")+e+"]";return n&&(i=(t?"":"/")+"["+i+"]"),r&&!Array.isArray(t)&&(t=[t]),(n||e in a)&&(l=l.replace(i,r?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(l=""),{params:u,result:l}}},85194:(e,t,r)=>{Promise.resolve().then(r.bind(r,571))},86475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return i}});let n=r(11364);function i(e,t){let r=[],i=(0,n.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),l=(0,n.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(i.source),i.flags):i,r);return(e,n)=>{if("string"!=typeof e)return!1;let i=l(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete i.params[e.name];return{...n,...i.params}}}},87331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatNextPathnameInfo",{enumerable:!0,get:function(){return o}});let n=r(84949),i=r(98834),l=r(19307),s=r(98636);function o(e){let t=(0,s.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,l.addPathSuffix)((0,i.addPathPrefix)(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,l.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},90420:(e,t)=>{"use strict";function r(){return""}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDeploymentIdQueryOrEmptyString",{enumerable:!0,get:function(){return r}})},91953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Router:function(){return l.default},createRouter:function(){return p},default:function(){return h},makePublicRouterInstance:function(){return g},useRouter:function(){return f},withRouter:function(){return o.default}});let n=r(14985),i=n._(r(43210)),l=n._(r(79171)),s=r(69148);r(98557);let o=n._(r(79664)),a={router:null,readyCallbacks:[],ready(e){if(this.router)return e()}},u=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],c=["push","replace","reload","back","prefetch","beforePopState"];function d(){if(!a.router)throw Object.defineProperty(Error('No router instance found.\nYou should only use "next/router" on the client side of your app.\n'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.router}Object.defineProperty(a,"events",{get:()=>l.default.events}),u.forEach(e=>{Object.defineProperty(a,e,{get:()=>d()[e]})}),c.forEach(e=>{a[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return d()[e](...r)}}),["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"].forEach(e=>{a.ready(()=>{l.default.events.on(e,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let i="on"+e.charAt(0).toUpperCase()+e.substring(1);if(a[i])try{a[i](...r)}catch(e){}})})});let h=a;function f(){let e=i.default.useContext(s.RouterContext);if(!e)throw Object.defineProperty(Error("NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted"),"__NEXT_ERROR_CODE",{value:"E509",enumerable:!1,configurable:!0});return e}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.router=new l.default(...t),a.readyCallbacks.forEach(e=>e()),a.readyCallbacks=[],a.router}function g(e){let t={};for(let r of u){if("object"==typeof e[r]){t[r]=Object.assign(Array.isArray(e[r])?[]:{},e[r]);continue}t[r]=e[r]}return t.events=l.default.events,c.forEach(r=>{t[r]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e[r](...n)}}),t}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},94089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return l}});let n=r(76715),i=r(65430);function l(e){if(e.startsWith("/"))return(0,i.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,n.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},96478:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,W:()=>c});var n=r(67218);r(79130);var i=r(76851),l=r(66819),s=r(48200),o=r(17478);let a=(0,i.z)({secretKey:process.env.CLERK_SECRET_KEY}),u=async({userIds:e})=>{try{let{data:t}=await a.users.getUserList({emailAddress:e}),r=t.map(e=>({id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.emailAddresses[0].emailAddress,avatar:e.imageUrl})),n=e.map(e=>r.find(t=>t.email===e));return(0,l.ZA)(n)}catch(e){}},c=async({roomId:e,currentUser:t,text:r})=>{try{let n=await s.d.getRoom(e),i=Object.keys(n.usersAccesses).filter(e=>e!==t);if(r.length){let e=r.toLowerCase(),t=i.filter(t=>t.toLowerCase().includes(e));return(0,l.ZA)(t)}return(0,l.ZA)(i)}catch(e){}};(0,o.D)([u,c]),(0,n.A)(u,"7f9d304d15482ac489083ba521afe1484a770b9301",null),(0,n.A)(c,"7f26295de556bdc84a46140871380e2da8b27cd5ca",null)},98557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getProperError:function(){return l}});let n=r(84171);function i(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function l(e){return i(e)?e:Object.defineProperty(Error((0,n.isPlainObject)(e)?function(e){let t=new WeakSet;return JSON.stringify(e,(e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))return"[Circular]";t.add(r)}return r})}(e):e+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},98636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return l}});let n=r(98834),i=r(2255);function l(e,t,r,l){if(!t||t===r)return e;let s=e.toLowerCase();return!l&&((0,i.pathHasPrefix)(s,"/api")||(0,i.pathHasPrefix)(s,"/"+t.toLowerCase()))?e:(0,n.addPathPrefix)(e,"/"+t)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[80,391,999,726,658,740,385,21],()=>r(76209));module.exports=n})();