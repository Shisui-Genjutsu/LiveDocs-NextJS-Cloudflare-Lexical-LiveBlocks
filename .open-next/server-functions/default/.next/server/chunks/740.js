exports.id=740,exports.ids=[740],exports.modules={8974:(t,e,r)=>{"use strict";r.d(e,{QP:()=>td});let i=t=>{let e=a(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:t=>{let r=t.split("-");return""===r[0]&&1!==r.length&&r.shift(),o(r,e)||n(t)},getConflictingClassGroupIds:(t,e)=>{let o=r[t]||[];return e&&i[t]?[...o,...i[t]]:o}}},o=(t,e)=>{if(0===t.length)return e.classGroupId;let r=t[0],i=e.nextPart.get(r),s=i?o(t.slice(1),i):void 0;if(s)return s;if(0===e.validators.length)return;let n=t.join("-");return e.validators.find(({validator:t})=>t(n))?.classGroupId},s=/^\[(.+)\]$/,n=t=>{if(s.test(t)){let e=s.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},a=t=>{let{theme:e,classGroups:r}=t,i={nextPart:new Map,validators:[]};for(let t in r)l(r[t],i,t,e);return i},l=(t,e,r,i)=>{t.forEach(t=>{if("string"==typeof t){(""===t?e:d(e,t)).classGroupId=r;return}if("function"==typeof t)return h(t)?void l(t(i),e,r,i):void e.validators.push({validator:t,classGroupId:r});Object.entries(t).forEach(([t,o])=>{l(o,d(e,t),r,i)})})},d=(t,e)=>{let r=t;return e.split("-").forEach(t=>{r.nextPart.has(t)||r.nextPart.set(t,{nextPart:new Map,validators:[]}),r=r.nextPart.get(t)}),r},h=t=>t.isThemeGetter,c=t=>{if(t<1)return{get:()=>void 0,set:()=>{}};let e=0,r=new Map,i=new Map,o=(o,s)=>{r.set(o,s),++e>t&&(e=0,i=r,r=new Map)};return{get(t){let e=r.get(t);return void 0!==e?e:void 0!==(e=i.get(t))?(o(t,e),e):void 0},set(t,e){r.has(t)?r.set(t,e):o(t,e)}}},u=t=>{let{prefix:e,experimentalParseClassName:r}=t,i=t=>{let e,r=[],i=0,o=0,s=0;for(let n=0;n<t.length;n++){let a=t[n];if(0===i&&0===o){if(":"===a){r.push(t.slice(s,n)),s=n+1;continue}if("/"===a){e=n;continue}}"["===a?i++:"]"===a?i--:"("===a?o++:")"===a&&o--}let n=0===r.length?t:t.substring(s),a=p(n);return{modifiers:r,hasImportantModifier:a!==n,baseClassName:a,maybePostfixModifierPosition:e&&e>s?e-s:void 0}};if(e){let t=e+":",r=i;i=e=>e.startsWith(t)?r(e.substring(t.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:e,maybePostfixModifierPosition:void 0}}if(r){let t=i;i=e=>r({className:e,parseClassName:t})}return i},p=t=>t.endsWith("!")?t.substring(0,t.length-1):t.startsWith("!")?t.substring(1):t,f=t=>{let e=Object.fromEntries(t.orderSensitiveModifiers.map(t=>[t,!0]));return t=>{if(t.length<=1)return t;let r=[],i=[];return t.forEach(t=>{"["===t[0]||e[t]?(r.push(...i.sort(),t),i=[]):i.push(t)}),r.push(...i.sort()),r}},m=t=>({cache:c(t.cacheSize),parseClassName:u(t),sortModifiers:f(t),...i(t)}),g=/\s+/,y=(t,e)=>{let{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:s}=e,n=[],a=t.trim().split(g),l="";for(let t=a.length-1;t>=0;t-=1){let e=a[t],{isExternal:d,modifiers:h,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:p}=r(e);if(d){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=i(f?u.substring(0,p):u);if(!m){if(!f||!(m=i(u))){l=e+(l.length>0?" "+l:l);continue}f=!1}let g=s(h).join(":"),y=c?g+"!":g,b=y+m;if(n.includes(b))continue;n.push(b);let w=o(m,f);for(let t=0;t<w.length;++t){let e=w[t];n.push(y+e)}l=e+(l.length>0?" "+l:l)}return l};function b(){let t,e,r=0,i="";for(;r<arguments.length;)(t=arguments[r++])&&(e=w(t))&&(i&&(i+=" "),i+=e);return i}let w=t=>{let e;if("string"==typeof t)return t;let r="";for(let i=0;i<t.length;i++)t[i]&&(e=w(t[i]))&&(r&&(r+=" "),r+=e);return r},v=t=>{let e=e=>e[t]||[];return e.isThemeGetter=!0,e},_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,k=/^\((?:(\w[\w-]*):)?(.+)\)$/i,x=/^\d+\/\d+$/,E=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,O=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,I=t=>x.test(t),C=t=>!!t&&!Number.isNaN(Number(t)),P=t=>!!t&&Number.isInteger(Number(t)),R=t=>t.endsWith("%")&&C(t.slice(0,-1)),D=t=>E.test(t),N=()=>!0,L=t=>S.test(t)&&!A.test(t),$=()=>!1,j=t=>O.test(t),M=t=>T.test(t),U=t=>!K(t)&&!q(t),z=t=>tt(t,to,$),K=t=>_.test(t),H=t=>tt(t,ts,L),B=t=>tt(t,tn,C),W=t=>tt(t,tr,$),F=t=>tt(t,ti,M),G=t=>tt(t,tl,j),q=t=>k.test(t),J=t=>te(t,ts),Y=t=>te(t,ta),V=t=>te(t,tr),X=t=>te(t,to),Z=t=>te(t,ti),Q=t=>te(t,tl,!0),tt=(t,e,r)=>{let i=_.exec(t);return!!i&&(i[1]?e(i[1]):r(i[2]))},te=(t,e,r=!1)=>{let i=k.exec(t);return!!i&&(i[1]?e(i[1]):r)},tr=t=>"position"===t||"percentage"===t,ti=t=>"image"===t||"url"===t,to=t=>"length"===t||"size"===t||"bg-size"===t,ts=t=>"length"===t,tn=t=>"number"===t,ta=t=>"family-name"===t,tl=t=>"shadow"===t;Symbol.toStringTag;let td=function(t,...e){let r,i,o,s=function(a){return i=(r=m(e.reduce((t,e)=>e(t),t()))).cache.get,o=r.cache.set,s=n,n(a)};function n(t){let e=i(t);if(e)return e;let s=y(t,r);return o(t,s),s}return function(){return s(b.apply(null,arguments))}}(()=>{let t=v("color"),e=v("font"),r=v("text"),i=v("font-weight"),o=v("tracking"),s=v("leading"),n=v("breakpoint"),a=v("container"),l=v("spacing"),d=v("radius"),h=v("shadow"),c=v("inset-shadow"),u=v("text-shadow"),p=v("drop-shadow"),f=v("blur"),m=v("perspective"),g=v("aspect"),y=v("ease"),b=v("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[..._(),q,K],x=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],S=()=>[q,K,l],A=()=>[I,"full","auto",...S()],O=()=>[P,"none","subgrid",q,K],T=()=>["auto",{span:["full",P,q,K]},P,q,K],L=()=>[P,"auto",q,K],$=()=>["auto","min","max","fr",q,K],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],M=()=>["start","end","center","stretch","center-safe","end-safe"],tt=()=>["auto",...S()],te=()=>[I,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],tr=()=>[t,q,K],ti=()=>[..._(),V,W,{position:[q,K]}],to=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ts=()=>["auto","cover","contain",X,z,{size:[q,K]}],tn=()=>[R,J,H],ta=()=>["","none","full",d,q,K],tl=()=>["",C,J,H],td=()=>["solid","dashed","dotted","double"],th=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],tc=()=>[C,R,V,W],tu=()=>["","none",f,q,K],tp=()=>["none",C,q,K],tf=()=>["none",C,q,K],tm=()=>[C,q,K],tg=()=>[I,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[D],breakpoint:[D],color:[N],container:[D],"drop-shadow":[D],ease:["in","out","in-out"],font:[U],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[D],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[D],shadow:[D],spacing:["px",C],text:[D],"text-shadow":[D],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",I,K,q,g]}],container:["container"],columns:[{columns:[C,K,q,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[P,"auto",q,K]}],basis:[{basis:[I,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[C,I,"auto","initial","none",K]}],grow:[{grow:["",C,q,K]}],shrink:[{shrink:["",C,q,K]}],order:[{order:[P,"first","last","none",q,K]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...M(),"normal"]}],"justify-self":[{"justify-self":["auto",...M()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...M(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...M(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...M(),"baseline"]}],"place-self":[{"place-self":["auto",...M()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:tt()}],mx:[{mx:tt()}],my:[{my:tt()}],ms:[{ms:tt()}],me:[{me:tt()}],mt:[{mt:tt()}],mr:[{mr:tt()}],mb:[{mb:tt()}],ml:[{ml:tt()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[a,"screen",...te()]}],"min-w":[{"min-w":[a,"screen","none",...te()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[n]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",r,J,H]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,q,B]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",R,K]}],"font-family":[{font:[Y,K,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,q,K]}],"line-clamp":[{"line-clamp":[C,"none",q,B]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",q,K]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",q,K]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:tr()}],"text-color":[{text:tr()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...td(),"wavy"]}],"text-decoration-thickness":[{decoration:[C,"from-font","auto",q,H]}],"text-decoration-color":[{decoration:tr()}],"underline-offset":[{"underline-offset":[C,"auto",q,K]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",q,K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",q,K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ti()}],"bg-repeat":[{bg:to()}],"bg-size":[{bg:ts()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},P,q,K],radial:["",q,K],conic:[P,q,K]},Z,F]}],"bg-color":[{bg:tr()}],"gradient-from-pos":[{from:tn()}],"gradient-via-pos":[{via:tn()}],"gradient-to-pos":[{to:tn()}],"gradient-from":[{from:tr()}],"gradient-via":[{via:tr()}],"gradient-to":[{to:tr()}],rounded:[{rounded:ta()}],"rounded-s":[{"rounded-s":ta()}],"rounded-e":[{"rounded-e":ta()}],"rounded-t":[{"rounded-t":ta()}],"rounded-r":[{"rounded-r":ta()}],"rounded-b":[{"rounded-b":ta()}],"rounded-l":[{"rounded-l":ta()}],"rounded-ss":[{"rounded-ss":ta()}],"rounded-se":[{"rounded-se":ta()}],"rounded-ee":[{"rounded-ee":ta()}],"rounded-es":[{"rounded-es":ta()}],"rounded-tl":[{"rounded-tl":ta()}],"rounded-tr":[{"rounded-tr":ta()}],"rounded-br":[{"rounded-br":ta()}],"rounded-bl":[{"rounded-bl":ta()}],"border-w":[{border:tl()}],"border-w-x":[{"border-x":tl()}],"border-w-y":[{"border-y":tl()}],"border-w-s":[{"border-s":tl()}],"border-w-e":[{"border-e":tl()}],"border-w-t":[{"border-t":tl()}],"border-w-r":[{"border-r":tl()}],"border-w-b":[{"border-b":tl()}],"border-w-l":[{"border-l":tl()}],"divide-x":[{"divide-x":tl()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":tl()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...td(),"hidden","none"]}],"divide-style":[{divide:[...td(),"hidden","none"]}],"border-color":[{border:tr()}],"border-color-x":[{"border-x":tr()}],"border-color-y":[{"border-y":tr()}],"border-color-s":[{"border-s":tr()}],"border-color-e":[{"border-e":tr()}],"border-color-t":[{"border-t":tr()}],"border-color-r":[{"border-r":tr()}],"border-color-b":[{"border-b":tr()}],"border-color-l":[{"border-l":tr()}],"divide-color":[{divide:tr()}],"outline-style":[{outline:[...td(),"none","hidden"]}],"outline-offset":[{"outline-offset":[C,q,K]}],"outline-w":[{outline:["",C,J,H]}],"outline-color":[{outline:tr()}],shadow:[{shadow:["","none",h,Q,G]}],"shadow-color":[{shadow:tr()}],"inset-shadow":[{"inset-shadow":["none",c,Q,G]}],"inset-shadow-color":[{"inset-shadow":tr()}],"ring-w":[{ring:tl()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:tr()}],"ring-offset-w":[{"ring-offset":[C,H]}],"ring-offset-color":[{"ring-offset":tr()}],"inset-ring-w":[{"inset-ring":tl()}],"inset-ring-color":[{"inset-ring":tr()}],"text-shadow":[{"text-shadow":["none",u,Q,G]}],"text-shadow-color":[{"text-shadow":tr()}],opacity:[{opacity:[C,q,K]}],"mix-blend":[{"mix-blend":[...th(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":th()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[C]}],"mask-image-linear-from-pos":[{"mask-linear-from":tc()}],"mask-image-linear-to-pos":[{"mask-linear-to":tc()}],"mask-image-linear-from-color":[{"mask-linear-from":tr()}],"mask-image-linear-to-color":[{"mask-linear-to":tr()}],"mask-image-t-from-pos":[{"mask-t-from":tc()}],"mask-image-t-to-pos":[{"mask-t-to":tc()}],"mask-image-t-from-color":[{"mask-t-from":tr()}],"mask-image-t-to-color":[{"mask-t-to":tr()}],"mask-image-r-from-pos":[{"mask-r-from":tc()}],"mask-image-r-to-pos":[{"mask-r-to":tc()}],"mask-image-r-from-color":[{"mask-r-from":tr()}],"mask-image-r-to-color":[{"mask-r-to":tr()}],"mask-image-b-from-pos":[{"mask-b-from":tc()}],"mask-image-b-to-pos":[{"mask-b-to":tc()}],"mask-image-b-from-color":[{"mask-b-from":tr()}],"mask-image-b-to-color":[{"mask-b-to":tr()}],"mask-image-l-from-pos":[{"mask-l-from":tc()}],"mask-image-l-to-pos":[{"mask-l-to":tc()}],"mask-image-l-from-color":[{"mask-l-from":tr()}],"mask-image-l-to-color":[{"mask-l-to":tr()}],"mask-image-x-from-pos":[{"mask-x-from":tc()}],"mask-image-x-to-pos":[{"mask-x-to":tc()}],"mask-image-x-from-color":[{"mask-x-from":tr()}],"mask-image-x-to-color":[{"mask-x-to":tr()}],"mask-image-y-from-pos":[{"mask-y-from":tc()}],"mask-image-y-to-pos":[{"mask-y-to":tc()}],"mask-image-y-from-color":[{"mask-y-from":tr()}],"mask-image-y-to-color":[{"mask-y-to":tr()}],"mask-image-radial":[{"mask-radial":[q,K]}],"mask-image-radial-from-pos":[{"mask-radial-from":tc()}],"mask-image-radial-to-pos":[{"mask-radial-to":tc()}],"mask-image-radial-from-color":[{"mask-radial-from":tr()}],"mask-image-radial-to-color":[{"mask-radial-to":tr()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[C]}],"mask-image-conic-from-pos":[{"mask-conic-from":tc()}],"mask-image-conic-to-pos":[{"mask-conic-to":tc()}],"mask-image-conic-from-color":[{"mask-conic-from":tr()}],"mask-image-conic-to-color":[{"mask-conic-to":tr()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ti()}],"mask-repeat":[{mask:to()}],"mask-size":[{mask:ts()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",q,K]}],filter:[{filter:["","none",q,K]}],blur:[{blur:tu()}],brightness:[{brightness:[C,q,K]}],contrast:[{contrast:[C,q,K]}],"drop-shadow":[{"drop-shadow":["","none",p,Q,G]}],"drop-shadow-color":[{"drop-shadow":tr()}],grayscale:[{grayscale:["",C,q,K]}],"hue-rotate":[{"hue-rotate":[C,q,K]}],invert:[{invert:["",C,q,K]}],saturate:[{saturate:[C,q,K]}],sepia:[{sepia:["",C,q,K]}],"backdrop-filter":[{"backdrop-filter":["","none",q,K]}],"backdrop-blur":[{"backdrop-blur":tu()}],"backdrop-brightness":[{"backdrop-brightness":[C,q,K]}],"backdrop-contrast":[{"backdrop-contrast":[C,q,K]}],"backdrop-grayscale":[{"backdrop-grayscale":["",C,q,K]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[C,q,K]}],"backdrop-invert":[{"backdrop-invert":["",C,q,K]}],"backdrop-opacity":[{"backdrop-opacity":[C,q,K]}],"backdrop-saturate":[{"backdrop-saturate":[C,q,K]}],"backdrop-sepia":[{"backdrop-sepia":["",C,q,K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",q,K]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[C,"initial",q,K]}],ease:[{ease:["linear","initial",y,q,K]}],delay:[{delay:[C,q,K]}],animate:[{animate:["none",b,q,K]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,q,K]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:tp()}],"rotate-x":[{"rotate-x":tp()}],"rotate-y":[{"rotate-y":tp()}],"rotate-z":[{"rotate-z":tp()}],scale:[{scale:tf()}],"scale-x":[{"scale-x":tf()}],"scale-y":[{"scale-y":tf()}],"scale-z":[{"scale-z":tf()}],"scale-3d":["scale-3d"],skew:[{skew:tm()}],"skew-x":[{"skew-x":tm()}],"skew-y":[{"skew-y":tm()}],transform:[{transform:[q,K,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tg()}],"translate-x":[{"translate-x":tg()}],"translate-y":[{"translate-y":tg()}],"translate-z":[{"translate-z":tg()}],"translate-none":["translate-none"],accent:[{accent:tr()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:tr()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",q,K]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",q,K]}],fill:[{fill:["none",...tr()]}],"stroke-w":[{stroke:[C,J,H,B]}],stroke:[{stroke:["none",...tr()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}})},30685:function(t,e){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t="="),this._paddingCharacter=t}return t.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},t.prototype.encode=function(t){for(var e="",r=0;r<t.length-2;r+=3){var i=t[r]<<16|t[r+1]<<8|t[r+2];e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),e+=this._encodeByte(i>>>6&63),e+=this._encodeByte(i>>>0&63)}var o=t.length-r;if(o>0){var i=t[r]<<16|(2===o?t[r+1]<<8:0);e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),2===o?e+=this._encodeByte(i>>>6&63):e+=this._paddingCharacter||"",e+=this._paddingCharacter||""}return e},t.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},t.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},t.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),r=t.length-e,i=new Uint8Array(this.maxDecodedLength(r)),o=0,s=0,n=0,a=0,l=0,d=0,h=0;s<r-4;s+=4)a=this._decodeChar(t.charCodeAt(s+0)),l=this._decodeChar(t.charCodeAt(s+1)),d=this._decodeChar(t.charCodeAt(s+2)),h=this._decodeChar(t.charCodeAt(s+3)),i[o++]=a<<2|l>>>4,i[o++]=l<<4|d>>>2,i[o++]=d<<6|h,n|=256&a,n|=256&l,n|=256&d,n|=256&h;if(s<r-1&&(a=this._decodeChar(t.charCodeAt(s)),l=this._decodeChar(t.charCodeAt(s+1)),i[o++]=a<<2|l>>>4,n|=256&a,n|=256&l),s<r-2&&(d=this._decodeChar(t.charCodeAt(s+2)),i[o++]=l<<4|d>>>2,n|=256&d),s<r-3&&(h=this._decodeChar(t.charCodeAt(s+3)),i[o++]=d<<6|h,n|=256&h),0!==n)throw Error("Base64Coder: incorrect characters for decoding");return i},t.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-15,String.fromCharCode(e+=62-t>>>8&3)},t.prototype._decodeChar=function(t){var e;return 256+((42-t&t-44)>>>8&-256+t-43+62)+((46-t&t-48)>>>8&-256+t-47+63)+((47-t&t-58)>>>8&-256+t-48+52)+((64-t&t-91)>>>8&-256+t-65+0)+((96-t&t-123)>>>8&-256+t-97+26)},t.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var r=t.length-1;r>=0&&t[r]===this._paddingCharacter;r--)e++;if(t.length<4||e>2)throw Error("Base64Coder: incorrect padding")}return e},t}();e.Coder=o;var s=new o;e.encode=function(t){return s.encode(t)},e.decode=function(t){return s.decode(t)};var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-13,String.fromCharCode(e+=62-t>>>8&49)},e.prototype._decodeChar=function(t){var e;return 256+((44-t&t-46)>>>8&-256+t-45+62)+((94-t&t-96)>>>8&-256+t-95+63)+((47-t&t-58)>>>8&-256+t-48+52)+((64-t&t-91)>>>8&-256+t-65+0)+((96-t&t-123)>>>8&-256+t-97+26)},e}(o);e.URLSafeCoder=n;var a=new n;e.encodeURLSafe=function(t){return a.encode(t)},e.decodeURLSafe=function(t){return a.decode(t)},e.encodedLength=function(t){return s.encodedLength(t)},e.maxDecodedLength=function(t){return s.maxDecodedLength(t)},e.decodedLength=function(t){return s.decodedLength(t)}},38507:function(t,e,r){var i,o={};!function(t){"use strict";t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]);function r(t,r,i,o,s){for(var n,a,l,d,h,c,u,p,f,m,g,y,b;s>=64;){for(m=0,n=r[0],a=r[1],l=r[2],d=r[3],h=r[4],c=r[5],u=r[6],p=r[7];m<16;m++)g=o+4*m,t[m]=(255&i[g])<<24|(255&i[g+1])<<16|(255&i[g+2])<<8|255&i[g+3];for(m=16;m<64;m++)y=((f=t[m-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,b=((f=t[m-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,t[m]=(y+t[m-7]|0)+(b+t[m-16]|0);for(m=0;m<64;m++)y=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&c^~h&u)|0)+(p+(e[m]+t[m]|0)|0)|0,b=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&a^n&l^a&l)|0,p=u,u=c,c=h,h=d+y|0,d=l,l=a,a=n,n=y+b|0;r[0]+=n,r[1]+=a,r[2]+=l,r[3]+=d,r[4]+=h,r[5]+=c,r[6]+=u,r[7]+=p,o+=64,s-=64}return o}var i=function(){function e(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=0x6a09e667,this.state[1]=0xbb67ae85,this.state[2]=0x3c6ef372,this.state[3]=0xa54ff53a,this.state[4]=0x510e527f,this.state[5]=0x9b05688c,this.state[6]=0x1f83d9ab,this.state[7]=0x5be0cd19,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(var t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()},e.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this.finished)throw Error("SHA256: can't update because hash was finished.");var i=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[i++],e--;64===this.bufferLength&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(i=r(this.temp,this.state,t,i,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[i++],e--;return this},e.prototype.finish=function(t){if(!this.finished){var e=this.bytesHashed,i=this.bufferLength,o=e/0x20000000|0,s=e<<3,n=e%64<56?64:128;this.buffer[i]=128;for(var a=i+1;a<n-8;a++)this.buffer[a]=0;this.buffer[n-8]=o>>>24&255,this.buffer[n-7]=o>>>16&255,this.buffer[n-6]=o>>>8&255,this.buffer[n-5]=o>>>0&255,this.buffer[n-4]=s>>>24&255,this.buffer[n-3]=s>>>16&255,this.buffer[n-2]=s>>>8&255,this.buffer[n-1]=s>>>0&255,r(this.temp,this.state,this.buffer,0,n),this.finished=!0}for(var a=0;a<8;a++)t[4*a+0]=this.state[a]>>>24&255,t[4*a+1]=this.state[a]>>>16&255,t[4*a+2]=this.state[a]>>>8&255,t[4*a+3]=this.state[a]>>>0&255;return this},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype._saveState=function(t){for(var e=0;e<this.state.length;e++)t[e]=this.state[e]},e.prototype._restoreState=function(t,e){for(var r=0;r<this.state.length;r++)this.state[r]=t[r];this.bytesHashed=e,this.finished=!1,this.bufferLength=0},e}();t.Hash=i;var o=function(){function t(t){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var e=new Uint8Array(this.blockSize);if(t.length>this.blockSize)new i().update(t).finish(e).clean();else for(var r=0;r<t.length;r++)e[r]=t[r];for(var r=0;r<e.length;r++)e[r]^=54;this.inner.update(e);for(var r=0;r<e.length;r++)e[r]^=106;this.outer.update(e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var r=0;r<e.length;r++)e[r]=0}return t.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},t.prototype.clean=function(){for(var t=0;t<this.istate.length;t++)this.ostate[t]=this.istate[t]=0;this.inner.clean(),this.outer.clean()},t.prototype.update=function(t){return this.inner.update(t),this},t.prototype.finish=function(t){return this.outer.finished?this.outer.finish(t):(this.inner.finish(t),this.outer.update(t,this.digestLength).finish(t)),this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t}();function s(t){var e=new i().update(t),r=e.digest();return e.clean(),r}function n(t,e){var r=new o(t).update(e),i=r.digest();return r.clean(),i}t.HMAC=o,t.hash=s,t.default=s,t.hmac=n;var a=new Uint8Array(t.digestLength);t.hkdf=function(t,e,r,i){void 0===e&&(e=a),void 0===i&&(i=32);for(var s=new Uint8Array([1]),l=new o(n(e,t)),d=new Uint8Array(l.digestLength),h=d.length,c=new Uint8Array(i),u=0;u<i;u++)h===d.length&&(!function(t,e,r,i){var o=i[0];if(0===o)throw Error("hkdf: cannot expand more");e.reset(),o>1&&e.update(t),r&&e.update(r),e.update(i),e.finish(t),i[0]++}(d,l,r,s),h=0),c[u]=d[h++];return l.clean(),d.fill(0),s.fill(0),c},t.pbkdf2=function(t,e,r,i){for(var s=new o(t),n=s.digestLength,a=new Uint8Array(4),l=new Uint8Array(n),d=new Uint8Array(n),h=new Uint8Array(i),c=0;c*n<i;c++){var u=c+1;a[0]=u>>>24&255,a[1]=u>>>16&255,a[2]=u>>>8&255,a[3]=u>>>0&255,s.reset(),s.update(e),s.update(a),s.finish(d);for(var p=0;p<n;p++)l[p]=d[p];for(var p=2;p<=r;p++){s.reset(),s.update(d).finish(d);for(var f=0;f<n;f++)l[f]^=d[f]}for(var p=0;p<n&&c*n+p<i;p++)h[c*n+p]=l[p]}for(var c=0;c<n;c++)l[c]=d[c]=0;for(var c=0;c<4;c++)a[c]=0;return s.clean(),h}}(o);var s=o.default;for(var n in o)s[n]=o[n];"object"==typeof t.exports?t.exports=s:void 0===(i=(function(){return s}).call(o,r,o,t))||(t.exports=i)},40847:(t,e,r)=>{"use strict";r.d(e,{N:()=>c});var i=r(98283),o=r(93800),s=r(70947),n=r(44335);let a=new(r(16698)).AsyncLocalStorage;var l=r(23855);let d=async()=>{var t,e;let r;try{let t=await (0,o.TG)(),e=(0,n._b)(t,i.AA.Headers.ClerkRequestData);r=(0,l.Kk)(e)}catch(t){if(t&&(0,o.Sz)(t))throw t}let d=null!=(e=null==(t=a.getStore())?void 0:t.get("requestData"))?e:r;return(null==d?void 0:d.secretKey)||(null==d?void 0:d.publishableKey)?(0,s.n)(d):(0,s.n)({})};var h=r(88261);async function c(){r(34822);let{userId:t}=await (0,h.j)();return t?(await d()).users.getUser(t):null}},57054:(t,e,r)=>{"use strict";r.d(e,{B:()=>e$});var i=Object.defineProperty,o="@liveblocks/core",s="3.2.1",n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function a(t){console.error(t)}function l(t,e,r){let i=Symbol.for(t),l=r?`${e||"dev"} (${r})`:e||"dev";n[i]?n[i]===l||a(`Multiple copies of Liveblocks are being loaded in your project. This will cause issues! See https://liveblocks.io/docs/errors/dupes 

Conflicts:
- ${t} ${n[i]} (already loaded)
- ${t} ${l} (trying to load this now)`):n[i]=l,e&&s&&e!==s&&a(`Cross-linked versions of Liveblocks found, which will cause issues! See https://liveblocks.io/docs/errors/cross-linked 

Conflicts:
- ${o} is at ${s}
- ${t} is at ${e}

Always upgrade all Liveblocks packages to the same version number.`)}function d(t){let e=t.editedAt?new Date(t.editedAt):void 0,r=new Date(t.createdAt),i=t.reactions.map(t=>({...t,createdAt:new Date(t.createdAt)}));if(t.body)return{...t,reactions:i,createdAt:r,editedAt:e};{let o=new Date(t.deletedAt);return{...t,reactions:i,createdAt:r,editedAt:e,deletedAt:o}}}function h(t){let e=new Date(t.createdAt),r=new Date(t.updatedAt),i=t.comments.map(t=>d(t));return{...t,createdAt:e,updatedAt:r,comments:i}}function c(t){let e=new Date(t.notifiedAt),r=t.readAt?new Date(t.readAt):null;if("activities"in t){let i=t.activities.map(t=>({...t,createdAt:new Date(t.createdAt)}));return{...t,notifiedAt:e,readAt:r,activities:i}}return{...t,notifiedAt:e,readAt:r}}function u(t){let e=new Date(t.createdAt);return{...t,createdAt:e}}((t,e)=>{for(var r in e)i(t,r,{get:e[r],enumerable:!0})})({},{error:()=>g,errorWithTitle:()=>w,warn:()=>m,warnWithTitle:()=>b});var p="background:#0e0d12;border-radius:9999px;color:#fff;padding:3px 7px;font-family:sans-serif;font-weight:600;";function f(t){return"undefined"==typeof window?console[t]:(e,...r)=>console[t]("%cLiveblocks",p,e,...r)}var m=f("warn"),g=f("error");function y(t){return"undefined"==typeof window?console[t]:(e,r,...i)=>console[t](`%cLiveblocks%c ${e}`,p,"font-weight:600",r,...i)}var b=y("warn"),w=y("error");function v(t){return null!=t}function _(t){return null!==t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function k(t){return _(t)&&"string"==typeof t.startsWith}function x(t){throw Error(t)}function E(t){return Object.entries(t)}function S(t){try{return JSON.parse(t)}catch(t){return}}function A(t){return JSON.parse(JSON.stringify(t))}function O(t){let e={...t};return Object.keys(t).forEach(t=>{void 0===e[t]&&delete e[t]}),e}async function T(t,e,r){let i;return Promise.race([t,new Promise((t,o)=>{i=setTimeout(()=>{o(Error(r))},e)})]).finally(()=>clearTimeout(i))}var I=class t extends Error{response;details;constructor(t,e,r){super(t),this.name="HttpError",this.response=e,this.details=r}static async fromResponse(e){let r,i,o;try{r=await e.text()}catch{}let s=r?S(r):void 0;_(s)&&(i=s);let n="";n||="string"==typeof i?.message?i.message:"",n||="string"==typeof i?.error?i.error:"",void 0===s&&(n||=r||""),n||=e.statusText;try{o=new URL(e.url).pathname}catch{}return new t(n+=void 0!==o?` (got status ${e.status} from ${o})`:` (got status ${e.status})`,e,i)}get status(){return this.response.status}},C=t=>t instanceof I&&t.status>=400&&t.status<500;function P(){let t,e;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function R(){let t=new Set;function e(e){return t.add(e),()=>t.delete(e)}function r(t){let r=e(e=>(r(),t(e)));return r}async function i(t){let r;return new Promise(i=>{r=e(e=>{(void 0===t||t(e))&&i(e)})}).finally(()=>r?.())}return{notify:function(e){let r=!1;for(let i of t)i(e),r=!0;return r},subscribe:e,subscribeOnce:r,count:function(){return t.size},waitUntil:i,dispose(){t.clear()},observable:{subscribe:e,subscribeOnce:r,waitUntil:i}}}var D=t=>t,N=Symbol("kSinks"),L=Symbol("kTrigger"),$=null,j=null;function M(t){if(null!==$)return void t();$=new Set;try{t()}finally{for(let t of $)t[L]();$=null}}function U(t){$||x("Expected to be in an active batch"),$.add(t)}function z(t,e){let r=!1,i={...t};return Object.keys(e).forEach(t=>{let o=e[t];i[t]!==o&&(void 0===o?delete i[t]:i[t]=o,r=!0)}),r?i:t}var K=class{equals;#t;[N];constructor(t){this.equals=t??Object.is,this.#t=R(),this[N]=new Set,this.get=this.get.bind(this),this.subscribe=this.subscribe.bind(this),this.subscribeOnce=this.subscribeOnce.bind(this)}dispose(){this.#t.dispose(),this.#t="(disposed)",this.equals="(disposed)"}get hasWatchers(){if(this.#t.count()>0)return!0;for(let t of this[N])if(t.hasWatchers)return!0;return!1}[L](){for(let t of(this.#t.notify(),this[N]))U(t)}subscribe(t){return 0===this.#t.count()&&this.get(),this.#t.subscribe(t)}subscribeOnce(t){let e=this.subscribe(()=>(e(),t()));return e}waitUntil(){throw Error("waitUntil not supported on Signals")}markSinksDirty(){for(let t of this[N])t.markDirty()}addSink(t){this[N].add(t)}removeSink(t){this[N].delete(t)}asReadonly(){return this}},H=class extends K{#e;constructor(t,e){super(e),this.#e=D(t)}dispose(){super.dispose(),this.#e="(disposed)"}get(){return j?.add(this),this.#e}set(t){M(()=>{"function"==typeof t&&(t=t(this.#e)),this.equals(this.#e,t)||(this.#e=D(t),this.markSinksDirty(),U(this))})}},B=Symbol(),W=class t extends K{#r;#i;#o;#s;#n;static from(...e){let r=e.pop();if("function"!=typeof r&&x("Invalid .from() call, last argument expected to be a function"),"function"!=typeof e[e.length-1])return new t(e,r);{let i=e.pop();return new t(e,i,r)}}constructor(t,e,r){super(r),this.#i=!0,this.#r=B,this.#s=t,this.#o=new Set,this.#n=e}dispose(){for(let t of this.#o)t.removeSink(this);this.#r="(disposed)",this.#o="(disposed)",this.#s="(disposed)",this.#n="(disposed)"}get isDirty(){return this.#i}#a(){let t,e=j;j=new Set;try{t=this.#n(...this.#s.map(t=>t.get()))}finally{let t=this.#o;for(let e of(this.#o=new Set,j))this.#o.add(e),t.delete(e);for(let e of t)e.removeSink(this);for(let t of this.#o)t.addSink(this);j=e}return this.#i=!1,!this.equals(this.#r,t)&&(this.#r=t,!0)}markDirty(){this.#i||(this.#i=!0,this.markSinksDirty())}get(){return this.#i&&this.#a(),j?.add(this),this.#r}[L](){this.hasWatchers&&this.#a()&&super[L]()}},F=class extends K{#l;constructor(t){super(),this.#l=t}dispose(){super.dispose(),this.#l="(disposed)"}get(){return j?.add(this),this.#l}mutate(t){M(()=>{let e=!t||t(this.#l);null!==e&&"object"==typeof e&&"then"in e&&x("MutableSignal.mutate() does not support async callbacks"),!1!==e&&(this.markSinksDirty(),U(this))})}};function G(t,e){return null===e||"object"!=typeof e||Array.isArray(e)?e:Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{})}function q(t){return JSON.stringify(t,G)}function J(t){try{return JSON.stringify(t)}catch(e){throw console.error(`Could not stringify: ${e.message}`),console.error(t),e}}var Y=class{input;resolve;reject;promise;constructor(t){this.input=t;let{promise:e,resolve:r,reject:i}=function(){let[t,e,r]=P();return{promise:t,resolve:e,reject:r}}();this.promise=e,this.resolve=r,this.reject=i}},V=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e<63?"_":"-",""),X=class extends Map{#d;constructor(t,e){super(e),this.#d=t}getOrCreate(t,e){if(super.has(t))return super.get(t);{let r=(e??this.#d??x("DefaultMap used without a factory function"))(t);return this.set(t,r),r}}},Z=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function Q(t){let e=[],r=Object.entries(t),i=[],o=[],s=[];return r.forEach(([t,e])=>{if(!Z.test(t))throw Error("Key must only contain letters, numbers, _");tr(e)?i.push([t,e]):_(e)&&(k(e)?o.push([t,e]):s.push([t,e]))}),e=[...tt(i),...te(o)],s.forEach(([t,r])=>{let i=Object.entries(r),o=[],s=[];i.forEach(([e,r])=>{if(to(e))throw Error("Key cannot be empty");tr(r)?o.push([ti(t,e),r]):k(r)&&s.push([ti(t,e),r])}),e=[...e,...tt(o),...te(s)]}),e.map(({key:t,operator:e,value:r})=>`${t}${e}${ts(r)}`).join(" ")}var tt=t=>{let e=[];return t.forEach(([t,r])=>{e.push({key:t,operator:":",value:r})}),e},te=t=>{let e=[];return t.forEach(([t,r])=>{"startsWith"in r&&"string"==typeof r.startsWith&&e.push({key:t,operator:"^",value:r.startsWith})}),e},tr=t=>"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t,ti=(t,e)=>e?`${t}[${ts(e)}]`:t,to=t=>!t||""===t.toString().trim();function ts(t){let e=JSON.stringify(t);return"string"!=typeof t||e.includes("'")?e:`'${e.slice(1,-1).replace(/\\"/g,'"')}'`}function tn(t,e,r){let i=new URL(e,t);return void 0!==r&&(i.search=(r instanceof URLSearchParams?r:function(t){let e=new URLSearchParams;for(let[r,i]of Object.entries(t))null!=i&&e.set(r,i.toString());return e}(r)).toString()),i.toString()}function ta(t,...e){return t.reduce((t,r,i)=>t+encodeURIComponent(e[i-1]??"")+r)}function tl(t,e){throw Error(e)}function td(t,e="Expected value to be non-nullable"){return t}var th=class{#h;constructor(t){this.#h=t}get current(){return this.#h}allowPatching(t){let e=this,r=!0;t({...this.#h,patch(t){if(r)for(let r of(e.#h=Object.assign({},e.#h,t),Object.entries(t))){let[t,e]=r;"patch"!==t&&(this[t]=e)}else throw Error("Can no longer patch stale context")}}),r=!1}},tc=1,tu=class{id;#c;#u;#p;#f;#m;#g;events;#y;#b;#w;get #v(){let t=this.#p.values()[Symbol.iterator]().next();if(!t.done)return t.value;throw Error("No states defined yet")}get currentState(){if(null===this.#f)if(0===this.#c)throw Error("Not started yet");else throw Error("Already stopped");return this.#f}start(){if(0!==this.#c)throw Error("State machine has already started");return this.#c=1,this.#f=this.#v,this.#_(null),this}stop(){if(1!==this.#c)throw Error("Cannot stop a state machine that hasn't started yet");this.#k(null),this.#c=2,this.#f=null}constructor(t){this.id=tc++,this.#c=0,this.#f=null,this.#p=new Set,this.#b=new Map,this.#y=[],this.#w=new Set,this.#m=new Map,this.#u=new th(t),this.#g={didReceiveEvent:R(),willTransition:R(),didIgnoreEvent:R(),willExitState:R(),didEnterState:R()},this.events={didReceiveEvent:this.#g.didReceiveEvent.observable,willTransition:this.#g.willTransition.observable,didIgnoreEvent:this.#g.didIgnoreEvent.observable,willExitState:this.#g.willExitState.observable,didEnterState:this.#g.didEnterState.observable}}get context(){return this.#u.current}addState(t){if(0!==this.#c)throw Error("Already started");return this.#p.add(t),this}onEnter(t,e){if(0!==this.#c)throw Error("Already started");if(this.#b.has(t))throw Error(`enter/exit function for ${t} already exists`);return this.#b.set(t,e),this}onEnterAsync(t,e,r,i,o){return this.onEnter(t,()=>{let t=new AbortController,s=t.signal,n=o?setTimeout(()=>{let t=Error("Timed out");this.#x({type:"ASYNC_ERROR",reason:t},i)},o):void 0,a=!1;return e(this.#u.current,s).then(t=>{s.aborted||(a=!0,this.#x({type:"ASYNC_OK",data:t},r))},t=>{s.aborted||(a=!0,this.#x({type:"ASYNC_ERROR",reason:t},i))}),()=>{clearTimeout(n),a||t.abort()}})}#E(t){let e=[];if("*"===t)for(let t of this.#p)e.push(t);else if(t.endsWith(".*")){let r=t.slice(0,-1);for(let t of this.#p)t.startsWith(r)&&e.push(t)}else this.#p.has(t)&&e.push(t);if(0===e.length)throw Error(`No states match ${JSON.stringify(t)}`);return e}addTransitions(t,e){if(0!==this.#c)throw Error("Already started");for(let r of this.#E(t)){let i=this.#m.get(r);for(let[o,s]of(void 0===i&&(i=new Map,this.#m.set(r,i)),Object.entries(e))){if(i.has(o))throw Error(`Trying to set transition "${o}" on "${r}" (via "${t}"), but a transition already exists there.`);let e=s;if(this.#w.add(o),void 0!==e){let t="function"==typeof e?e:()=>e;i.set(o,t)}}}return this}addTimedTransition(t,e,r){return this.onEnter(t,()=>{let t=setTimeout(()=>{this.#x({type:"TIMER"},r)},"function"==typeof e?e(this.#u.current):e);return()=>{clearTimeout(t)}})}#S(t){return this.#m.get(this.currentState)?.get(t)}#k(t){this.#g.willExitState.notify(this.currentState),this.#u.allowPatching(e=>{t=t??this.#y.length;for(let r=0;r<t;r++)this.#y.pop()?.(e)})}#_(t){let e=function(t,e){let r=t.split(".");if(e<1||e>r.length+1)throw Error("Invalid number of levels");let i=[];e>r.length&&i.push("*");for(let t=r.length-e+1;t<r.length;t++){let e=r.slice(0,t);e.length>0&&i.push(e.join(".")+".*")}return i.push(t),i}(this.currentState,t??this.currentState.split(".").length+1);this.#u.allowPatching(t=>{for(let r of e){let e=this.#b.get(r),i=e?.(t);"function"==typeof i?this.#y.push(i):this.#y.push(null)}}),this.#g.didEnterState.notify(this.currentState)}send(t){if(!this.#w.has(t.type))throw Error(`Invalid event ${JSON.stringify(t.type)}`);if(2===this.#c)return;let e=this.#S(t.type);if(void 0!==e)return this.#x(t,e);this.#g.didIgnoreEvent.notify(t)}#x(t,e){let r,i;this.#g.didReceiveEvent.notify(t);let o=this.currentState,s=("function"==typeof e?e:()=>e)(t,this.#u.current);if(null===s)return void this.#g.didIgnoreEvent.notify(t);if("string"==typeof s?r=s:(r=s.target,i=Array.isArray(s.effect)?s.effect:[s.effect]),!this.#p.has(r))throw Error(`Invalid next state name: ${JSON.stringify(r)}`);this.#g.willTransition.notify({from:o,to:r});let[n,a]=function(t,e){if(t===e)return[0,0];let r=t.split("."),i=e.split("."),o=Math.min(r.length,i.length),s=0;for(;s<o&&r[s]===i[s];s++);return[r.length-s,i.length-s]}(this.currentState,r);if(n>0&&this.#k(n),this.#f=r,void 0!==i){let e=i;this.#u.allowPatching(r=>{for(let i of e)"function"==typeof i?i(r,t):r.patch(i)})}a>0&&this.#_(a)}},tp=(t=>(t[t.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",t[t.USER_JOINED=101]="USER_JOINED",t[t.USER_LEFT=102]="USER_LEFT",t[t.BROADCASTED_EVENT=103]="BROADCASTED_EVENT",t[t.ROOM_STATE=104]="ROOM_STATE",t[t.INITIAL_STORAGE_STATE=200]="INITIAL_STORAGE_STATE",t[t.UPDATE_STORAGE=201]="UPDATE_STORAGE",t[t.REJECT_STORAGE_OP=299]="REJECT_STORAGE_OP",t[t.UPDATE_YDOC=300]="UPDATE_YDOC",t[t.THREAD_CREATED=400]="THREAD_CREATED",t[t.THREAD_DELETED=407]="THREAD_DELETED",t[t.THREAD_METADATA_UPDATED=401]="THREAD_METADATA_UPDATED",t[t.THREAD_UPDATED=408]="THREAD_UPDATED",t[t.COMMENT_CREATED=402]="COMMENT_CREATED",t[t.COMMENT_EDITED=403]="COMMENT_EDITED",t[t.COMMENT_DELETED=404]="COMMENT_DELETED",t[t.COMMENT_REACTION_ADDED=405]="COMMENT_REACTION_ADDED",t[t.COMMENT_REACTION_REMOVED=406]="COMMENT_REACTION_REMOVED",t))(tp||{}),tf=(t=>(t[t.CLOSE_NORMAL=1e3]="CLOSE_NORMAL",t[t.CLOSE_ABNORMAL=1006]="CLOSE_ABNORMAL",t[t.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",t[t.TRY_AGAIN_LATER=1013]="TRY_AGAIN_LATER",t[t.INVALID_MESSAGE_FORMAT=4e3]="INVALID_MESSAGE_FORMAT",t[t.NOT_ALLOWED=4001]="NOT_ALLOWED",t[t.MAX_NUMBER_OF_MESSAGES_PER_SECONDS=4002]="MAX_NUMBER_OF_MESSAGES_PER_SECONDS",t[t.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS=4003]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS",t[t.MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP=4004]="MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP",t[t.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM=4005]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM",t[t.ROOM_ID_UPDATED=4006]="ROOM_ID_UPDATED",t[t.KICKED=4100]="KICKED",t[t.TOKEN_EXPIRED=4109]="TOKEN_EXPIRED",t[t.CLOSE_WITHOUT_RETRY=4999]="CLOSE_WITHOUT_RETRY",t))(tf||{});function tm(t){return 4999===t||t>=4e3&&t<4100}function tg(t){return 1013===t||t>=4200&&t<4300}function ty(t){let e=t.currentState;switch(e){case"@ok.connected":case"@ok.awaiting-pong":return"connected";case"@idle.initial":return"initial";case"@auth.busy":case"@auth.backoff":case"@connecting.busy":case"@connecting.backoff":case"@idle.zombie":return t.context.successCount>0?"reconnecting":"connecting";case"@idle.failed":return"disconnected";default:return tl(e,"Unknown state")}}var tb=[250,500,1e3,2e3,4e3,8e3,1e4],tw=tb[0]-1,tv=class extends Error{constructor(t){super(t)}};function t_(t,e){return e.find(e=>e>t)??e[e.length-1]}function tk(t){t.patch({backoffDelay:t_(t.backoffDelay,tb)})}function tx(t){t.patch({backoffDelay:t_(t.backoffDelay,null)})}function tE(t){t.patch({successCount:0})}function tS(t,e){let r=2===t?g:1===t?m:()=>{};return()=>{r(e)}}function tA(t){let e="Connection to Liveblocks websocket server";return r=>{t instanceof Error?m(`${e} could not be established. ${String(t)}`):m(tI(t)?`${e} closed prematurely (code: ${t.code}). Retrying in ${r.backoffDelay}ms.`:`${e} could not be established.`)}}function tO(t){let e=[`code: ${t.code}`];return t.reason&&e.push(`reason: ${t.reason}`),t=>{m(`Connection to Liveblocks websocket server closed (${e.join(", ")}). Retrying in ${t.backoffDelay}ms.`)}}var tT=tS(1,"Connection to WebSocket closed permanently. Won't retry.");function tI(t){return!(t instanceof Error)&&"close"===t.type}var tC=t=>e=>e.patch(t);function tP(t,e){if(Object.is(t,e))return!0;let r=Array.isArray(t),i=Array.isArray(e);if(r||i){if(!r||!i)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Object.is(t[r],e[r]))return!1;return!0}if(!_(t)||!_(e))return!1;let o=Object.keys(t);return o.length===Object.keys(e).length&&o.every(r=>Object.prototype.hasOwnProperty.call(e,r)&&Object.is(t[r],e[r]))}Symbol();var tR=class t{#A;#O;constructor(t,e){this.#O=e,this.#A=t}static with(e){return t.fromAlreadySorted([],e)}static from(e,r){let i=new t([],r);for(let t of e)i.add(t);return i}static fromAlreadySorted(e,r){return new t(e,r)}clone(){return new t(this.#A.slice(),this.#O)}add(t){let e=function(t,e,r){let i=0,o=t.length;for(;i<o;){let s=i+(o-i>>1);r(e,t[s])?o=s:i=s+1}return i}(this.#A,t,this.#O);this.#A.splice(e,0,t)}clear(){let t=this.#A.length>0;return this.#A.length=0,t}removeBy(t,e=Number.POSITIVE_INFINITY){let r=0;for(let i=0;i<this.#A.length;i++)if(t(this.#A[i])){if(this.#A.splice(i,1),++r>=e)break;i--}return r>0}remove(t){let e=this.#A.indexOf(t);return e>=0&&(this.#A.splice(e,1),!0)}at(t){return this.#A[t]}get length(){return this.#A.length}*filter(t){for(let e of this.#A)t(e)&&(yield e)}*findAllRight(t){for(let e=this.#A.length-1;e>=0;e--){let r=this.#A[e];t(r,e)&&(yield r)}}[Symbol.iterator](){return this.#A[Symbol.iterator]()}*iterReversed(){for(let t=this.#A.length-1;t>=0;t--)yield this.#A[t]}find(t,e){let r=this.findIndex(t,e);return r>-1?this.#A.at(r):void 0}findIndex(t,e=0){for(let r=Math.max(0,e);r<this.#A.length;r++)if(t(this.#A[r],r))return r;return -1}findRight(t,e){let r=this.findIndexRight(t,e);return r>-1?this.#A.at(r):void 0}findIndexRight(t,e=this.#A.length-1){for(let r=Math.min(e,this.#A.length-1);r>=0;r--)if(t(this.#A[r],r))return r;return -1}get rawArray(){return this.#A}},tD=(Symbol.iterator,(t=>(t.Read="room:read",t.Write="room:write",t.PresenceWrite="room:presence:write",t.CommentsWrite="comments:write",t.CommentsRead="comments:read",t))(tD||{}));Symbol("*");R().observable,Date.now();var tN=Symbol("notification-settings-plain");function tL(t){let e={[tN]:{value:t,enumerable:!1}};for(let t of["email","slack","teams","webPush"])e[t]={enumerable:!0,get(){let e=this[tN][t];return void 0===e?(g(`In order to use the '${t}' channel, please set up your project first. For more information: https://liveblocks.io/docs/errors/enable-a-notification-channel`),null):e}};return void 0!==e?Object.create(null,e):Object.create(null)}var t$=tU(0),tj=tU(1),tM=t$+tU(-1);function tU(t){let e=32+(t<0?95+t:t);if(e<32||e>126)throw Error(`Invalid n value: ${t}`);return String.fromCharCode(e)}function tz(t,e){if(void 0!==t&&void 0!==e){var r=t,i=e;if(r<i)return tK(r,i);if(r>i)return tK(i,r);throw Error("Cannot compute value between two equal positions")}if(void 0!==t){var o=t;for(let t=0;t<=o.length-1;t++){let e=o.charCodeAt(t);if(!(e>=126))return o.substring(0,t)+String.fromCharCode(e+1)}return o+tj}if(void 0===e)return tj;{var s=e;let t=s.length-1;for(let e=0;e<=t;e++){let r=s.charCodeAt(e);if(!(r<=32))if(e!==t)return s.substring(0,e+1);else if(33===r)return s.substring(0,e)+tM;else return s.substring(0,e)+String.fromCharCode(r-1)}return tj}}function tK(t,e){let r=0,i=t.length,o=e.length;for(;;){let a=r<i?t.charCodeAt(r):32,l=r<o?e.charCodeAt(r):126;if(a===l){r++;continue}if(l-a!=1){var s,n;return s=t,((n=r)<s.length?s.substring(0,n):s+t$.repeat(n-s.length))+String.fromCharCode(l+a>>1)}{let e=r+1,i=t.substring(0,e);return i.length<e&&(i+=t$.repeat(e-i.length)),i+tK(t.substring(e),"")}}}function tH(t){return!function(t){if(""===t)return!1;let e=t.length-1,r=t.charCodeAt(e);if(r<33||r>126)return!1;for(let r=0;r<e;r++){let e=t.charCodeAt(r);if(e<32||e>126)return!1}return!0}(t)?function(t){let e=[];for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);e.push(i<32?32:i>126?126:i)}for(;e.length>0&&32===e[e.length-1];)e.length--;return e.length>0?String.fromCharCode(...e):tj}(t):t}var tB=(t=>(t[t.INIT=0]="INIT",t[t.SET_PARENT_KEY=1]="SET_PARENT_KEY",t[t.CREATE_LIST=2]="CREATE_LIST",t[t.UPDATE_OBJECT=3]="UPDATE_OBJECT",t[t.CREATE_OBJECT=4]="CREATE_OBJECT",t[t.DELETE_CRDT=5]="DELETE_CRDT",t[t.DELETE_OBJECT_KEY=6]="DELETE_OBJECT_KEY",t[t.CREATE_MAP=7]="CREATE_MAP",t[t.CREATE_REGISTER=8]="CREATE_REGISTER",t))(tB||{});function tW(t,e,r=tH(e)){return Object.freeze({type:"HasParent",node:t,key:e,pos:r})}var tF=Object.freeze({type:"NoParent"}),tG=class{#T;#I;#C=tF;_getParentKeyOrThrow(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldKey;default:return tl(this.parent,"Unknown state")}}get _parentPos(){switch(this.parent.type){case"HasParent":return this.parent.pos;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldPos;default:return tl(this.parent,"Unknown state")}}get _pool(){return this.#T}get roomId(){return this.#T?this.#T.roomId:null}get _id(){return this.#I}get parent(){return this.#C}get _parentKey(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":return null;case"Orphaned":return this.parent.oldKey;default:return tl(this.parent,"Unknown state")}}_apply(t,e){if(5===t.type&&"HasParent"===this.parent.type)return this.parent.node._detachChild(this);return{modified:!1}}_setParentLink(t,e){switch(this.parent.type){case"HasParent":if(this.parent.node!==t)throw Error("Cannot set parent: node already has a parent");this.#C=tW(t,e);return;case"Orphaned":case"NoParent":this.#C=tW(t,e);return;default:return tl(this.parent,"Unknown state")}}_attach(t,e){if(this.#I||this.#T)throw Error("Cannot attach node: already attached");e.addNode(t,this),this.#I=t,this.#T=e}_detach(){switch(this.#T&&this.#I&&this.#T.deleteNode(this.#I),this.parent.type){case"HasParent":this.#C=function(t,e=tH(t)){return Object.freeze({type:"Orphaned",oldKey:t,oldPos:e})}(this.parent.key,this.parent.pos);break;case"NoParent":this.#C=tF;break;case"Orphaned":break;default:tl(this.parent,"Unknown state")}this.#T=void 0}#P;#R;#D;invalidate(){(void 0!==this.#P||void 0!==this.#D)&&(this.#P=void 0,this.#D=void 0,"HasParent"===this.parent.type&&this.parent.node.invalidate())}toTreeNode(t){return(void 0===this.#D||this.#R!==t)&&(this.#R=t,this.#D=this._toTreeNode(t)),this.#D}toImmutable(){return void 0===this.#P&&(this.#P=this._toImmutable()),this.#P}},tq=(t=>(t[t.OBJECT=0]="OBJECT",t[t.LIST=1]="LIST",t[t.MAP=2]="MAP",t[t.REGISTER=3]="REGISTER",t))(tq||{}),tJ=class t extends tG{#A;constructor(t){super(),this.#A=t}get data(){return this.#A}static _deserialize([e,r],i,o){let s=new t(r.data);return s._attach(e,o),s}_toOps(t,e,r){if(void 0===this._id)throw Error("Cannot serialize register if parentId or parentKey is undefined");return[{type:8,opId:r?.generateOpId(),id:this._id,parentId:t,parentKey:e,data:this.data}]}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveRegister if parent is missing");return{type:3,parentId:td(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key,data:this.data}}_attachChild(t){throw Error("Method not implemented.")}_detachChild(t){throw Error("Method not implemented.")}_apply(t,e){return super._apply(t,e)}_toTreeNode(t){return{type:"Json",id:this._id??V(),key:t,payload:this.#A}}_toImmutable(){return this.#A}clone(){return A(this.data)}};function tY(t,e){let r=t._parentPos,i=e._parentPos;return r===i?0:r<i?-1:1}var tV=class t extends tG{#N;#L;#$;constructor(t){let e;for(let r of(super(),this.#N=[],this.#L=new WeakSet,this.#$=new Map,t)){let t=tz(e),i=eo(r);i._setParentLink(this,t),this.#N.push(i),e=t}}static _deserialize([e],r,i){let o=new t([]);o._attach(e,i);let s=r.get(e);if(void 0===s)return o;for(let[t,e]of s){let s=t7([t,e],r,i);s._setParentLink(o,e.parentKey),o._insertAndSort(s)}return o}_toOps(t,e,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let i=[],o={id:this._id,opId:r?.generateOpId(),type:2,parentId:t,parentKey:e};for(let t of(i.push(o),this.#N)){let e=t._getParentKeyOrThrow(),o=t5(t._toOps(this._id,e,r),void 0),s=o[0].opId;void 0!==s&&this.#$.set(e,s),i.push(...o)}return i}_insertAndSort(t){this.#N.push(t),this._sortItems()}_sortItems(){this.#N.sort(tY),this.invalidate()}_indexOfPosition(t){return this.#N.findIndex(e=>e._getParentKeyOrThrow()===t)}_attach(t,e){for(let r of(super._attach(t,e),this.#N))r._attach(e.generateId(),e)}_detach(){for(let t of(super._detach(),this.#N))t._detach()}#j(t){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:e,parentKey:r}=t,i=t3(t);i._attach(e,this._pool),i._setParentLink(this,r);let o=t.deletedId,s=this._indexOfPosition(r);if(-1!==s){let e=this.#N[s];if(e._id===o)return e._detach(),this.#N[s]=i,{modified:tZ(this,[tQ(s,i)]),reverse:[]};{this.#L.add(e),this.#N[s]=i;let r=[tQ(s,i)],o=this.#M(t.deletedId);return o&&r.push(o),{modified:tZ(this,r),reverse:[]}}}{let e=[],o=this.#M(t.deletedId);return o&&e.push(o),this._insertAndSort(i),e.push(t1(this._indexOfPosition(r),i)),{reverse:[],modified:tZ(this,e)}}}#U(t){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let e=[],r=this.#M(t.deletedId);r&&e.push(r);let i=this.#$.get(t.parentKey);if(void 0!==i)if(i!==t.opId)return 0===e.length?{modified:!1}:{modified:tZ(this,e),reverse:[]};else this.#$.delete(t.parentKey);let o=this._indexOfPosition(t.parentKey),s=this.#N.find(e=>e._id===t.id);if(void 0!==s){if(s._parentKey===t.parentKey)return{modified:e.length>0&&tZ(this,e),reverse:[]};if(-1!==o){this.#L.add(this.#N[o]);let[t]=this.#N.splice(o,1);e.push(t0(o,t))}let r=this.#N.indexOf(s);s._setParentLink(this,t.parentKey),this._sortItems();let i=this.#N.indexOf(s);return i!==r&&e.push(t2(r,i,s)),{modified:e.length>0&&tZ(this,e),reverse:[]}}{let r=this._pool.getNode(t.id);if(r&&this.#L.has(r)){r._setParentLink(this,t.parentKey),this.#L.delete(r),this._insertAndSort(r);let i=this.#N.indexOf(r);return{modified:tZ(this,[-1===o?t1(i,r):tQ(i,r),...e]),reverse:[]}}{-1!==o&&this.#N.splice(o,1);let{newItem:r,newIndex:i}=this.#z(t,t.parentKey);return{modified:tZ(this,[-1===o?t1(i,r):tQ(i,r),...e]),reverse:[]}}}}#M(t){if(void 0===t||void 0===this._pool)return null;let e=this._pool.getNode(t);if(void 0===e)return null;let r=this._detachChild(e);return!1===r.modified?null:r.modified.updates[0]}#K(t){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let e=tH(t.parentKey),r=this._indexOfPosition(e);-1!==r&&this.#H(r,e);let{newItem:i,newIndex:o}=this.#z(t,e);return{modified:tZ(this,[t1(o,i)]),reverse:[]}}#B(t){let e=this.#N.find(e=>e._id===t.id),r=tH(t.parentKey),i=this._indexOfPosition(r);if(e)if(e._parentKey===r)return{modified:!1};else{let t=this.#N.indexOf(e);-1!==i&&this.#H(i,r),e._setParentLink(this,r),this._sortItems();let o=this._indexOfPosition(r);return o===t?{modified:!1}:{modified:tZ(this,[t2(t,o,e)]),reverse:[]}}{let e=td(this._pool).getNode(t.id);if(e&&this.#L.has(e))return e._setParentLink(this,r),this.#L.delete(e),this._insertAndSort(e),{modified:tZ(this,[t1(this._indexOfPosition(r),e)]),reverse:[]};{-1!==i&&this.#H(i,r);let{newItem:e,newIndex:o}=this.#z(t,r);return{modified:tZ(this,[t1(o,e)]),reverse:[]}}}}#W(t){let{id:e,parentKey:r}=t,i=t3(t);if(this._pool?.getNode(e)!==void 0)return{modified:!1};i._attach(e,td(this._pool)),i._setParentLink(this,r);let o=this._indexOfPosition(r),s=r;return -1!==o&&(s=tz(this.#N[o]?._parentPos,this.#N[o+1]?._parentPos),i._setParentLink(this,s)),this._insertAndSort(i),{modified:tZ(this,[t1(this._indexOfPosition(s),i)]),reverse:[{type:5,id:e}]}}#F(t){let{id:e,parentKey:r}=t,i=t3(t);if(this._pool?.getNode(e)!==void 0)return{modified:!1};this.#$.set(r,td(t.opId));let o=this._indexOfPosition(r);if(i._attach(e,td(this._pool)),i._setParentLink(this,r),-1===o)return this._insertAndSort(i),this.#M(t.deletedId),{reverse:[{type:5,id:e}],modified:tZ(this,[t1(this._indexOfPosition(r),i)])};{let e=this.#N[o];e._detach(),this.#N[o]=i;let s=t5(e._toOps(td(this._id),r,this._pool),t.id),n=[tQ(o,i)],a=this.#M(t.deletedId);return a&&n.push(a),{modified:tZ(this,n),reverse:s}}}_attachChild(t,e){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");return!1!==(r="set"===t.intent?1===e?this.#j(t):2===e?this.#U(t):this.#F(t):1===e?this.#K(t):2===e?this.#B(t):this.#W(t)).modified&&this.invalidate(),r}_detachChild(t){if(t){let e=td(t._parentKey),r=t._toOps(td(this._id),e,this._pool),i=this.#N.indexOf(t);if(-1===i)return{modified:!1};let[o]=this.#N.splice(i,1);return this.invalidate(),t._detach(),{modified:tZ(this,[t0(i,o)]),reverse:r}}return{modified:!1}}#G(t,e){if(this.#L.has(e))return this.#L.delete(e),e._setParentLink(this,t),this._insertAndSort(e),{modified:tZ(this,[t1(this.#N.indexOf(e),e)]),reverse:[]};if(t===e._parentKey)return{modified:!1};let r=this._indexOfPosition(t);if(-1===r){let r=this.#N.indexOf(e);e._setParentLink(this,t),this._sortItems();let i=this.#N.indexOf(e);return i===r?{modified:!1}:{modified:tZ(this,[t2(r,i,e)]),reverse:[]}}{this.#N[r]._setParentLink(this,tz(t,this.#N[r+1]?._parentPos));let i=this.#N.indexOf(e);e._setParentLink(this,t),this._sortItems();let o=this.#N.indexOf(e);return o===i?{modified:!1}:{modified:tZ(this,[t2(i,o,e)]),reverse:[]}}}#q(t,e){let r=td(e._parentKey);if(this.#L.has(e)){let r=this._indexOfPosition(t);return this.#L.delete(e),-1!==r&&this.#N[r]._setParentLink(this,tz(t,this.#N[r+1]?._parentPos)),e._setParentLink(this,t),this._insertAndSort(e),{modified:!1}}{if(t===r)return{modified:!1};let i=this.#N.indexOf(e),o=this._indexOfPosition(t);-1!==o&&this.#N[o]._setParentLink(this,tz(t,this.#N[o+1]?._parentPos)),e._setParentLink(this,t),this._sortItems();let s=this.#N.indexOf(e);return i===s?{modified:!1}:{modified:tZ(this,[t2(i,s,e)]),reverse:[]}}}#J(t,e){let r=td(e._parentKey),i=this.#N.indexOf(e),o=this._indexOfPosition(t);-1!==o&&this.#N[o]._setParentLink(this,tz(t,this.#N[o+1]?._parentPos)),e._setParentLink(this,t),this._sortItems();let s=this.#N.indexOf(e);return i===s?{modified:!1}:{modified:tZ(this,[t2(i,s,e)]),reverse:[{type:1,id:td(e._id),parentKey:r}]}}_setChildKey(t,e,r){return 1===r?this.#G(t,e):2===r?this.#q(t,e):this.#J(t,e)}_apply(t,e){return super._apply(t,e)}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveList if parent is missing");return{type:1,parentId:td(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get length(){return this.#N.length}push(t){return this._pool?.assertStorageIsWritable(),this.insert(t,this.length)}insert(t,e){if(this._pool?.assertStorageIsWritable(),e<0||e>this.#N.length)throw Error(`Cannot insert list item at index "${e}". index should be between 0 and ${this.#N.length}`);let r=tz(this.#N[e-1]?this.#N[e-1]._parentPos:void 0,this.#N[e]?this.#N[e]._parentPos:void 0),i=eo(t);if(i._setParentLink(this,r),this._insertAndSort(i),this._pool&&this._id){let t=this._pool.generateId();i._attach(t,this._pool),this._pool.dispatch(i._toOps(this._id,r,this._pool),[{type:5,id:t}],new Map([[this._id,tZ(this,[t1(e,i)])]]))}}move(t,e){if(this._pool?.assertStorageIsWritable(),e<0)throw Error("targetIndex cannot be less than 0");if(e>=this.#N.length)throw Error("targetIndex cannot be greater or equal than the list length");if(t<0)throw Error("index cannot be less than 0");if(t>=this.#N.length)throw Error("index cannot be greater or equal than the list length");let r=null,i=null;t<e?(i=e===this.#N.length-1?void 0:this.#N[e+1]._parentPos,r=this.#N[e]._parentPos):(i=this.#N[e]._parentPos,r=0===e?void 0:this.#N[e-1]._parentPos);let o=tz(r,i),s=this.#N[t],n=s._getParentKeyOrThrow();if(s._setParentLink(this,o),this._sortItems(),this._pool&&this._id){let r=new Map([[this._id,tZ(this,[t2(t,e,s)])]]);this._pool.dispatch([{type:1,id:td(s._id),opId:this._pool.generateOpId(),parentKey:o}],[{type:1,id:td(s._id),parentKey:n}],r)}}delete(t){if(this._pool?.assertStorageIsWritable(),t<0||t>=this.#N.length)throw Error(`Cannot delete list item at index "${t}". index should be between 0 and ${this.#N.length-1}`);let e=this.#N[t];e._detach();let[r]=this.#N.splice(t,1);if(this.invalidate(),this._pool){let i=e._id;if(i){let o=new Map;o.set(td(this._id),tZ(this,[t0(t,r)])),this._pool.dispatch([{id:i,opId:this._pool.generateOpId(),type:5}],e._toOps(td(this._id),e._getParentKeyOrThrow()),o)}}}clear(){if(this._pool?.assertStorageIsWritable(),this._pool){let t=[],e=[],r=[];for(let i of this.#N){i._detach();let o=i._id;o&&(t.push({type:5,id:o,opId:this._pool.generateOpId()}),e.push(...i._toOps(td(this._id),i._getParentKeyOrThrow())),r.push(t0(0,i)))}this.#N=[],this.invalidate();let i=new Map;i.set(td(this._id),tZ(this,r)),this._pool.dispatch(t,e,i)}else{for(let t of this.#N)t._detach();this.#N=[],this.invalidate()}}set(t,e){if(this._pool?.assertStorageIsWritable(),t<0||t>=this.#N.length)throw Error(`Cannot set list item at index "${t}". index should be between 0 and ${this.#N.length-1}`);let r=this.#N[t],i=r._getParentKeyOrThrow(),o=r._id;r._detach();let s=eo(e);if(s._setParentLink(this,i),this.#N[t]=s,this.invalidate(),this._pool&&this._id){let e=this._pool.generateId();s._attach(e,this._pool);let n=new Map;n.set(this._id,tZ(this,[tQ(t,s)]));let a=t5(s._toOps(this._id,i,this._pool),o);this.#$.set(i,td(a[0].opId));let l=t5(r._toOps(this._id,i,void 0),e);this._pool.dispatch(a,l,n)}}toArray(){return this.#N.map(t=>ei(t))}every(t){return this.toArray().every(t)}filter(t){return this.toArray().filter(t)}find(t){return this.toArray().find(t)}findIndex(t){return this.toArray().findIndex(t)}forEach(t){return this.toArray().forEach(t)}get(t){if(!(t<0)&&!(t>=this.#N.length))return ei(this.#N[t])}indexOf(t,e){return this.toArray().indexOf(t,e)}lastIndexOf(t,e){return this.toArray().lastIndexOf(t,e)}map(t){return this.#N.map((e,r)=>t(ei(e),r))}some(t){return this.toArray().some(t)}[Symbol.iterator](){return new tX(this.#N)}#z(t,e){let r=t3(t);return r._attach(t.id,td(this._pool)),r._setParentLink(this,e),this._insertAndSort(r),{newItem:r,newIndex:this._indexOfPosition(e)}}#H(t,e){let r=tz(e,this.#N.length>t+1?this.#N[t+1]?._parentPos:void 0);this.#N[t]._setParentLink(this,r)}_toTreeNode(t){return{type:"LiveList",id:this._id??V(),key:t,payload:this.#N.map((t,e)=>t.toTreeNode(e.toString()))}}toImmutable(){return super.toImmutable()}_toImmutable(){return this.#N.map(t=>t.toImmutable())}clone(){return new t(this.#N.map(t=>t.clone()))}},tX=class{#Y;constructor(t){this.#Y=t[Symbol.iterator]()}[Symbol.iterator](){return this}next(){let t=this.#Y.next();return t.done?{done:!0,value:void 0}:{value:ei(t.value)}}};function tZ(t,e){return{node:t,type:"LiveList",updates:e}}function tQ(t,e){return{index:t,type:"set",item:e instanceof tJ?e.data:e}}function t0(t,e){return{type:"delete",index:t,deletedItem:e instanceof tJ?e.data:e}}function t1(t,e){return{index:t,type:"insert",item:e instanceof tJ?e.data:e}}function t2(t,e,r){return{type:"move",index:e,item:r instanceof tJ?r.data:r,previousIndex:t}}function t5(t,e){return t.map((t,r)=>0===r?{...t,intent:"set",deletedId:e}:t)}var t6=class t extends tG{#V;#X;constructor(t){if(super(),this.#X=new Map,t){let e=[];for(let[r,i]of t){let t=eo(i);t._setParentLink(this,r),e.push([r,t])}this.#V=new Map(e)}else this.#V=new Map}_toOps(t,e,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let i=[],o={id:this._id,opId:r?.generateOpId(),type:7,parentId:t,parentKey:e};for(let[t,e]of(i.push(o),this.#V))i.push(...e._toOps(this._id,t,r));return i}static _deserialize([e,r],i,o){let s=new t;s._attach(e,o);let n=i.get(e);if(void 0===n)return s;for(let[t,e]of n){let r=t7([t,e],i,o);r._setParentLink(s,e.parentKey),s.#V.set(e.parentKey,r),s.invalidate()}return s}_attach(t,e){for(let[r,i]of(super._attach(t,e),this.#V))et(i)&&i._attach(e.generateId(),e)}_attachChild(t,e){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:i,parentKey:o,opId:s}=t,n=t3(t);if(void 0!==this._pool.getNode(i))return{modified:!1};if(2===e){let t=this.#X.get(o);if(t===s)return this.#X.delete(o),{modified:!1};if(void 0!==t)return{modified:!1}}else 1===e&&this.#X.delete(o);let a=this.#V.get(o);if(a){let t=td(this._id);r=a._toOps(t,o),a._detach()}else r=[{type:5,id:i}];return n._setParentLink(this,o),n._attach(i,this._pool),this.#V.set(o,n),this.invalidate(),{modified:{node:this,type:"LiveMap",updates:{[o]:{type:"update"}}},reverse:r}}_detach(){for(let t of(super._detach(),this.#V.values()))t._detach()}_detachChild(t){let e=td(this._id),r=td(t._parentKey),i=t._toOps(e,r,this._pool);for(let[e,r]of this.#V)r===t&&(this.#V.delete(e),this.invalidate());return t._detach(),{modified:{node:this,type:"LiveMap",updates:{[r]:{type:"delete"}}},reverse:i}}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveMap if parent is missing");return{type:2,parentId:td(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get(t){let e=this.#V.get(t);if(void 0!==e)return ei(e)}set(t,e){this._pool?.assertStorageIsWritable();let r=this.#V.get(t);r&&r._detach();let i=eo(e);if(i._setParentLink(this,t),this.#V.set(t,i),this.invalidate(),this._pool&&this._id){let e=this._pool.generateId();i._attach(e,this._pool);let o=new Map;o.set(this._id,{node:this,type:"LiveMap",updates:{[t]:{type:"update"}}});let s=i._toOps(this._id,t,this._pool);this.#X.set(t,td(s[0].opId)),this._pool.dispatch(i._toOps(this._id,t,this._pool),r?r._toOps(this._id,t):[{type:5,id:e}],o)}}get size(){return this.#V.size}has(t){return this.#V.has(t)}delete(t){this._pool?.assertStorageIsWritable();let e=this.#V.get(t);if(void 0===e)return!1;if(e._detach(),this.#V.delete(t),this.invalidate(),this._pool&&e._id){let r=td(this._id),i=new Map;i.set(r,{node:this,type:"LiveMap",updates:{[t]:{type:"delete"}}}),this._pool.dispatch([{type:5,id:e._id,opId:this._pool.generateOpId()}],e._toOps(r,t),i)}return!0}entries(){let t=this.#V.entries();return{[Symbol.iterator](){return this},next(){let e=t.next();return e.done?{done:!0,value:void 0}:{value:[e.value[0],ei(e.value[1])]}}}}[Symbol.iterator](){return this.entries()}keys(){return this.#V.keys()}values(){let t=this.#V.values();return{[Symbol.iterator](){return this},next(){let e=t.next();return e.done?{done:!0,value:void 0}:{value:ei(e.value)}}}}forEach(t){for(let e of this)t(e[1],e[0],this)}_toTreeNode(t){return{type:"LiveMap",id:this._id??V(),key:t,payload:Array.from(this.#V.entries()).map(([t,e])=>e.toTreeNode(t))}}toImmutable(){return super.toImmutable()}_toImmutable(){let t=new Map;for(let[e,r]of this.#V)t.set(e,r.toImmutable());return D(t)}clone(){return new t(Array.from(this.#V).map(([t,e])=>[t,e.clone()]))}},t4=class t extends tG{#V;#Z;static detectLargeObjects=!1;static #Q(t){let e=new Map,r=null;for(let[o,s]of t){var i;if(0!==s.type||void 0!==(i=s).parentId&&void 0!==i.parentKey){let t=[o,s],r=e.get(s.parentId);void 0!==r?r.push(t):e.set(s.parentId,[t])}else r=[o,s]}if(null===r)throw Error("Root can't be null");return[r,e]}static _fromItems(e,r){let[i,o]=t.#Q(e);return t._deserialize(i,o,r)}constructor(t={}){super(),this.#Z=new Map;let e=O(t);for(let t of Object.keys(e)){let r=e[t];et(r)&&r._setParentLink(this,t)}this.#V=new Map(Object.entries(e))}_toOps(t,e,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let i=r?.generateOpId(),o=[],s={type:4,id:this._id,opId:i,parentId:t,parentKey:e,data:{}};for(let[t,e]of(o.push(s),this.#V))et(e)?o.push(...e._toOps(this._id,t,r)):s.data[t]=e;return o}static _deserialize([e,r],i,o){let s=new t(r.data);return s._attach(e,o),this._deserializeChildren(s,i,o)}static _deserializeChildren(t,e,r){let i=e.get(td(t._id));if(void 0===i)return t;for(let[o,s]of i){let i=function([t,e],r,i){switch(e.type){case 0:return t4._deserialize([t,e],r,i);case 1:return tV._deserialize([t,e],r,i);case 2:return t6._deserialize([t,e],r,i);case 3:return e.data;default:throw Error("Unexpected CRDT type")}}([o,s],e,r);t9(i)&&i._setParentLink(t,s.parentKey),t.#V.set(s.parentKey,i),t.invalidate()}return t}_attach(t,e){for(let[r,i]of(super._attach(t,e),this.#V))et(i)&&i._attach(e.generateId(),e)}_attachChild(t,e){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:i,opId:o,parentKey:s}=t,n=t8(t);if(void 0!==this._pool.getNode(i))return this.#Z.get(s)===o&&this.#Z.delete(s),{modified:!1};if(0===e)this.#Z.set(s,td(o));else if(void 0===this.#Z.get(s));else if(this.#Z.get(s)===o)return this.#Z.delete(s),{modified:!1};else return{modified:!1};let a=td(this._id),l=this.#V.get(s);return et(l)?(r=l._toOps(a,s),l._detach()):r=void 0===l?[{type:6,id:a,key:s}]:[{type:3,id:a,data:{[s]:l}}],this.#V.set(s,n),this.invalidate(),t9(n)&&(n._setParentLink(this,s),n._attach(i,this._pool)),{reverse:r,modified:{node:this,type:"LiveObject",updates:{[s]:{type:"update"}}}}}_detachChild(t){if(t){let e=td(this._id),r=td(t._parentKey),i=t._toOps(e,r,this._pool);for(let[e,r]of this.#V)r===t&&(this.#V.delete(e),this.invalidate());return t._detach(),{modified:{node:this,type:"LiveObject",updates:{[r]:{type:"delete"}}},reverse:i}}return{modified:!1}}_detach(){for(let t of(super._detach(),this.#V.values()))et(t)&&t._detach()}_apply(t,e){return 3===t.type?this.#tt(t,e):6===t.type?this.#te(t,e):super._apply(t,e)}_serialize(){let t={};for(let[e,r]of this.#V)et(r)||(t[e]=r);return"HasParent"===this.parent.type&&this.parent.node._id?{type:0,parentId:this.parent.node._id,parentKey:this.parent.key,data:t}:{type:0,data:t}}#tt(t,e){let r=!1,i=td(this._id),o=[],s={type:3,id:i,data:{}};for(let e in t.data){let t=this.#V.get(e);et(t)?(o.push(...t._toOps(i,e)),t._detach()):void 0!==t?s.data[e]=t:void 0===t&&o.push({type:6,id:i,key:e})}let n={};for(let i in t.data){let o=t.data[i];if(void 0===o)continue;if(e)this.#Z.set(i,td(t.opId));else if(void 0===this.#Z.get(i))r=!0;else{if(this.#Z.get(i)!==t.opId)continue;this.#Z.delete(i);continue}let s=this.#V.get(i);et(s)&&s._detach(),r=!0,n[i]={type:"update"},this.#V.set(i,o),this.invalidate()}return 0!==Object.keys(s.data).length&&o.unshift(s),r?{modified:{node:this,type:"LiveObject",updates:n},reverse:o}:{modified:!1}}#te(t,e){let r=t.key;if(!1===this.#V.has(r)||!e&&void 0!==this.#Z.get(r))return{modified:!1};let i=this.#V.get(r),o=td(this._id),s=[];return et(i)?(s=i._toOps(o,t.key),i._detach()):void 0!==i&&(s=[{type:3,id:o,data:{[r]:i}}]),this.#V.delete(r),this.invalidate(),{modified:{node:this,type:"LiveObject",updates:{[t.key]:{type:"delete"}}},reverse:s}}toObject(){return Object.fromEntries(this.#V)}set(t,e){this._pool?.assertStorageIsWritable(),this.update({[t]:e})}get(t){return this.#V.get(t)}delete(t){let e;this._pool?.assertStorageIsWritable();let r=this.#V.get(t);if(void 0===r)return;if(void 0===this._pool||void 0===this._id){et(r)&&r._detach(),this.#V.delete(t),this.invalidate();return}et(r)?(r._detach(),e=r._toOps(this._id,t)):e=[{type:3,data:{[t]:r},id:this._id}],this.#V.delete(t),this.invalidate();let i=new Map;i.set(this._id,{node:this,type:"LiveObject",updates:{[t]:{type:"delete"}}}),this._pool.dispatch([{type:6,key:t,id:this._id,opId:this._pool.generateOpId()}],e,i)}update(e){if(this._pool?.assertStorageIsWritable(),t.detectLargeObjects){let t={};for(let[e,r]of this.#V)et(r)||(t[e]=r);for(let r of Object.keys(e)){let i=e[r];void 0!==i&&(et(i)||(t[r]=i))}let r=JSON.stringify(t);if(4*r.length>131072){let t=new TextEncoder().encode(r).length;if(t>131072)throw Error(`LiveObject size exceeded limit: ${t} bytes > 131072 bytes. See https://liveblocks.io/docs/platform/limits#Liveblocks-Storage-limits`)}}if(void 0===this._pool||void 0===this._id){for(let t in e){let r=e[t];if(void 0===r)continue;let i=this.#V.get(t);et(i)&&i._detach(),et(r)&&r._setParentLink(this,t),this.#V.set(t,r),this.invalidate()}return}let r=[],i=[],o=this._pool.generateOpId(),s={},n={id:this._id,type:3,data:{}},a={};for(let t in e){let l=e[t];if(void 0===l)continue;let d=this.#V.get(t);if(et(d)?(i.push(...d._toOps(this._id,t)),d._detach()):void 0===d?i.push({type:6,id:this._id,key:t}):n.data[t]=d,et(l)){l._setParentLink(this,t),l._attach(this._pool.generateId(),this._pool);let e=l._toOps(this._id,t,this._pool),i=e.find(t=>t.parentId===this._id);i&&this.#Z.set(t,td(i.opId)),r.push(...e)}else s[t]=l,this.#Z.set(t,o);this.#V.set(t,l),this.invalidate(),a[t]={type:"update"}}0!==Object.keys(n.data).length&&i.unshift(n),0!==Object.keys(s).length&&r.unshift({opId:o,id:this._id,type:3,data:s});let l=new Map;l.set(this._id,{node:this,type:"LiveObject",updates:a}),this._pool.dispatch(r,i,l)}toImmutable(){return super.toImmutable()}toTreeNode(t){return super.toTreeNode(t)}_toTreeNode(t){let e=this._id??V();return{type:"LiveObject",id:e,key:t,payload:Array.from(this.#V.entries()).map(([t,r])=>et(r)?r.toTreeNode(t):{type:"Json",id:`${e}:${t}`,key:t,payload:r})}}_toImmutable(){let t={};for(let[e,r]of this.#V)t[e]=t9(r)?r.toImmutable():r;return t}clone(){return new t(Object.fromEntries(Array.from(this.#V).map(([t,e])=>[t,t9(e)?e.clone():A(e)])))}};function t3(t){return eo(t8(t))}function t8(t){switch(t.type){case 8:return t.data;case 4:return new t4(t.data);case 7:return new t6;case 2:return new tV([]);default:return tl(t,"Unknown creation Op")}}function t7([t,e],r,i){switch(e.type){case 0:return t4._deserialize([t,e],r,i);case 1:return tV._deserialize([t,e],r,i);case 2:return t6._deserialize([t,e],r,i);case 3:return tJ._deserialize([t,e],r,i);default:throw Error("Unexpected CRDT type")}}function t9(t){return ee(t)||t instanceof t6||er(t)}function et(t){return t9(t)||t instanceof tJ}function ee(t){return t instanceof tV}function er(t){return t instanceof t4}function ei(t){return t instanceof tJ?t.data:t instanceof tV||t instanceof t6||t instanceof t4?t:tl(t,"Unknown AbstractCrdt")}function eo(t){return t instanceof t4||t instanceof t6||t instanceof tV?t:new tJ(t)}Symbol.iterator;var es=(t=>(t[t.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",t[t.BROADCAST_EVENT=103]="BROADCAST_EVENT",t[t.FETCH_STORAGE=200]="FETCH_STORAGE",t[t.UPDATE_STORAGE=201]="UPDATE_STORAGE",t[t.FETCH_YDOC=300]="FETCH_YDOC",t[t.UPDATE_YDOC=301]="UPDATE_YDOC",t))(es||{});function en(t,e,r,i,o){if("number"!=typeof e||e<r||void 0!==i&&e>i)throw Error(void 0!==i?`${t} should be between ${o??r} and ${i}.`:`${t} should be at least ${o??r}.`);return e}var ea={paragraph:function(t){return"type"in t&&"paragraph"===t.type},text:function(t){return!("type"in t)&&"text"in t&&"string"==typeof t.text},link:function(t){return"type"in t&&"link"===t.type},mention:function(t){return"type"in t&&"mention"===t.type}},el={paragraph:"block",text:"inline",link:"inline",mention:"inline"},ed={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eh=RegExp(Object.keys(ed).map(t=>`\\${t}`).join("|"),"g"),ec=class{#tr;#ti;constructor(t,e){this.#tr=t,this.#ti=e}toString(){return this.#tr.reduce((t,e,r)=>t+function(t){if(t instanceof ec)return t.toString();if(Array.isArray(t))return(t.length<=0?new ec([""],[]):new ec(["",...Array(t.length-1).fill(""),""],t)).toString();return String(t).replace(eh,t=>ed[t])}(td(this.#ti[r-1]))+e)}};function eu(t,...e){return new ec(t,e)}var ep={_:"\\_","*":"\\*","#":"\\#","`":"\\`","~":"\\~","!":"\\!","|":"\\|","(":"\\(",")":"\\)","{":"\\{","}":"\\}","[":"\\[","]":"\\]"},ef=RegExp(Object.keys(ep).map(t=>`\\${t}`).join("|"),"g"),em=class{#tr;#ti;constructor(t,e){this.#tr=t,this.#ti=e}toString(){return this.#tr.reduce((t,e,r)=>t+function(t){if(t instanceof em)return t.toString();if(Array.isArray(t))return(t.length<=0?new em([""],[]):new em(["",...Array(t.length-1).fill(""),""],t)).toString();return String(t).replace(ef,t=>ep[t])}(td(this.#ti[r-1]))+e)}};function eg(t,...e){return new em(t,e)}function ey(t){let e={};for(let r in t){let i=t[r];void 0!==i&&(e[r]=eb(i))}return e}function eb(t){if(t instanceof t4)return ey(t.toObject());if(t instanceof tV)return t.toArray().map(eb);if(t instanceof t6){let e={};for(let[r,i]of t.entries())e[r]=eb(i);return e}return t instanceof tJ?t.data:Array.isArray(t)?t.map(eb):_(t)?ey(t):t}function ew(t){if(Array.isArray(t))return new tV(t.map(ew));if(!_(t))return t;{let e={};for(let r in t){let i=t[r];void 0!==i&&(e[r]=ew(i))}return new t4(e)}}var ev=(t=>(t.Lexical="lexical",t.TipTap="tiptap",t.BlockNote="blocknote",t))(ev||{});async function e_(t){let e=[];for await(let r of t)e.push(r);return e}async function ek(t,e,r){let i=new Set;for await(let o of t){i.size>=r&&await Promise.race(i);let t=(async()=>{try{await e(o)}finally{i.delete(t)}})();i.add(t)}i.size>0&&await Promise.all(i)}l(o,s,"esm"),r(30685),r(38507);var ex=class extends TransformStream{constructor(){let t="";super({transform(e,r){if((t+=e).includes("\n")){let e=t.split("\n");for(let t=0;t<e.length-1;t++)e[t].length>0&&r.enqueue(e[t]);t=e[e.length-1]}},flush(e){t.length>0&&e.enqueue(t)}})}},eE=class extends TransformStream{constructor(){super({transform(t,e){let r=JSON.parse(t);e.enqueue(r)}})}},eS=/^[\w-]+$/;async function eA(){return void 0!==globalThis.fetch?globalThis.fetch:(await r.e(294).then(r.bind(r,97294))).default}function eO(t){return"string"==typeof t}function eT(t,e){if(!(eO(t)&&t.length>0))throw Error(`Invalid value for field '${e}'. Please provide a non-empty string. For more information: https://liveblocks.io/docs/api-reference/liveblocks-node#authorize`)}function eI(t){return t>=200&&t<300?200:t>=500?503:403}var eC=Object.freeze(["room:write","room:read","room:presence:write","comments:write","comments:read"]),eP=Object.freeze(["room:read","room:presence:write","comments:read"]),eR=Object.freeze(["room:write","comments:write"]),eD=/^([*]|[^*]{1,128}[*]?)$/,eN=class{FULL_ACCESS=eR;READ_ACCESS=eP;#to;#ts;#tn;#ta=!1;#tl=new Map;constructor(t,e,r){eT(e,"userId"),this.#to=t,this.#ts=e,this.#tn=r}#td(t){if(this.#ta)throw Error("You can no longer change these permissions.");let e=this.#tl.get(t);if(e)return e;if(this.#tl.size>=10)throw Error("You cannot add permissions for more than 10 rooms in a single token");return e=new Set,this.#tl.set(t,e),e}allow(t,e){if("string"!=typeof t)throw Error("Room name or pattern must be a string");if(!eD.test(t))throw Error("Invalid room name or pattern");if(0===e.length)throw Error("Permission list cannot be empty");let r=this.#td(t);for(let t of e){if(!eC.includes(t))throw Error(`Not a valid permission: ${t}`);r.add(t)}return this}hasPermissions(){return this.#tl.size>0}seal(){if(this.#ta)throw Error("You cannot reuse Session instances. Please create a new session every time.");this.#ta=!0}serializePermissions(){return Object.fromEntries(Array.from(this.#tl.entries()).map(([t,e])=>[t,Array.from(e)]))}async authorize(){this.seal(),this.hasPermissions()||console.warn("Access tokens without any permission will not be supported soon, you should use wildcards when the client requests a token for resources outside a room. See https://liveblocks.io/docs/errors/liveblocks-client/access-tokens-not-enough-permissions");try{let t=await this.#to(ta`/v2/authorize-user`,{userId:this.#ts,permissions:this.serializePermissions(),userInfo:this.#tn});return{status:eI(t.status),body:await t.text()}}catch(t){return{status:503,body:'Call to /v2/authorize-user failed. See "error" for more information.',error:t}}}};function eL(t){let e=new Date(t.createdAt),r=t.lastConnectionAt?new Date(t.lastConnectionAt):void 0;return{...t,createdAt:e,lastConnectionAt:r}}var e$=class{#th;#tc;constructor(t){let e=t.secret;!function(t,e){if(!(eO(t)&&t.startsWith("sk_")))throw Error(`Invalid value for field '${e}'. Secret keys must start with 'sk_'. Please provide the secret key from your Liveblocks dashboard at https://liveblocks.io/dashboard/apikeys.`);if(!eS.test(t))throw Error(`Invalid chars found in field '${e}'. Please check that you correctly copied the secret key from your Liveblocks dashboard at https://liveblocks.io/dashboard/apikeys.`)}(e,"secret"),this.#th=e,this.#tc=new URL(function(t){return"string"==typeof t&&t.startsWith("http")?t:"https://api.liveblocks.io"}(t.baseUrl))}async #tu(t,e,r){let i=tn(this.#tc,t),o={Authorization:`Bearer ${this.#th}`,"Content-Type":"application/json"},s=await eA();return await s(i,{method:"POST",headers:o,body:JSON.stringify(e),signal:r?.signal})}async #tp(t,e,r){let i=tn(this.#tc,t),o={Authorization:`Bearer ${this.#th}`,"Content-Type":"application/json"},s=await eA();return await s(i,{method:"PUT",headers:o,body:JSON.stringify(e),signal:r?.signal})}async #tf(t,e,r,i){let o=tn(this.#tc,t,r),s={Authorization:`Bearer ${this.#th}`,"Content-Type":"application/octet-stream"},n=await eA();return await n(o,{method:"PUT",headers:s,body:e,signal:i?.signal})}async #tm(t,e){let r=tn(this.#tc,t),i={Authorization:`Bearer ${this.#th}`},o=await eA();return await o(r,{method:"DELETE",headers:i,signal:e?.signal})}async #tg(t,e,r){let i=tn(this.#tc,t,e),o={Authorization:`Bearer ${this.#th}`},s=await eA();return await s(i,{method:"GET",headers:o,signal:r?.signal})}prepareSession(t,...e){let r=e[0];return new eN(this.#tu.bind(this),t,r?.userInfo)}async identifyUser(t,...e){let r=e[0],i=ta`/v2/identify-user`,{userId:o,groupIds:s,tenantId:n}="string"==typeof t?{userId:t,groupIds:void 0,tenantId:void 0}:t;eT(o,"userId");let a={userId:o,groupIds:s,tenantId:n,userInfo:r?.userInfo};try{let t=await this.#tu(i,a);return{status:eI(t.status),body:await t.text()}}catch(t){return{status:503,body:`Call to ${tn(this.#tc,i)} failed. See "error" for more information.`,error:t}}}async getRooms(t={},e){let r,i=ta`/v2/rooms`;"string"==typeof t.query?r=t.query:"object"==typeof t.query&&(r=Q(t.query));let o={limit:t.limit,startingAfter:t.startingAfter,userId:t.userId,groupIds:t.groupIds?t.groupIds.join(","):void 0,query:r},s=await this.#tg(i,o,e);if(!s.ok)throw await ej.from(s);let n=await s.json(),a=n.data.map(eL);return{...n,data:a}}async *iterRooms(t,e){let r,{signal:i}=e??{},o=en("pageSize",e?.pageSize??40,20);for(;;){let{nextCursor:e,data:s}=await this.getRooms({...t,startingAfter:r,limit:o},{signal:i});for(let t of s)yield t;if(!e)break;r=e}}async createRoom(t,e,r){let{defaultAccesses:i,groupsAccesses:o,usersAccesses:s,metadata:n}=e,a=await this.#tu(r?.idempotent?ta`/v2/rooms?idempotent`:ta`/v2/rooms`,{id:t,defaultAccesses:i,groupsAccesses:o,usersAccesses:s,metadata:n},r);if(!a.ok)throw await ej.from(a);return eL(await a.json())}async getOrCreateRoom(t,e,r){return await this.createRoom(t,e,{...r,idempotent:!0})}async upsertRoom(t,e,r){let i=await this.#tu(ta`/v2/rooms/${t}/upsert`,e,r);if(!i.ok)throw await ej.from(i);return eL(await i.json())}async getRoom(t,e){let r=await this.#tg(ta`/v2/rooms/${t}`,void 0,e);if(!r.ok)throw await ej.from(r);return eL(await r.json())}async updateRoom(t,e,r){let{defaultAccesses:i,groupsAccesses:o,usersAccesses:s,metadata:n}=e,a=await this.#tu(ta`/v2/rooms/${t}`,{defaultAccesses:i,groupsAccesses:o,usersAccesses:s,metadata:n},r);if(!a.ok)throw await ej.from(a);return eL(await a.json())}async deleteRoom(t,e){let r=await this.#tm(ta`/v2/rooms/${t}`,e);if(!r.ok)throw await ej.from(r)}async getActiveUsers(t,e){let r=await this.#tg(ta`/v2/rooms/${t}/active_users`,void 0,e);if(!r.ok)throw await ej.from(r);return await r.json()}async broadcastEvent(t,e,r){let i=await this.#tu(ta`/v2/rooms/${t}/broadcast_event`,e,r);if(!i.ok)throw await ej.from(i)}async getStorageDocument(t,e="plain-lson",r){let i=await this.#tg(ta`/v2/rooms/${t}/storage`,{format:e},r);if(!i.ok)throw await ej.from(i);return await i.json()}async #ty(t,e){let r=await this.#tu(ta`/v2/rooms/${t}/request-storage-mutation`,{},e);if(!r.ok)throw await ej.from(r);if("application/x-ndjson"!==r.headers.get("content-type"))throw Error("Unexpected response content type");if(null===r.body)throw Error("Unexpected null body in response");let i=r.body.pipeThrough(new TextDecoderStream).pipeThrough(new ex).pipeThrough(new eE)[Symbol.asyncIterator](),o=(await i.next()).value;if(!_(o)||"number"!=typeof o.actor)throw Error("Failed to obtain a unique session");let s=await e_(i);return{actor:o.actor,nodes:s}}async initializeStorageDocument(t,e,r){let i=await this.#tu(ta`/v2/rooms/${t}/storage`,e,r);if(!i.ok)throw await ej.from(i);return await i.json()}async deleteStorageDocument(t,e){let r=await this.#tm(ta`/v2/rooms/${t}/storage`,e);if(!r.ok)throw await ej.from(r)}async getYjsDocument(t,e={},r){let{format:i,key:o,type:s}=e,n=ta`v2/rooms/${t}/ydoc`,a=await this.#tg(n,{formatting:i?"true":void 0,key:o,type:s},r);if(!a.ok)throw await ej.from(a);return await a.json()}async sendYjsBinaryUpdate(t,e,r={},i){let o=await this.#tf(ta`/v2/rooms/${t}/ydoc`,e,{guid:r.guid},i);if(!o.ok)throw await ej.from(o)}async getYjsDocumentAsBinaryUpdate(t,e={},r){let i=await this.#tg(ta`/v2/rooms/${t}/ydoc-binary`,{guid:e.guid},r);if(!i.ok)throw await ej.from(i);return i.arrayBuffer()}async createSchema(t,e,r){let i=await this.#tu(ta`/v2/schemas`,{name:t,body:e},r);if(!i.ok)throw await ej.from(i);let o=await i.json(),s=new Date(o.createdAt),n=new Date(o.updatedAt);return{...o,createdAt:s,updatedAt:n}}async getSchema(t,e){let r=await this.#tg(ta`/v2/schemas/${t}`,void 0,e);if(!r.ok)throw await ej.from(r);let i=await r.json(),o=new Date(i.createdAt),s=new Date(i.updatedAt);return{...i,createdAt:o,updatedAt:s}}async updateSchema(t,e,r){let i=await this.#tp(ta`/v2/schemas/${t}`,{body:e},r);if(!i.ok)throw await ej.from(i);let o=await i.json(),s=new Date(o.createdAt),n=new Date(o.updatedAt);return{...o,createdAt:s,updatedAt:n}}async deleteSchema(t,e){let r=await this.#tm(ta`/v2/schemas/${t}`,e);if(!r.ok)throw await ej.from(r)}async getSchemaByRoomId(t,e){let r=await this.#tg(ta`/v2/rooms/${t}/schema`,void 0,e);if(!r.ok)throw await ej.from(r);let i=await r.json(),o=new Date(i.createdAt),s=new Date(i.updatedAt);return{...i,createdAt:o,updatedAt:s}}async attachSchemaToRoom(t,e,r){let i=await this.#tu(ta`/v2/rooms/${t}/schema`,{schema:e},r);if(!i.ok)throw await ej.from(i);return await i.json()}async detachSchemaFromRoom(t,e){let r=await this.#tm(ta`/v2/rooms/${t}/schema`,e);if(!r.ok)throw await ej.from(r)}async getThreads(t,e){let r,{roomId:i}=t;"string"==typeof t.query?r=t.query:"object"==typeof t.query&&(r=Q(t.query));let o=await this.#tg(ta`/v2/rooms/${i}/threads`,{query:r},e);if(!o.ok)throw await ej.from(o);let{data:s}=await o.json();return{data:s.map(t=>h(t))}}async getThread(t,e){let{roomId:r,threadId:i}=t,o=await this.#tg(ta`/v2/rooms/${r}/threads/${i}`,void 0,e);if(!o.ok)throw await ej.from(o);return h(await o.json())}async getThreadParticipants(t,e){let{roomId:r,threadId:i}=t,o=await this.#tg(ta`/v2/rooms/${r}/threads/${i}/participants`,void 0,e);if(!o.ok)throw await ej.from(o);return await o.json()}async getThreadSubscriptions(t,e){let{roomId:r,threadId:i}=t,o=await this.#tg(ta`/v2/rooms/${r}/threads/${i}/subscriptions`,void 0,e);if(!o.ok)throw await ej.from(o);let{data:s}=await o.json();return{data:s.map(u)}}async getComment(t,e){let{roomId:r,threadId:i,commentId:o}=t,s=await this.#tg(ta`/v2/rooms/${r}/threads/${i}/comments/${o}`,void 0,e);if(!s.ok)throw await ej.from(s);return d(await s.json())}async createComment(t,e){let{roomId:r,threadId:i,data:o}=t,s=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/comments`,{...o,createdAt:o.createdAt?.toISOString()},e);if(!s.ok)throw await ej.from(s);return d(await s.json())}async editComment(t,e){let{roomId:r,threadId:i,commentId:o,data:s}=t,n=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/comments/${o}`,{...s,editedAt:s.editedAt?.toISOString()},e);if(!n.ok)throw await ej.from(n);return d(await n.json())}async deleteComment(t,e){let{roomId:r,threadId:i,commentId:o}=t,s=await this.#tm(ta`/v2/rooms/${r}/threads/${i}/comments/${o}`,e);if(!s.ok)throw await ej.from(s)}async createThread(t,e){let{roomId:r,data:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/threads`,{...i,comment:{...i.comment,createdAt:i.comment.createdAt?.toISOString()}},e);if(!o.ok)throw await ej.from(o);return h(await o.json())}async deleteThread(t,e){let{roomId:r,threadId:i}=t,o=await this.#tm(ta`/v2/rooms/${r}/threads/${i}`,e);if(!o.ok)throw await ej.from(o)}async markThreadAsResolved(t,e){let{roomId:r,threadId:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/mark-as-resolved`,{userId:t.data.userId},e);if(!o.ok)throw await ej.from(o);return h(await o.json())}async markThreadAsUnresolved(t,e){let{roomId:r,threadId:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/mark-as-unresolved`,{userId:t.data.userId},e);if(!o.ok)throw await ej.from(o);return h(await o.json())}async subscribeToThread(t,e){let{roomId:r,threadId:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/subscribe`,{userId:t.data.userId},e);if(!o.ok)throw await ej.from(o);var s=await o.json();let n=new Date(s.createdAt);return{...s,createdAt:n}}async unsubscribeFromThread(t,e){let{roomId:r,threadId:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/unsubscribe`,{userId:t.data.userId},e);if(!o.ok)throw await ej.from(o)}async editThreadMetadata(t,e){let{roomId:r,threadId:i,data:o}=t,s=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/metadata`,{...o,updatedAt:o.updatedAt?.toISOString()},e);if(!s.ok)throw await ej.from(s);return await s.json()}async addCommentReaction(t,e){var r;let{roomId:i,threadId:o,commentId:s,data:n}=t,a=await this.#tu(ta`/v2/rooms/${i}/threads/${o}/comments/${s}/add-reaction`,{...n,createdAt:n.createdAt?.toISOString()},e);if(!a.ok)throw await ej.from(a);return{...r=await a.json(),createdAt:new Date(r.createdAt)}}async removeCommentReaction(t,e){let{roomId:r,threadId:i,data:o}=t,s=await this.#tu(ta`/v2/rooms/${r}/threads/${i}/comments/${t.commentId}/remove-reaction`,{...o,removedAt:o.removedAt?.toISOString()},e);if(!s.ok)throw await ej.from(s)}async getInboxNotification(t,e){let{userId:r,inboxNotificationId:i}=t,o=await this.#tg(ta`/v2/users/${r}/inbox-notifications/${i}`,void 0,e);if(!o.ok)throw await ej.from(o);return c(await o.json())}async getInboxNotifications(t,e){let r,{userId:i}=t;"string"==typeof t.query?r=t.query:"object"==typeof t.query&&(r=Q(t.query));let o=await this.#tg(ta`/v2/users/${i}/inbox-notifications`,{query:r,limit:t?.limit,startingAfter:t?.startingAfter},e);if(!o.ok)throw await ej.from(o);let s=await o.json();return{...s,data:s.data.map(c)}}async *iterInboxNotifications(t,e){let r,{signal:i}=e??{},o=en("pageSize",e?.pageSize??50,10);for(;;){let{nextCursor:e,data:s}=await this.getInboxNotifications({...t,startingAfter:r,limit:o},{signal:i});for(let t of s)yield t;if(!e)break;r=e}}async getUserRoomSubscriptionSettings(t,e){let{userId:r,startingAfter:i,limit:o}=t,s=await this.#tg(ta`/v2/users/${r}/room-subscription-settings`,{startingAfter:i,limit:o},e);if(!s.ok)throw await ej.from(s);return await s.json()}async getRoomSubscriptionSettings(t,e){let{userId:r,roomId:i}=t,o=await this.#tg(ta`/v2/rooms/${i}/users/${r}/subscription-settings`,void 0,e);if(!o.ok)throw await ej.from(o);return await o.json()}async updateRoomSubscriptionSettings(t,e){let{userId:r,roomId:i,data:o}=t,s=await this.#tu(ta`/v2/rooms/${i}/users/${r}/subscription-settings`,o,e);if(!s.ok)throw await ej.from(s);return await s.json()}async deleteRoomSubscriptionSettings(t,e){let{userId:r,roomId:i}=t,o=await this.#tm(ta`/v2/rooms/${i}/users/${r}/subscription-settings`,e);if(!o.ok)throw await ej.from(o)}async updateRoomId(t,e){let{currentRoomId:r,newRoomId:i}=t,o=await this.#tu(ta`/v2/rooms/${r}/update-room-id`,{newRoomId:i},e);if(!o.ok)throw await ej.from(o);return eL(await o.json())}async triggerInboxNotification(t,e){let r=await this.#tu(ta`/v2/inbox-notifications/trigger`,t,e);if(!r.ok)throw await ej.from(r)}async deleteInboxNotification(t,e){let{userId:r,inboxNotificationId:i}=t,o=await this.#tm(ta`/v2/users/${r}/inbox-notifications/${i}`,e);if(!o.ok)throw await ej.from(o)}async deleteAllInboxNotifications(t,e){let{userId:r}=t,i=await this.#tm(ta`/v2/users/${r}/inbox-notifications`,e);if(!i.ok)throw await ej.from(i)}async getNotificationSettings(t,e){let{userId:r}=t,i=await this.#tg(ta`/v2/users/${r}/notification-settings`,void 0,e);if(!i.ok)throw await ej.from(i);return tL(await i.json())}async updateNotificationSettings(t,e){let{userId:r,data:i}=t,o=await this.#tu(ta`/v2/users/${r}/notification-settings`,i,e);if(!o.ok)throw await ej.from(o);return tL(await o.json())}async deleteNotificationSettings(t,e){let{userId:r}=t,i=await this.#tm(ta`/v2/users/${r}/notification-settings`,e);if(!i.ok)throw await ej.from(i)}async mutateStorage(t,e,r){return this.#tb(t,void 0,e,r)}async massMutateStorage(t,e,r){let i=en("concurrency",r?.concurrency??8,1,20),o=Math.max(20,4*i),{signal:s}=r??{},n=this.iterRooms(t,{pageSize:o,signal:s}),a={signal:s};await ek(n,t=>this.#tb(t.id,t,e,a),i)}async #tb(t,e,r,i){let o,{signal:s,abort:n}=function(t){let e=new AbortController;return{signal:t?AbortSignal.any([e.signal,t]):e.signal,abort:e.abort.bind(e)}}(i?.signal),a=[],l=performance.now(),d=e=>{if(0===a.length||o)return;let r=performance.now();if(!(e||r-l>200))return;l=r;let i=a;a=[],o=this.#tw(t,[{type:es.UPDATE_STORAGE,ops:i}],{signal:s}).catch(t=>{n(t)}).finally(()=>{o=void 0})};try{let{actor:i,nodes:o}=await this.#ty(t,{signal:s}),n=function(t,e){let{getCurrentConnectionId:r,onDispatch:i,isStorageWritable:o=()=>!0}=e,s=0,n=0,a=new Map;return{roomId:t,nodes:a,getNode:t=>a.get(t),addNode:(t,e)=>void a.set(t,e),deleteNode:t=>void a.delete(t),generateId:()=>`${r()}:${s++}`,generateOpId:()=>`${r()}:${n++}`,dispatch(t,e,r){i?.(t,e,r)},assertStorageIsWritable:()=>{if(!o())throw Error("Cannot write to storage with a read only user, please ensure the user has write permissions")}}}(t,{getCurrentConnectionId:()=>i,onDispatch:(t,e,r)=>{if(0!==t.length){for(let e of t)a.push(e);d(!1)}}}),l=t4._fromItems(o,n),h=r({room:e,root:l});d(!0),await h}catch(t){throw n(),t}finally{await o,d(!0),await o}}async #tw(t,e,r){let i=await this.#tu(ta`/v2/rooms/${t}/send-message`,{messages:e},{signal:r?.signal});if(!i.ok)throw await ej.from(i)}},ej=class t extends Error{status;details;constructor(t,e,r){super(t),this.name="LiveblocksError",this.status=e,this.details=r}toString(){let t=`${this.name}: ${this.message} (status ${this.status})`;return this.details&&(t+=`
${this.details}`),t}static async from(e){let r,i=Error();Error.captureStackTrace(i,t.from);let o="An error happened without an error message";try{r=await e.text()}catch{r=o}let s=S(r)??{message:r},n=s.message||o,a=[s.suggestion?`Suggestion: ${String(s.suggestion)}`:void 0,s.docs?`See also: ${String(s.docs)}`:void 0].filter(Boolean).join("\n")||void 0,l=new t(n,e.status,a);return l.stack=i.stack,l}};l("@liveblocks/node","3.2.1","esm")},75986:(t,e,r)=>{"use strict";function i(){for(var t,e,r=0,i="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=function t(e){var r,i,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(r=0;r<s;r++)e[r]&&(i=t(e[r]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}(t))&&(i&&(i+=" "),i+=e);return i}r.d(e,{$:()=>i})}};